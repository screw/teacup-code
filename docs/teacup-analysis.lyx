#LyX 2.2 created this file. For more info see http://www.lyx.org/
\lyxformat 508
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass IEEEtran
\begin_preamble
\usepackage{fixltx2e}
\usepackage[noadjust]{cite}
%\usepackage[breaklinks=true,colorlinks=true,linkcolor=black,citecolor=black,urlcolor=black]{hyperref}
\usepackage{url}
\usepackage{balance}
\usepackage{textcomp}
%\usepackage{txfonts}

% against orphans/widows
\widowpenalty=10000
\clubpenalty=10000
\raggedbottom

% against overful hboxes
\sloppy

\usepackage{color}
\definecolor{lightgray}{gray}{0.95}

\usepackage[parfill]{parskip}

\usepackage{changepage}


\usepackage{lastpage}

% Change the \footnoterule command to separate footnotes from 
% the main text by a short horizontal rule (borrowed
% from the CAIA style)
\renewcommand{\footnoterule}
{
  \kern-3\p@
  \hrule\@width.4\columnwidth
  \kern2.6\p@
}

%% Mimic CAIA TR use of hyperlinks

% The "xcolor" package allows us to define the colours we will use for links   %
% within the PDF when we later load the "hyperref" package.                    %

\RequirePackage{xcolor}
\xdefinecolor{linkc}{RGB}{33,0,99}
\xdefinecolor{citec}{RGB}{0,0,0}
\xdefinecolor{caiablack}{RGB}{0,0,0}
\xdefinecolor{urlc}{RGB}{33,0,99}

% The "hyperref" package allows us to generate a PDF with associated PDF links %
% and bookmarks and other funky PDF stuff.                                     %

\RequirePackage[colorlinks=true,                  % Links are marked as coloured text, not coloured box.
                linkcolor= linkc,                 % Colour of in-document links (e.g. in the table of contents).
                citecolor= caiablack,             % Colour of bibliographic citations.
                urlcolor= urlc,                   % Colour of hyperlinks to the Net.
                pdfpagelayout=SinglePage,         % Initial view is page-by-page
                pdfstartview=FitV,                % Fit the document to window height.
               ]{hyperref}

\newcommand{\sh}[2]{{\small \texttt{#1 #2}}}

\usepackage{pbox}
\usepackage{booktabs}
\end_preamble
\options 11pt, a4paper, conference
\use_default_options false
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding default
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement tbh
\paperfontsize default
\spacing single
\use_hyperref false
\papersize a4paper
\use_geometry false
\use_package amsmath 0
\use_package amssymb 0
\use_package cancel 1
\use_package esint 0
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 2
\paragraph_separation indent
\paragraph_indentation default
\quotes_language english
\papercolumns 2
\papersides 1
\paperpagestyle fancy
\tracking_changes true
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\author 193492759 "gja"
\author 1685850735 "russell"
\end_header

\begin_body

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
title{TEACUP v1.
\change_inserted 1685850735 1494305143
1
\change_deleted 1685850735 1494305143
0
\change_unchanged
 -- Data Analysis Functions}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
author{
\backslash
IEEEauthorblockN{
\change_inserted 193492759 1517561166
Editors: 
\change_unchanged
Sebastian Zander, Grenville Armitage}
\end_layout

\begin_layout Plain Layout

\change_deleted 193492759 1517561694


\backslash
IEEEauthorblockA{Centre for Advanced Internet Architectures
\backslash

\backslash

\end_layout

\begin_layout Plain Layout

\change_deleted 193492759 1517561694

Swinburne University of Technology
\backslash

\backslash

\end_layout

\begin_layout Plain Layout

\change_deleted 193492759 1517561694

Melbourne, Australia
\backslash

\backslash

\change_unchanged

\end_layout

\begin_layout Plain Layout

\change_inserted 193492759 1517551419


\backslash
IEEEauthorblockA{
\end_layout

\begin_layout Plain Layout


\backslash
url{
\change_deleted 193492759 1517551471
szander@swin.edu.au
\change_inserted 193492759 1517551483
s.zander@murdoch.edu.au
\change_unchanged
}, 
\backslash
url{garmitage@swin.edu.au}}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

%This is how to make the abstract/index one column
\end_layout

\begin_layout Plain Layout


\backslash
IEEEoverridecommandlockouts
\end_layout

\begin_layout Plain Layout


\backslash
IEEEaftertitletext{
\backslash
vspace{-0.5
\backslash
baselineskip}
\end_layout

\begin_layout Plain Layout


\backslash
begin{adjustwidth*}{2.5cm}{2.5cm}
\end_layout

\begin_layout Plain Layout


\backslash
noindent
\backslash
begin{abstract} Over the last few decades several TCP congestion control
 algorithms were developed in order to optimise TCP's behaviour in certain
 situations.
 While TCP was traditionally used mainly for file transfers, more recently
 it is also becoming the protocol of choice for streaming applications,
 for example video streaming from YouTube and Netflix is TCP-based 
\backslash
cite{Finamore2011,Rao2011} and there is an ISO standard for Dynamic Adaptive
 Streaming over HTTP (DASH) 
\backslash
cite{dash-standard}.
 However, the impact of different TCP congestion control algorithms on TCP-based
 streaming flows (within a mix of other typical traffic) is not well understood.
 Experiments in a controlled testbed allow shedding more light on this issue.
 TEACUP (TCP Experiment Automation Controlled Using Python) version 1.
\change_inserted 193492759 1517551108
1
\change_deleted 193492759 1517551109
0
\change_unchanged
 is a software tool for running automated TCP experiments in a testbed 
\backslash
cite{
\change_inserted 193492759 1517563617
zander2018_teacup_v1.1_system
\change_unchanged
}.
 This report describes the analysis functions TEACUP provides to extract
 statistics and plot graphs based on data collected during the experiments.
 
\end_layout

\begin_layout Plain Layout


\backslash
end{abstract} 
\end_layout

\begin_layout Plain Layout


\backslash
vspace{0.5
\backslash
baselineskip}
\end_layout

\begin_layout Plain Layout


\backslash
noindent
\backslash
begin{
\change_inserted 193492759 1517792808
IEEE
\change_unchanged
keywords} TCP, experiments, automated control, data analysis 
\end_layout

\begin_layout Plain Layout


\backslash
end{
\change_inserted 193492759 1517792811
IEEE
\change_unchanged
keywords} 
\end_layout

\begin_layout Plain Layout


\backslash
end{adjustwidth*}
\end_layout

\begin_layout Plain Layout


\backslash
vspace{1
\backslash
baselineskip}}
\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout


\backslash
maketitle
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
fancypagestyle{firstpage}{% Page style for first page
\end_layout

\begin_layout Plain Layout

  
\backslash
fancyhf{}% Clear header/footer
\end_layout

\begin_layout Plain Layout

  
\backslash
renewcommand{
\backslash
headrulewidth}{0pt}% Header rule
\end_layout

\begin_layout Plain Layout

  
\backslash
renewcommand{
\backslash
footrulewidth}{0pt}% Footer rule
\end_layout

\begin_layout Plain Layout

  
\backslash
fancyfoot[C]{
\backslash
small{
\change_deleted 193492759 1517561345

\backslash
copyright~2015 -- 2016 CAIA, Swinburne University of Technology
\backslash

\backslash

\change_inserted 193492759 1517561407
Based on a version of 
\change_deleted 193492759 1517561290
Originally published as
\change_unchanged
 
\backslash
url{http://caia.swin.edu.au/reports/150529B/CAIA-TR-150529B.pdf}
\change_inserted 193492759 1517561362
, 
\change_deleted 193492759 1517561363

\backslash

\backslash

\change_deleted 1685850735 1494305414
This version
\change_deleted 193492759 1517561413
Version 1.0 was
\change_inserted 193492759 1517561418
orginally
\change_unchanged
 released June 2016 under Creative Commons BY-SA 4.0 License
\change_inserted 193492759 1517561329
, 
\backslash
copyright~2015 -- 2016 CAIA, Swinburne University of Technology.
 
\change_deleted 193492759 1517561331
 -- s
\change_inserted 193492759 1517561331
S
\change_unchanged
ee terms on page~
\backslash
pageref{sec:Copying}}}
\end_layout

\begin_layout Plain Layout

}
\end_layout

\begin_layout Plain Layout


\backslash
thispagestyle{firstpage}
\end_layout

\begin_layout Plain Layout

  
\backslash
pagestyle{fancy}
\end_layout

\begin_layout Plain Layout

  
\backslash
headheight 13.4pt
\end_layout

\begin_layout Plain Layout

  
\backslash
renewcommand{
\backslash
headrulewidth}{0pt}
\end_layout

\begin_layout Plain Layout

  
\backslash
lfoot{
\backslash
small{TEACUP v1.
\change_inserted 1685850735 1494305147
1
\change_deleted 1685850735 1494305147
0
\change_unchanged
 -- Data Analysis Functions}}
\end_layout

\begin_layout Plain Layout

  
\backslash
cfoot{}
\end_layout

\begin_layout Plain Layout

  
\backslash
rfoot{
\backslash
small{
\change_deleted 1685850735 1494305506
June
\change_deleted 193492759 1517551136
May
\change_inserted 193492759 1517551137
Feb
\change_unchanged
 9, 201
\change_deleted 193492759 1517551140
7
\change_inserted 193492759 1517551140
8
\change_deleted 1685850735 1494305508
6
\change_unchanged
~~page 
\backslash
thepage ~of 
\backslash
pageref{LastPage}}} 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout

%
\backslash
pdfbookmark{
\backslash
contentsname}{toc}
\end_layout

\begin_layout Plain Layout


\backslash
addtocontents{toc}{
\backslash
protect{
\backslash
pdfbookmark[0]{
\backslash
contentsname}{ToC}}}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Newpage pagebreak
\end_inset


\end_layout

\begin_layout Section
Introduction
\end_layout

\begin_layout Standard
Over the last few decades several TCP congestion control algorithms were
 developed in order to optimise TCP's behaviour in certain situations.
 While TCP was traditionally used mainly for file transfers, more recently
 it is also becoming the protocol of choice for streaming applications,
 for example video streaming from YouTube and Netflix is TCP-based 
\begin_inset CommandInset citation
LatexCommand cite
key "Finamore2011,Rao2011"

\end_inset

 and there is an ISO standard for Dynamic Adaptive Streaming over HTTP (DASH)
 
\begin_inset CommandInset citation
LatexCommand cite
key "dash-standard"

\end_inset

.
 However, the impact of different TCP congestion control algorithms on TCP-based
 streaming flows (within a mix of other typical traffic) is not well understood.
 Experiments in a controlled testbed allow shedding more light on this issue.
 
\end_layout

\begin_layout Standard
This report describes the data analysis functionality of TEACUP (TCP Experiment
 Automation Controlled Using Python) version 1.
\change_inserted 193492759 1517562743
1
\change_deleted 193492759 1517562743
0
\change_unchanged
 – a software tool for running automated TCP experiments in a testbed 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

.
\change_inserted 193492759 1517650626

\begin_inset Foot
status open

\begin_layout Plain Layout

\change_inserted 193492759 1517650659
Updating a previous analysis report for TEACUP version 1.0 
\begin_inset CommandInset citation
LatexCommand cite
key "CAIA-TR-150529B"

\end_inset

.
\change_unchanged

\end_layout

\end_inset


\change_unchanged
 The TEACUP project originated at Swinburne University of Technology's Centre
 for Advanced Internet Architectures (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://caia.swin.edu.au/tools/teacup
\end_layout

\end_inset

), and from version 1.0 the source code is freely available on SourceForge
 at 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://sourceforge.net/projects/teacup
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Based on a 
\change_inserted 193492759 1517564137
python 
\change_unchanged
configuration file TEACUP can perform a series of experiments with different
 traffic mixes, different bottlenecks (such as bandwidths, queue mechanisms),
 different emulated network delays and/or loss rates, and different host
 settings (e.g.
 TCP congestion control algorithm) 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

.
 For each experiment TEACUP automatically collects relevant information
 that allows analysing TCP behaviour.
 Here we describe the various tools provided by TEACUP for extracting and
 analysing the data of an experiment or a series of experiments.
 
\end_layout

\begin_layout Standard
This report is organised as follows.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Overview"

\end_inset

 provides an overview of TEACUP's architecture for data extraction and analysis.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Data_extraction"

\end_inset

 describes the data extraction functions of TEACUP.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Data_analysis"

\end_inset

 describes the data analysis and plotting functions of TEACUP.
 Sections 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:customising_plotting"

\end_inset

 and 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Utility"

\end_inset

 describe customisation of plotting and additional analysis-related utility
 functions respectively.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Examples"

\end_inset

 describes use cases in tutorial-style that demonstrate how to use various
 analysis tasks.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Conclusions"

\end_inset

 concludes and outlines future work.
\end_layout

\begin_layout Section
Overview
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Overview"

\end_inset


\end_layout

\begin_layout Standard
This section provides an overview of TEACUP's architecture for data extraction
 and analysis including some information on how to modify or extend it.
 It also provides some information on implementation details that are common
 to all extract and analysis functions.
\end_layout

\begin_layout Subsection

\change_inserted 193492759 1517897049
Experiment analysis 
\change_deleted 193492759 1517896968
A
\change_inserted 193492759 1517896968
a
\change_unchanged
rchitecture
\end_layout

\begin_layout Standard
TEACUP's extract and analysis functions are implemented as Fabric tasks
 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

.
\end_layout

\begin_layout Subsubsection

\change_inserted 193492759 1517897062
Extract and analyse tasks
\end_layout

\begin_layout Standard
The architecture of TEACUP's analysis part is relatively straight-forward.
 At the lowest layer TEACUP uses 
\emph on
extract tasks
\emph default
 to extract statistics from the data collected during experiments and store
 these in interim data files.
 The extract tasks can be invoked by end-users directly to extract data,
 but they are also called by higher-layer 
\emph on
analyse tasks
\emph default
, invoked by the user, that generate graphs based on the extracted data.
 TEACUP's analyse tasks pre-process the data for plotting, but the actual
 graph generation is carried out by R functions.
 Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:TEACUP_analysis_architecture"

\end_inset

 depicts this architecture.
 
\change_deleted 193492759 1517896706
As the figure indicates t
\change_inserted 193492759 1517897057
T
\change_unchanged
here is not a one-to-one relationship between analysis and extract tasks,
 as some analysis tasks may run multiple extract tasks.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename figures/analysis_arch.pdf
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:TEACUP_analysis_architecture"

\end_inset

TEACUP's data extraction and analysis architecture
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Extract tasks generate files with interim data and pass the names of these
 files to an analyse task if called from that analysis task.
 The analysis task will do further processing and eventually pass (a subset)
 of the files together with other parameters to the plot function.
\change_inserted 193492759 1517897071

\end_layout

\begin_layout Subsubsection

\change_inserted 193492759 1517897132
User-supplied plotting/graphing functions
\change_unchanged

\end_layout

\begin_layout Standard

\change_inserted 193492759 1517897267
The data extraction and analysis aspect of TEACUP is quite distinct from
 the tasks that actually run experiments and gather testbed data.
 And the analysis aspect of 
\change_unchanged
TEACUP cleanly separates the Python pre-processing and R plotting code with
 a well-defined interface between the the two parts
\change_inserted 193492759 1517897525
, passing information regarding the data to be plotted using environment
 variables
\change_unchanged
.

\change_deleted 193492759 1517897535
 
\change_inserted 193492759 1517897421

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517897454
As Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:TEACUP_analysis_architecture"

\end_inset

 indicates, information regarding the data to be plotted is passed using
 environment variables, so 
\change_inserted 193492759 1517897555
If end-users want to develop their own data analysis and graphing tools,
 
\change_unchanged
TEACUP's existing 
\change_inserted 193492759 1517897295
R-based 
\change_unchanged
plotting functions can be replaced by alternative
\change_inserted 193492759 1517897295
,
\change_unchanged
 user-supplied plotting functions implemented in any convenient language
 or tool.

\change_inserted 193492759 1517897372
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:customising_plotting"

\end_inset

 describes how to customise the plotting/graphing by (1) manipulating the
 environment variables passed to the plot script and (2) replacing the default
 plot scripts with customised scripts.
\change_unchanged

\end_layout

\begin_layout Subsection
Experiment configuration 
\change_deleted 193492759 1517897155
information
\change_inserted 193492759 1517897156
data
\change_unchanged

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517789084
For experiments carried out with TEACUP prior to version 0.9, the config.py
 file used when extract or analysis tasks are executed must be the file
 used to run the experiments (as far as the testbed configuration is concerned)
 or the config file used to run the experiments must be specified with 
\family typewriter
\size small
--set teacup_config
\family default
\size default
 (see technical report 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

 on how to load user-specified config files).
 
\end_layout

\begin_layout Standard
Since
\change_inserted 193492759 1517789281
 TEACUP
\change_unchanged
 version 0.9 
\change_deleted 193492759 1517789270
TEACUP stores 
\change_unchanged
all config variables for a
\change_inserted 193492759 1517789025
n experiment or group
\change_deleted 193492759 1517789030
 series
\change_unchanged
 of experiments
\change_inserted 193492759 1517789277
 are stored
\change_unchanged
 in a file
\change_inserted 193492759 1517789045
 named
\change_unchanged
 
\family typewriter
\size small
<
\change_deleted 193492759 1517686383
test_id_pfx
\change_inserted 193492759 1517686383
testIDprefix
\change_unchanged
>_varying_params.log.gz
\family default
\size default
 located in the experiment
\change_inserted 193492759 1517788886
-specific
\change_unchanged
 
\change_deleted 193492759 1517788889
series 
\change_unchanged
sub-directory
\change_inserted 193492759 1517789374
.

\change_deleted 193492759 1517789369
 (see technical report 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

)
\change_inserted 193492759 1517789369

\begin_inset Foot
status open

\begin_layout Plain Layout

\change_inserted 193492759 1517789396
By default this will be under 
\family typewriter
\size footnotesize
./<testIDprefix>/
\family default
\size default
 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

.
\change_unchanged

\end_layout

\end_inset


\change_deleted 193492759 1517789376
.

\change_unchanged
 
\change_inserted 193492759 1517789330
This file is subsequently used to provide context for 
\change_deleted 193492759 1517789138
E
\change_inserted 193492759 1517789330
e
\change_unchanged
xtract
\change_inserted 193492759 1517789330
ion
\change_unchanged
 and analysis functions
\change_deleted 193492759 1517789142
 will access this file and the config file used to run the experiments is
 not required anymore when running analysis tasks
\change_unchanged
.
\change_deleted 193492759 1517897384

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517897384
Modifying or replacing analysis functionality
\end_layout

\begin_layout Standard

\change_deleted 193492759 1517897384
The data extraction and analysis aspect of TEACUP is quite distinct from
 the tasks that actually run experiments and gather testbed data.
 Instead of using TEACUP's analysis functions, end-users may want to develop
 their own data analysis and graphing tools.
 However, TEACUP also provides some options to customise the behaviour of
 its analysis functions, so users may find it easier to modify or extend
 the existing functions instead.
 For example, Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:customising_plotting"

\end_inset

 describes how to customise the plotting by (1) manipulating the environment
 variables passed to the plot script and (2) replacing the default plot
 scrips with customised scripts.
\change_unchanged

\end_layout

\begin_layout Subsection
Inter
\change_inserted 193492759 1517908340
mediate
\change_deleted 193492759 1517908341
im
\change_unchanged
 data file names
\end_layout

\begin_layout Standard

\change_inserted 193492759 1517738295
During extraction and post-processing, 
\change_deleted 193492759 1517908345
Interim
\change_inserted 193492759 1517908346
intermediate
\change_unchanged
 data files are named as follows
\change_inserted 193492759 1517897937
:
\change_deleted 193492759 1517897939
.
 
\change_inserted 193492759 1517897939

\end_layout

\begin_layout Itemize
The first part of the file name is the 
\change_deleted 193492759 1517897939
experiment
\change_inserted 193492759 1517738256

\series bold
test
\change_unchanged
 ID
\change_inserted 193492759 1517909943

\series default
 (section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Specifying-experiments-TestIDs"

\end_inset

)
\change_unchanged
, which 
\change_deleted 193492759 1517897939
allows the ability to
\change_deleted 1685850735 1494296111
o
\change_deleted 193492759 1517897939
 
\change_unchanged
link
\change_inserted 193492759 1517897677
s
\change_unchanged
 
\change_deleted 193492759 1517897939
the
\change_inserted 193492759 1517897914
each
\change_unchanged
 
\change_deleted 193492759 1517908351
interim
\change_inserted 193492759 1517908354
intermediate
\change_unchanged
 data file to the 
\change_inserted 193492759 1517897677
specific 
\change_unchanged
experiment 
\change_inserted 193492759 1517897677
from which 
\change_unchanged
it was generated
\change_deleted 193492759 1517897939
 from
\change_unchanged
.
\change_inserted 193492759 1517897948

\end_layout

\begin_layout Itemize

\change_deleted 193492759 1517897988
 Then f
\change_inserted 193492759 1517897988
F
\change_unchanged
or extract and analysis task
\change_inserted 193492759 1517897996
s
\change_unchanged
 that process per-flow data, the next part of the file name is of the form
 
\family typewriter
\size small
<src_ip>_<src_port>_<dst_ip>_<dst_port>
\family default
\size default
, where <src_ip> is the source IP address, <src_port> is the source port,
 <dst_ip> is the destination IP address and <dst_port> is the destination
 port.
\change_inserted 193492759 1517897956

\end_layout

\begin_layout Itemize

\change_deleted 193492759 1517897955
 
\change_unchanged
The last part of the file name is an extension that indicates the type of
 data a file contains
\change_deleted 193492759 1517907329
.
 The extension is
\change_inserted 193492759 1517907329
 (
\change_deleted 193492759 1517907331
 
\change_unchanged
specific to 
\change_deleted 193492759 1517907354
the
\change_inserted 193492759 1517907354
each
\change_unchanged
 extract function
\change_inserted 193492759 1517907334
)
\change_unchanged
.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Data_extraction"

\end_inset

 describes 
\change_deleted 193492759 1517907342
the 
\change_unchanged
extension names in more detail.
\change_inserted 193492759 1517897966

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517897966
 
\change_unchanged
Listing 
\begin_inset CommandInset ref
LatexCommand ref
reference "lis:Example-interim-file"

\end_inset

 shows an example 
\change_deleted 193492759 1517908365
interim
\change_inserted 193492759 1517908367
intermediate
\change_unchanged
 data file name
\change_inserted 193492759 1517909866
 where the test ID is `exp_20150218-135735_aqm_pfifo_responders_4', the
 source was 172.16.10.60:50001, destination was 172.16.11.61:80 with the .rtimes
 extension indicating a file generated by the extract_incast task (section
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_incast"

\end_inset

)
\change_unchanged
.
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily},captionpos=b,float={*t}"
inline false
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502326225

exp_
\change_unchanged
20150218-135735
\change_deleted 193492759 1517907387
_experiment
\change_unchanged
_aqm_pfifo_responders_4_172.16.10.60_50001_172.16.11.61_80.rtimes
\end_layout

\begin_layout Plain Layout

\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "lis:Example-interim-file"

\end_inset

Example interim data file name
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Directory caching
\end_layout

\begin_layout Standard
Most of TEACUP's extract and analyse tasks 
\change_deleted 193492759 1517907522
make 
\change_unchanged
use 
\change_deleted 193492759 1517907524
of 
\change_unchanged
the
\change_inserted 193492759 1517907430
 unix
\change_unchanged
 
\family typewriter
\size footnotesize
find
\family default
\size default
 command 
\change_deleted 193492759 1517907434
line tool 
\change_unchanged
to locate experiment data files or intermediate data files used for plotting.
 The root directory for 
\change_deleted 1685850735 1489723884
find
\change_inserted 1685850735 1489723884

\family typewriter
\size footnotesize
find
\change_unchanged

\family default
\size default
 is the directory in which the 
\change_inserted 193492759 1517907478
fab 
\change_unchanged
task is run (
\change_deleted 193492759 1517907485
or 
\change_unchanged
in other words the fabfile.py directory).
 In case there are many experiment series' stored in sub directories under
 this directory the find process will be slow.
 
\end_layout

\begin_layout Standard
To speed up 
\change_deleted 193492759 1517907547
the 
\change_unchanged
extraction and analysis, since version 0.9 TEACUP uses a directory cache
\change_deleted 193492759 1517907639
, which
\change_inserted 193492759 1517907640
 to
\change_unchanged
 store
\change_deleted 193492759 1517907642
s
\change_unchanged
 a map of test ID prefixes and their associated sub directories.
 If there is a cache entry for the test ID of a particular file that TEACUP
 is trying to locate, then the search will only be carried out under the
 cached sub directory.
 The cache file is named 
\family typewriter
\size small
teacup_dir_cache.txt
\family default
\size default
 
\change_deleted 193492759 1517907681
and is stored 
\change_unchanged
in the directory where fabfile.py is located.
 
\end_layout

\begin_layout Standard
Note that if experiment data files or intermediate data files are moved
 to different locations, the user must manually update existing entries
 in teacup_dir_cache.txt or simply remove the cache file.
 In the latter case TEACUP will rebuild the cache based on the user's future
 extract or analyse commands.
\end_layout

\begin_layout Subsection
Flow caching
\end_layout

\begin_layout Standard
Many of TEACUP's extract and analysis functions work on a per-flow basis.
 They first extract the 5-tuples (source IP address, source port, destination
 IP address, destination port, protocol) of the different flows that occurred
 during experiments.
 Then, they extract the per-flow data.
\end_layout

\begin_layout Standard
To speed up the extraction and analysis, since version 0.9 TEACUP uses a
 flow cache
\change_deleted 193492759 1517907697
, which
\change_inserted 193492759 1517907697
 to
\change_unchanged
 store
\change_deleted 193492759 1517907700
s
\change_unchanged
 a map of file names (including the path relative to the directory in which
 fabfile is located) and their associated flow tuples.
 If a cache entry is present for a file, TEACUP will use the flow tuples
 from the cache as basis for the analysis.
 If there is no cache entry, TEACUP will extract the flow tuples from the
 file (e.g.
 tcpdump file) and create a new cache entry.
 The cache file is 
\family typewriter
\size small
teacup_flow_cache.txt
\family default
\size default
 
\change_deleted 193492759 1517907712
and is stored 
\change_unchanged
in the directory where fabfile.py is located.
\end_layout

\begin_layout Standard
Note that if experiment data files are moved to different locations, the
 user must manually update existing entries in teacup_flow_cache.txt or simply
 remove the cache file.
 In the latter case TEACUP will rebuild the cache based on the user's future
 extract or analyse commands.
\end_layout

\begin_layout Section
Data Extraction
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Data_extraction"

\end_inset


\end_layout

\begin_layout Standard
TEACUP provides a number of 
\change_deleted 193492759 1517907748
basic extract 
\change_unchanged
tasks for extracting 
\change_inserted 193492759 1517907769
intermediate 
\change_unchanged
data to be plotted from the 
\change_inserted 193492759 1517907757
raw 
\change_unchanged
data collected during the experiments.
 Here we describe the extract tasks, their parameters and their output.
 The extracted data is used by the analysis tasks described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Data_analysis"

\end_inset

.
 Note that analysis tasks automatically call relevant extract tasks to 
\change_deleted 193492759 1517907844
extract
\change_inserted 193492759 1517907847
obtain
\change_unchanged
 the 
\change_inserted 193492759 1517907828
intermediate 
\change_unchanged
data needed for plotting
\change_inserted 193492759 1517907855
 – there is no need to explicitly run an extract task prior to a related
 analyse task
\change_unchanged
.
 However, the extract tasks can be executed directly by an end-user who
 wishes to only extract 
\change_inserted 193492759 1517907817
intermediate 
\change_unchanged
data but not plot graph(s).
\end_layout

\begin_layout Standard
First, we provide an overview of all extract tasks and describe common parameter
s for all extract tasks (which can also be passed to analysis tasks).
 Then we describe the different extract tasks and their task-specific parameters
 (if any).
\end_layout

\begin_layout Subsection
Extract tasks overview
\end_layout

\begin_layout Standard
Currently extract tasks exist for:
\end_layout

\begin_layout Enumerate
Extracting the packet size data for throughput plots from tcpdump data (extract_
pktsizes);
\end_layout

\begin_layout Enumerate
Extracting Round Trip Time (RTT) using SPP 
\begin_inset CommandInset citation
LatexCommand cite
key "zander13minimally,sppweb"

\end_inset

 based on tcpdump data (extract_rtt);
\end_layout

\begin_layout Enumerate
Extracting the TCP congestion window size (CWND) from SIFTR and Web10G data
 (extract_cwnd);
\end_layout

\begin_layout Enumerate
Extracting TCP's RTT estimate from SIFTR and Web10G data (extract_tcp_rtt).
 Th
\change_inserted 1685850735 1489724113
is
\change_deleted 1685850735 1489724113
e
\change_unchanged
 task extracts both, the smoothed estimate and an unsmoothed estimate (for
 SIFTR the unsmoothed estimate is the improved ERTT 
\begin_inset CommandInset citation
LatexCommand cite
key "CAIA-TR-100219A"

\end_inset

 estimate);
\change_inserted 1685850735 1488774705

\end_layout

\begin_layout Enumerate
Extract arbitrary TCP statistics from SIFTR and Web10G data (extract_tcp_stat);
\change_inserted 1685850735 1488778242

\end_layout

\begin_layout Enumerate

\change_deleted 193492759 1517738436
Ability to e
\change_inserted 193492759 1517738436
E
\change_inserted 1685850735 1488778268
xtract RTT 
\change_inserted 193492759 1517738451
(
\change_inserted 1685850735 1488778268
using SPP and
\change_inserted 193492759 1517738458
/or
\change_inserted 1685850735 1488778268
 estimated 
\change_inserted 193492759 1517738461
RTT 
\change_inserted 1685850735 1488778268
from SIFTR and Web10G data
\change_inserted 193492759 1517738465
)
\change_inserted 1685850735 1488778268
, as well as 
\change_deleted 193492759 1517738475
extract the 
\change_inserted 1685850735 1488778268
CWND and packet size data all at once (extract_all);
\change_unchanged

\end_layout

\begin_layout Enumerate
Extracting cumulative bytes acknowledged or dupACKs over time from tcpdump
 data (extracting_ackseq);
\end_layout

\begin_layout Enumerate
Extracting the goodput for DASH-like streaming clients (extract_dash_goodput);
\end_layout

\begin_layout Enumerate
Extracting the response times for incast experiments from httperf log files
 (extract_incast);
\end_layout

\begin_layout Enumerate
Extracting the response times for incast experiments from tcpdump files
 (extract_incast_restimes);
\end_layout

\begin_layout Enumerate

\change_deleted 1685850735 1488773368
Extrating
\change_inserted 1685850735 1488773368
Extracting
\change_unchanged
 the inter-query times for incast experiments from tcpdump files (extract_incast
_iqtimes)
\change_inserted 1685850735 1488774891
;
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1489464298
Extracting the packet loss rates from tcpdump files (extract_pktloss);
\change_deleted 1685850735 1488774031
.
\change_inserted 1685850735 1489464213

\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1489621595
Extracting the one way delay (OWD) from tcpdump files (extract_owd).
\end_layout

\begin_layout Subsection
Common 
\change_inserted 193492759 1517908466
task 
\change_unchanged
parameters
\end_layout

\begin_layout Standard
This section describes the common parameter
\change_inserted 193492759 1517908454
s
\change_unchanged
.
 Most of these are supported by all extract tasks, but some of them are
 only supported by a subset of tasks.
\end_layout

\begin_layout Subsubsection
Specifying experiments to process
\change_inserted 193492759 1517909914
 (test IDs)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Specifying-experiments-TestIDs"

\end_inset


\change_unchanged

\end_layout

\begin_layout Standard
The 
\family typewriter
\size small
test_id
\family default
\size default
 parameter specifies the
\change_inserted 193492759 1517686437
 full
\change_unchanged
 
\change_inserted 193492759 1517686451

\series bold
test 
\change_unchanged
ID
\series default
 of the experiment from which to extract data.
 
\change_inserted 193492759 1517687717
An experiment in this context means results logged under a particular 
\series bold
test ID prefix
\series default
 for a run using a specific combination of optional parameters encoded in
 the test ID.
 From section 3 of 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

:
\end_layout

\begin_layout Standard

\change_inserted 193492759 1517688098

\family typewriter
\size small
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 193492759 1517687571

\family typewriter
\size footnotesize
<testID> = <testIDprefix>_[<parName>_<parVal>_]*
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 193492759 1517907959

\family typewriter
\size footnotesize
<testIDprefix>
\family default
\size default
 groups together related experiments generated by iterating over range of
 values for a subset of testbed parameters.
 Unless overriden by the user when an experiment is launched, 
\family typewriter
\size footnotesize
<testIDprefix>
\family default
\size default
 defaults to a string of the form `exp_YYYYMMDD-HHMMSS' (based on the date
 when the overall experiment was launched).
\change_unchanged

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517687625
The
\change_inserted 193492759 1517789606
A TEACUP fab task's
\change_unchanged
 
\family typewriter
\size small
test_id
\family default
\size default
 parameter 
\change_inserted 193492759 1517687732
typically 
\change_unchanged
accepts multiple test IDs separated by semicolons.
\begin_inset Foot
status open

\begin_layout Plain Layout
Since TEACUP v0.5.
 No trailing semicolon for only one test ID.
\end_layout

\end_inset

 If 
\change_inserted 193492759 1517687641
such 
\change_unchanged
a 
\change_inserted 193492759 1517687528
semicolon-separated 
\change_unchanged
list
\change_inserted 193492759 1517687532
 of testIDs
\change_unchanged
 is specified, data will be extracted for each test ID.
 Extracted data is stored in files that start with the experiment
\change_inserted 193492759 1517687496
's
\change_unchanged
 
\change_inserted 193492759 1517687747
test 
\change_unchanged
ID and have a task-specific extension.
\end_layout

\begin_layout Subsubsection
Replot only
\end_layout

\begin_layout Standard
All extract tasks have a parameter 
\family typewriter
\size footnotesize
replot_only
\family default
\size default
.
 While the parameter can be used when executing an extract task, it is mainly
 used for analysis tasks and passed on to the underlying extract tasks.
 This parameter allows t
\change_inserted 1685850735 1494294293
he
\change_deleted 1685850735 1494294293
o
\change_unchanged
 replot
\change_inserted 1685850735 1494294299
ting of
\change_unchanged
 the graphs without extracting the data again (e.g.
 from tcpdump, SIFTR or Web10G files).
 If 
\family typewriter
\size small
replot_only
\family default
\size default
 is set to `1' data is still extracted for experiments where data has not
 been extracted before, but for experiments with already extracted data
 the graph(s) are created based on the existing extracted data.
\end_layout

\begin_layout Subsubsection
Data output directory
\end_layout

\begin_layout Standard
By default all extracted data files are 
\change_deleted 193492759 1517790573
generated
\change_inserted 193492759 1517790577
created
\change_unchanged
 in the sub directory where the experiment
\change_inserted 193492759 1517790593
's raw
\change_unchanged
 data is located (
\change_deleted 193492759 1517790457
the
\change_inserted 193492759 1517790457
a
\change_unchanged
 sub directory 
\change_inserted 193492759 1517790460
whose 
\change_unchanged
name 
\change_deleted 193492759 1517790463
being
\change_inserted 193492759 1517790463
is
\change_unchanged
 the test ID prefix) inside the directory where fab is executed.
 To put the
\change_inserted 193492759 1517911507
se
\change_unchanged
 output files into a specific directory, the 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 parameter can be used.
 If 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 is an absolute path, the output files will be put in the specified directory.
 However, if 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 is a relative path, it is treated as relative 
\emph on
to the location of the log files
\emph default
 when determining the directory for the output files.
\end_layout

\begin_layout Subsubsection
Data series selection
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:Data-series-selection"

\end_inset


\end_layout

\begin_layout Standard
All extract tasks, except extract_dash_goodput, 
\change_deleted 193492759 1517908318
provide
\change_inserted 193492759 1517908318
offer
\change_unchanged
 the 
\family typewriter
\size small
source_filter
\family default
\size default
 parameter that provides each extract and analysis function with a rudimentary
 mechanism to identify the flows to be plotted.
 Note,
\family typewriter
\size small
 source_filter
\family default
\size default
 only limits what is plotted.
 Intermediate data files are always extracted for all flows in an experiment.
 However, the list of files passed by the extract task to the analysis task
 will only contain files for the selected flows.
\end_layout

\begin_layout Standard
Desired flows may be specified using combinations of patterns matching source
 and/or destination IP address and port numbers.
 
\end_layout

\begin_layout Standard
The filter string format is:
\begin_inset Separator latexpar
\end_inset


\end_layout

\begin_layout Standard
\align left

\family typewriter
\size small
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
(S|D)_<ip>_<port>[;(S|D)_<ip>_(<port>|'*')]* 
\end_layout

\end_inset


\end_layout

\begin_layout Standard
For example, the following command only plots data for flows 
\emph on
from
\emph default
 host 172.16.10.2 port 80:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:source_filter= "S_172.16.10.2_80"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Note, that the notion of `flow' here is unidirectional.
 The flow consisting of packets heading
\emph on
 to
\emph default
 host 172.16.10.2 port 80 would be selected by specifying:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:source_filter= "D_172.16.10.2_80"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The specified filter string also determines the order of the flows in the
 graph(s).
 Flows are plotted in the order of the filters specified.
 For example, if there are two flows, one from host 172.16.10.2 port 80 and
 another from host 172.16.10.2 port 81 by default the port 80 flow would be
 the first data series and the port 81 flow would be the second data series.
 One can reverse the two flows in the graphs by specifying:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:source_filter= "S_172.16.10.2_81;S_172.16.10.2_80"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Instead of an actual port number on can specify the wild-card character
 (`*').
 This allows t
\change_inserted 1685850735 1494294317
he
\change_deleted 1685850735 1494294316
o
\change_unchanged
 filter
\change_inserted 1685850735 1494294319
ing
\change_unchanged
 o
\change_inserted 1685850735 1494294327
f
\change_deleted 1685850735 1494294327
n
\change_unchanged
 a specific source or destination with any port number.
 For example, we can plot data for all flows 
\emph on
from
\emph default
 host 172.16.10.2 regardless of their port numbers:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:source_filter= "S_172.16.10.2_*"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Note that 
\family typewriter
\size small
source_filter
\family default
\size default
 identifies the flows selected
\change_inserted 193492759 1517910106
 as the 'source' of information
\change_unchanged
, not the flows 
\change_inserted 193492759 1517910113
to be 
\change_unchanged
filtered out.
\end_layout

\begin_layout Subsubsection
Filtering SIFTR log lines
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:filtering_siftr"

\end_inset


\end_layout

\begin_layout Standard
The extract_all, extract_cwnd, extract_tcp_rtt and extract_tcp_stat tasks
 have a parameter 
\family typewriter
\size small
io_filter
\family default
\size default
 that allows specifying whether TCP statistics are extracted based on incoming
 (set value to `i') outgoing (set value to `o') or incoming and outgoing
 packets (set value to `io') from SIFTR log files.
 The default value is `o'.
 Currently, the parameter is only effective with SIFTR log files, it does
 nothing with web10g log files.
 
\end_layout

\begin_layout Standard
Note: this parameter only takes effect if 
\family typewriter
\size small
replot_only
\family default
\size default
 is set to `0' (i.e.
 you must re-extract intermediate data if you want to change io_filter)
\end_layout

\begin_layout Subsubsection
Burst-separation (incast 
\change_inserted 193492759 1517910166
and similar 
\change_unchanged
experiments)
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:burst_separation"

\end_inset


\end_layout

\begin_layout Standard

\change_deleted 193492759 1517910270
The
\change_inserted 193492759 1517910273
A number of
\change_unchanged
 tasks 
\change_deleted 193492759 1517910278
extract_rtt, extract_ackseq and extract_incast 
\change_unchanged
can extract data on a per-burst basis for 
\change_deleted 193492759 1517910173
incast 
\change_unchanged
experiments
\change_deleted 193492759 1517910176
,
\change_unchanged
 where we have bursts of TCP requests sent by a querier to 
\change_inserted 193492759 1517910182
one or more
\change_deleted 193492759 1517910185
multiple
\change_unchanged
 responders interspersed by idle times.
 The parameter 
\family typewriter
\size small
burst_sep
\family default
\size default
 
\change_deleted 193492759 1517912102
allows the
\change_deleted 1685850735 1494294350
o
\change_deleted 193492759 1517912102
 specification of
\change_deleted 1685850735 1494294353
y
\change_inserted 193492759 1517912103
specifies
\change_unchanged
 the
\change_inserted 193492759 1517912154
 minimum
\change_unchanged
 time between 
\change_inserted 193492759 1517910214
the end of one burst and the start of another
\change_deleted 193492759 1517910217
bursts
\change_unchanged
.
 Any idle time longer than 
\family typewriter
\size small
burst_sep
\family default
\size default
 signals the start of a new burst.
 If 
\family typewriter
\size small
burst_sep
\family default
\size default
 is set to 0, data will not be separated according to bursts.
 
\end_layout

\begin_layout Standard
The parameters 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 can be used to select the bursts to be plotted (
\change_inserted 193492759 1517910237
with a 
\change_unchanged
start index of 1).
 The
\change_inserted 193492759 1517910382
se parameters are 
\change_deleted 193492759 1517910387
y are not useful when running an extract task directly.
 They are only useful when 
\change_unchanged
passed to an analyse task, which passes them further to an extract task.
\end_layout

\begin_layout Subsection
Clock offset analysis and correction
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:clock-offset-analysis"

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 193492759 1517908506
Since version 0.7, 
\change_unchanged
TEACUP provides an additional mechanism to evaluate the quality of the time
 synchronisation between hosts and (optionally) correct for clock offsets
 in the post-analysis.
\change_deleted 193492759 1517908509

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
 Since TEACUP version 0.7.
\end_layout

\end_inset


\change_unchanged
 
\change_deleted 193492759 1517908540
This mechanism requires that b
\change_inserted 193492759 1517908540
B
\change_unchanged
roadcast
\change_inserted 193492759 1517908543
 or 
\change_deleted 193492759 1517908543
/
\change_unchanged
multicast pings 
\change_inserted 193492759 1517908553
must have been
\change_deleted 193492759 1517908555
were
\change_unchanged
 enabled for an experiment
\change_inserted 193492759 1517908176
,
\change_unchanged
 
\change_deleted 193492759 1517908163
(
\change_unchanged
with TPCONF_bc_ping_enable=`1'
\change_deleted 193492759 1517908169
) as described in Section IV-I in technical report
\change_unchanged
 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset


\change_inserted 193492759 1517908195
.
\change_deleted 193492759 1517908190
,
\change_unchanged
 
\end_layout

\begin_layout Subsubsection
Computing clock offsets
\end_layout

\begin_layout Standard
The get_clock_offsets task
\change_deleted 193492759 1517908710
s
\change_unchanged
 
\change_deleted 193492759 1517908719
allows 
\change_unchanged
comput
\change_deleted 193492759 1517908722
ing
\change_inserted 193492759 1517908722
es
\change_unchanged
 the clock offsets between all hosts using the clock of one host as reference
 (by default the router's clock).
 
\change_inserted 193492759 1517909361
By default t
\change_deleted 193492759 1517909363
T
\change_unchanged
h
\change_inserted 1685850735 1489724290
is
\change_deleted 1685850735 1489724290
e
\change_unchanged
 task will generate a 
\change_inserted 193492759 1517909379

\family typewriter
\size small
<testID>_clock_offsets.txt
\family default
\size default
 
\change_unchanged
file for each experiment in experiments_completed.txt
\change_deleted 193492759 1517909402
 by default
\change_unchanged
, for a specific experiment if the 
\family typewriter
\size small
test_id
\family default
\size default
 parameter is specified, or for a number of experiments listed in a file
 specified with the 
\family typewriter
\size small
exp_list
\family default
\size default
 parameter.
 
\end_layout

\begin_layout Standard
The 
\family typewriter
\size small
baseline_host
\family default
\size default
 parameter can be used to specify the 
\change_inserted 193492759 1517908805
host whose timestamps will be considered the 
\change_unchanged
reference clock
\change_inserted 193492759 1517908810
,
\change_unchanged
 and the 
\family typewriter
\size small
out_dir
\family default
\size default
 parameter specifies the directory in which the clock offset file is generated.
 Assuming <
\change_deleted 193492759 1517686648
test_id
\change_inserted 193492759 1517686648
testID
\change_unchanged
> is the experiment ID, the name of the clock offsets file is <
\change_deleted 193492759 1517686649
test_id
\change_inserted 193492759 1517686649
testID
\change_unchanged
>_clock_offsets.txt.
\end_layout

\begin_layout Standard
The following is an example of using the get_clock_offsets task where we
 specify a specific output directory and instruct TEACUP to use the clock
 of host `testrouter' as reference:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab get_clock_offsets:out_dir=../clock_data, baseline_host=testrouter
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Correcting timestamps during data extraction or analysis
\end_layout

\begin_layout Standard
The 
\family typewriter
\size small
ts_correct
\family default
\size default
 parameter instructs extract tasks to use previously-computed clock offset
 data to correct timestamps for plotting (e.g.
 timestamps from tcpdump or web10g files).
 As explained earlier, the correction can only be done if an experiment
 was run with broadcast/multicast pings (see Section IV-I in technical report
 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

).
 
\end_layout

\begin_layout Standard
No timestamp correction occurs if 
\family typewriter
\size small
ts_correct=0
\family default
\size default
 or is undefined.
 If 
\family typewriter
\size small
ts_correct=1
\family default
\size default
, the extract functions will generate uncorrected data files as well as
 additional data files with all timestamps corrected according to the clock
 offsets calculated by the get_clock_offsets task (the additional files
 have an appended .tscorr extension), and analyse functions will plot the
 data with timestamps corrected (based on the .tscorr files).
\end_layout

\begin_layout Standard
Note that if 
\change_deleted 193492759 1517909318
ts_correct is set to 1
\change_inserted 193492759 1517909318

\family typewriter
\size small
ts_correct=1
\change_unchanged

\family default
\size default
 and no clock offsets file is present, TEACUP will automatically try to
 create the 
\change_inserted 193492759 1517909463

\family typewriter
\size small
<testID>_clock_offsets.txt
\family default
\size default
 
\change_unchanged
file
\change_inserted 193492759 1517909489
(s)
\change_deleted 193492759 1517909469

\begin_inset Foot
status collapsed

\begin_layout Plain Layout
<
\change_deleted 193492759 1517686656
test_id
\change_inserted 193492759 1517686656
testID
\change_unchanged
>_clock_offsets.txt file
\end_layout

\end_inset


\change_unchanged
.
 Also note that enabling 
\family typewriter
\size small
ts_correct
\family default
\size default
 will only modify timestamps in the additional 
\change_deleted 193492759 1517909528
interim
\change_inserted 193492759 1517909530
intermediate
\change_unchanged
 data files used for plotting.
 Original timestamps in the actual log files (e.g.
 timestamps in tcpdump or web10g files) are 
\emph on
not
\emph default
 modified.
\end_layout

\begin_layout Standard

\change_inserted 193492759 1517909664
Extract and analyse tasks 
\change_deleted 193492759 1517909665
P
\change_inserted 193492759 1517909665
p
\change_unchanged
rior to TEACUP version 0.9
\change_inserted 193492759 1517909701
 used
\change_unchanged
 
\family typewriter
\size small
ts_correct=0
\family default
\size default
 
\change_deleted 193492759 1517909676
w
\change_unchanged
as the default
\change_inserted 193492759 1517909679
.
 
\change_deleted 193492759 1517909681
, but s
\change_inserted 193492759 1517909681
S
\change_unchanged
ince version 0.9 the default is 
\family typewriter
\size small
ts_correct=1
\family default
\size default
.
 
\change_inserted 193492759 1517909553
To analyse 
\change_deleted 193492759 1517909554
If 
\change_unchanged
an experiment 
\change_inserted 193492759 1517909558
that 
\change_unchanged
was run without broadcast/multicast pings,
\change_inserted 193492759 1517909568
 you must manually specify
\change_unchanged
 
\family typewriter
\size small
ts_correct=0
\family default
\size default
 
\change_deleted 193492759 1517909574
must be specified 
\change_unchanged
for extract or analysis tasks, 
\change_deleted 193492759 1517909579
or 
\change_unchanged
otherwise these tasks will fail.
 
\end_layout

\begin_layout Subsection
extract_pktsizes – Extract packet sizes for throughput computation
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_pktsizes"

\end_inset


\end_layout

\begin_layout Standard
This task extracts packet size information from tcpdump files.
 The packet size data is used by the analysis_throughput task to compute
 and plot the throughput.
 Extracted data files are created for each traffic flow and have a .psiz
 extension.
 They contain the following space-separated columns with one line per packet:
 timestamp, packet size in bytes (from tcpdump file).
 
\end_layout

\begin_layout Standard
Besides the common parameters th
\change_inserted 1685850735 1489724312
is
\change_deleted 1685850735 1489724312
e
\change_unchanged
 task has the parameters 
\family typewriter
\size small
link_len 
\family default
\size default
and 
\family typewriter
\size small
total_per_experiment
\family default
\size default
.
 
\end_layout

\begin_layout Subsubsection
IP layer vs link layer packet size
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
link_len 
\family default
\size default
allows t
\change_inserted 1685850735 1494294366
he
\change_deleted 1685850735 1494294366
o
\change_unchanged
 specif
\change_inserted 1685850735 1494294369
ication of
\change_deleted 1685850735 1494294368
y
\change_unchanged
 whether the packet sizes extracted are the IP sizes (`0') or the sizes
 including the link layer header (`1').
 
\end_layout

\begin_layout Subsubsection
Total over all flows
\end_layout

\begin_layout Standard
By default data is extracted per flow, but if 
\family typewriter
\size small
total_per_experiment
\family default
\size default
 is set to `1' in addition a file with all packet sizes will be created.
 Note that if 
\family typewriter
\size small
total_per_experiment
\family default
\size default
 is set to `1', a source_filter should be specified to prevent aggregating
 both directions of traffic.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use th
\change_inserted 1685850735 1489724326
is
\change_deleted 1685850735 1489724325
e
\change_unchanged
 task
\change_inserted 1685850735 1502327754
 to extract packet size information including the link layer header from
 a tcpdump file for a certain 
\change_deleted 193492759 1517686667
test_id
\change_inserted 193492759 1517686667
testID
\change_inserted 1685850735 1502327754
, to the current working directory under the results folder
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_pktsizes:test_id=
\change_inserted 1685850735 1494296661
 
\change_deleted 1685850735 1489538677
 
\change_inserted 1685850735 1502326314
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502326523
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502326569
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489541998
.
\change_unchanged
/results,
\change_deleted 1685850735 1489538680
 
\change_unchanged
link_len=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_rtt – RTT estimates (based on SPP)
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_rtt"

\end_inset


\end_layout

\begin_layout Standard
This task computes RTTs for bidirectional flows using SPP 
\begin_inset CommandInset citation
LatexCommand cite
key "sppweb"

\end_inset

.
 Extracted data files are created for each bidirectional traffic flow with
 .rtts extension.
 They contain 
\change_inserted 193492759 1517910516
pairs of 
\family typewriter
\size small
<timestamp> <RTT>
\family default
\size default
 as two 
\change_deleted 193492759 1517910519
the following 
\change_unchanged
space-separated columns
\change_inserted 193492759 1517910534
,
\change_unchanged
 with one line per timestamp
\change_deleted 193492759 1517910530
: timestamp of RTT and RTT estimated by SPP
\change_unchanged
.
\end_layout

\begin_layout Standard
Besides the common parameters th
\change_inserted 1685850735 1489724334
is
\change_deleted 1685850735 1489724334
e
\change_unchanged
 task has the parameter 
\family typewriter
\size small
udp_map
\family default
\size default
.
 
\change_inserted 193492759 1517910929
SPP requires two flows, one in each direction, to estimate the RTT between
 two points in the network.
 For TCP connections TEACUP assumes the Data flow in one direction can be
 paired with the ACK flow in the opposite direction for SPP's analysis.
 However, 
\change_deleted 193492759 1517910936
T
\change_inserted 193492759 1517910937
t
\change_unchanged
h
\change_deleted 193492759 1517910947
is
\change_inserted 193492759 1517910949
e 
\family typewriter
\size small
udp_map
\change_unchanged

\family default
\size default
 parameter allows 
\change_inserted 193492759 1517910968
us to specify 
\change_deleted 193492759 1517910971
the
\change_deleted 1685850735 1494294383
o
\change_deleted 193492759 1517910971
 mapping of
\change_unchanged
 
\change_inserted 193492759 1517910956
two unrelated 
\change_unchanged
unidirectional UDP flows in opposite direction
\change_inserted 193492759 1517910980
s as the input data to SPP.
 
\change_deleted 193492759 1517910985
 into bidirectional UDP flows, as SPP needs bidirectional flows to estimate
 the RTT.
\change_inserted 193492759 1517910985

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517910985
 
\change_unchanged
The format for 
\change_deleted 193492759 1517911005
the parameter
\change_inserted 193492759 1517911005

\family typewriter
\size small
udp_map
\change_unchanged

\family default
\size default
 is a semicolon-separated list of source IP source port pairs.
 Each pair must be specified as 
\family typewriter
\size footnotesize
<src_ip1>
\change_inserted 1685850735 1494302111

\backslash

\change_unchanged
,<src_port1>:<src_ip2>
\change_inserted 1685850735 1494302114

\backslash

\change_unchanged
,<src_port2>
\family default
\size default
, where <src_ip1>
\change_inserted 1685850735 1494302120

\backslash

\change_unchanged
,<src_port1> is the source IP addresses and source port pair of one 
\change_inserted 193492759 1517911055
unidirectional 
\change_unchanged
UDP flow and <src_ip2>
\change_inserted 1685850735 1494302126

\backslash

\change_unchanged
,<src_port2> is the source IP addresses and source port pair of another
 
\change_inserted 193492759 1517911060
unidirectional 
\change_unchanged
UDP flow 
\change_deleted 193492759 1517911063
(
\change_unchanged
in opposite direction
\change_deleted 193492759 1517911066
)
\change_unchanged
.

\change_inserted 193492759 1517911167
 Note: The 
\begin_inset Quotes eld
\end_inset


\backslash

\begin_inset Quotes erd
\end_inset

 is used when required to escape the 
\begin_inset Quotes eld
\end_inset

,
\begin_inset Quotes erd
\end_inset

 characters while specifying 
\family typewriter
\size small
udp_map
\family default
\size default
 on the command line.

\change_unchanged
 
\change_inserted 193492759 1517911117

\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489724341
is
\change_deleted 1685850735 1489724340
e
\change_unchanged
 task also has the 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 parameters which make it possible to extract the RTT estimates on a burst-by-bu
rst bas
\change_inserted 193492759 1517911190
i
\change_deleted 193492759 1517911190
e
\change_unchanged
s for 
\change_deleted 193492759 1517911005
incast 
\change_inserted 193492759 1517911201
relevant 
\change_unchanged
experiments.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows a
\change_inserted 1685850735 1502325409
 simple
\change_deleted 1685850735 1502325408
n
\change_unchanged
 example of how to use th
\change_inserted 1685850735 1489724353
is
\change_deleted 1685850735 1489724352
e
\change_unchanged
 task
\change_inserted 1685850735 1502327847
 to extract RTT based on SPP for a certain 
\change_deleted 193492759 1517686686
test_id
\change_inserted 193492759 1517686686
testID
\change_inserted 1685850735 1502327847
, to the current working directory under the results folder
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_rtt:test_id=
\change_inserted 1685850735 1502326633
 exp_
\change_deleted 1685850735 1489538694
 
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502326640
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502326646
 
\change_deleted 1685850735 1489538696
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542013
.
\change_unchanged
/results
\change_deleted 1685850735 1489538698
/
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following command shows 
\change_inserted 1685850735 1502328033
the same example as before but now illustrates 
\change_unchanged
how to combine two unidirectional UDP flows, one originating from 192.168.0.10
 port 5000 and the other originating from 192.168.0.11 port 5001:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\family typewriter
\size footnotesize
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_rtt:test_id=
\change_inserted 1685850735 1494296778
 
\change_deleted 1685850735 1489538708
 
\change_inserted 1685850735 1502326659
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502326666
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502326670
 
\change_deleted 1685850735 1489538710
 
\change_unchanged
udp_map=
\change_inserted 1685850735 1494296781
 
\change_deleted 1685850735 1489538713
 
\change_unchanged

\begin_inset Quotes erd
\end_inset

192.168.0.10
\change_inserted 1685850735 1494296792

\backslash

\change_unchanged
,5000:
\change_inserted 1685850735 1502326693
 
\change_unchanged
192.168.0.11
\change_inserted 1685850735 1494296795

\backslash

\change_unchanged
,5001
\begin_inset Quotes erd
\end_inset


\change_inserted 1685850735 1502325590
,out_dir=../results
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_cwnd – TCP CWND
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_cwnd"

\end_inset


\end_layout

\begin_layout Standard
This task extracts the CWND data from TCP log files.
 Extracted data files are created for each traffic flow and have a .cwnd
 extension.
 They contain the following comma-separated columns with one line per timestamp:
 timestamp and CWND value (from SIFTR or web10g log file).
 Besides the common parameters th
\change_inserted 1685850735 1489724491
is
\change_deleted 1685850735 1489724491
e
\change_unchanged
 task has the parameter 
\family typewriter
\size small
io_filter
\family default
\size default
 that can be used in case of SIFTR logs to use TCP statistics only for incoming,
 outgoing or incoming and outgoing packets (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:filtering_siftr_analysis"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use th
\change_inserted 1685850735 1489724496
is
\change_deleted 1685850735 1489724495
e
\change_unchanged
 task
\change_inserted 1685850735 1502327876
 to extract CWND data from TCP logs for a certain 
\change_deleted 193492759 1517686693
test_id
\change_inserted 193492759 1517686693
testID
\change_inserted 1685850735 1502327876
, to the current working directory under the results folder.
 Additionally an 
\family typewriter
\size small
io_filter
\family default
\size default
 parameter value is specified to show only outbound packets from the SIFTR
 logs
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_cwnd:test_id=
\change_inserted 1685850735 1494296868
 
\change_deleted 1685850735 1489538718
 
\change_inserted 1685850735 1502326750
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502326753
_run_0
\change_unchanged
,
\change_deleted 1685850735 1489538720
 
\change_inserted 1685850735 1502326757
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542027
.
\change_unchanged
/results
\change_inserted 1685850735 1502326948
,io_filter=o
\change_deleted 1685850735 1489538721
/
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_tcp_rtt – RTT estimates from TCP
\end_layout

\begin_layout Standard
This task extracts TCP's RTT estimates from the TCP log files (SIFTR or
 web10g).
 Extracted data files are created for each traffic flow and have a .tcp_rtt
 extension.
 They contain the following comma-separated columns with one line per timestamp:
 timestamp, smoothed RTT estimate and sample/unsmoothed RTT estimate.
 Besides the common parameters th
\change_inserted 1685850735 1489724500
is
\change_deleted 1685850735 1489724500
e
\change_unchanged
 task has the parameter 
\family typewriter
\size small
io_filter
\family default
\size default
 (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:filtering_siftr_analysis"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489724510
the task
\change_inserted 1685850735 1502328131
this task to extract RTT based on the TCP logs for a certain 
\change_deleted 193492759 1517686701
test_id
\change_inserted 193492759 1517686701
testID
\change_inserted 1685850735 1502328131
, to the current working directory under the results folder.
 Additionally an 
\family typewriter
\size small
io_filter
\family default
\size default
 parameter value is specified to show only outbound packets from the SIFTR
 logs
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_
\change_inserted 1685850735 1502326984
tcp_rtt
\change_deleted 1685850735 1502326982
cwnd
\change_unchanged
:test_id=
\change_inserted 1685850735 1494296881
 
\change_deleted 1685850735 1489538728
 
\change_inserted 1685850735 1502326967
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502326975
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502326976
 
\change_deleted 1685850735 1489538730
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542053
.
\change_unchanged
/results
\change_deleted 1685850735 1489538732
/
\change_unchanged
,io_filter=o
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_tcp_stat – Extract any TCP statistic
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_tcp_stat"

\end_inset


\end_layout

\begin_layout Standard
This task extracts a user-defined statistic from the TCP log files.
 Extracted data files are created for each traffic flow and have a .tcpstat<num>
 extension where <num> is the index of the statistic (the column number
 in the SIFTR or web10g log file).
 They contain the following comma-separated columns with one line per timestamp:
 timestamp, TCP statistic selected (from SIFTR or web10g log file).
 
\end_layout

\begin_layout Standard
Besides the common parameters 
\change_deleted 1685850735 1489724512
the task
\change_inserted 1685850735 1489724512
this task
\change_unchanged
 has the parameter 
\family typewriter
\size small
io_filter
\family default
\size default
 (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:filtering_siftr_analysis"

\end_inset

), and the parameters 
\family typewriter
\size small
siftr_index 
\family default
\size default
and 
\family typewriter
\size small
web10g_index
\family default
\size default
.
 
\end_layout

\begin_layout Subsubsection
Statistic to extract
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
siftr_index 
\family default
\size default
is used to specify the column of the statistic in SIFTR log files and the
 parameter 
\family typewriter
\size small
web10g_index 
\family default
\size default
is used to specify the column of the statistic in web10g log files.
 The start index for both parameters is 1, which selects the statistic in
 the first column.
 If the log files are a mix of SIFTR and web10g both parameters must be
 specified.
 Otherwise it is sufficient to specify just one of the parameters.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489724514
the task
\change_inserted 1685850735 1502329070
this task to extract TCP statistics from TCP logs for a certain 
\change_deleted 193492759 1517686707
test_id
\change_inserted 193492759 1517686707
testID
\change_inserted 1685850735 1502329070
, to the current working directory under the results folder.
 Additionally an 
\family typewriter
\size small
io_filter
\family default
\size default
 parameter value is specified to show only outbound packets from the SIFTR
 logs.
 The 
\family typewriter
\size small
siftr_index
\family default
\size default
 and 
\family typewriter
\size small
web10g_index
\family default
\size default
 parameters are given values to specify the statistical column being looked
 at in their respective logs
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_tcp_stat:test_id=
\change_inserted 1685850735 1494296913
 
\change_deleted 1685850735 1489538746
 
\change_inserted 1685850735 1502327537
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502327541
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502327543
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542057
.
\change_unchanged
/results,
\change_inserted 1685850735 1502328874
io_filter=o,
\change_deleted 1685850735 1489538748
 
\change_unchanged
siftr_index=22,
\change_inserted 1685850735 1502328904
 
\change_unchanged
web10g_index=120
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_all – Combination of basic extract methods
\end_layout

\begin_layout Standard
This task executes the following tasks: extract_rtt, extract_cwnd, extract_tcp_r
tt and extract_pktsizes.
 The task parameters are a superset of the parameters of the individual
 tasks.
\change_inserted 1685850735 1502329103

\end_layout

\begin_layout Subsubsection

\change_inserted 1685850735 1502329104
Examples
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502329967
The following shows an example of how to use this task to extract the SPP
 RTT and regular RTT, CWND and packets sizes for a certain 
\change_deleted 193492759 1517686713
test_id
\change_inserted 193492759 1517686713
testID
\change_inserted 1685850735 1502329967
, to the current working directory under the results folder:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502329104
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502329104


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502329114

\family typewriter
\size footnotesize
> fab extract_all:test_id= exp_20131206-102931_tcp_newreno_run_0, out_dir=../resul
ts
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502329104

}
\end_layout

\end_inset


\change_unchanged

\end_layout

\begin_layout Subsection
extract_ackseq – Extract acknowledged bytes or dupACKs
\end_layout

\begin_layout Standard
This task extracts TCP acknowledgement data.
 
\change_deleted 193492759 1517789780
It is useful for incast experiments but not limited to these.
 
\change_unchanged
Extracted data files are created for each traffic flow and have an .acks.0
 extension (without burst separation) or a file extension is .acks.<burst_number>
 (with burst separation
\change_inserted 193492759 1517997092
, section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:burst_separation"

\end_inset


\change_unchanged
).
 The data files contain the following space-separated columns with one line
 per timestamp: timestamp, cumulative acknowledged bytes (from tcpdump log)
 and cumulative dupACKs (from tcpdump log).
 
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489724630
is
\change_deleted 1685850735 1489724629
e
\change_unchanged
 task has the common parameters as well as the burst-separation parameters
 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:burst_separation"

\end_inset

.
 Th
\change_inserted 1685850735 1489724640
is
\change_deleted 1685850735 1489724640
e
\change_unchanged
 task also has the parameter 
\family typewriter
\size small
total_per_experiment
\family default
\size default
 that if set to `1' will generate an additional file with the total cumulative
 acknowledged bytes and total cumulative dupACKs over all flows.
\end_layout

\begin_layout Standard
Since this function extracts data from the ACK stream, source_filter is
 effectively reversed compared to other tasks, such as extract_pktsizes.
 For example, if one wanted to extract throughput for the source with IP
 192.168.0.10 one would specify 
\family typewriter
\size small
source_filter=
\begin_inset Quotes erd
\end_inset

S_192.168.0.10_*
\begin_inset Quotes erd
\end_inset

.

\family default
\size default
 However, to extract the corresponding ACK data with extract_ackseq one
 has to specify
\family typewriter
\size small
 source_filter=
\begin_inset Quotes erd
\end_inset

D_192.168.0.10_*
\begin_inset Quotes erd
\end_inset


\family default
\size default
, as the ACKs travel in the opposite direction.
\end_layout

\begin_layout Subsubsection
Total over all flows
\end_layout

\begin_layout Standard
By default data is extracted per flow, but if 
\family typewriter
\size small
total_per_experiment
\family default
\size default
 is set to `1' in addition a file with total acknowledged bytes and total
 dupACKs will be created.
 Note that if 
\family typewriter
\size small
total_per_experiment
\family default
\size default
 is set to `1', a source_filter should be specified to prevent aggregating
 both directions of traffic.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489725144
the task
\change_inserted 1685850735 1502331785
this task to extract TCP acknowledgement data for a certain 
\change_deleted 193492759 1517686718
test_id
\change_inserted 193492759 1517686718
testID
\change_inserted 1685850735 1502331785
, to the current working directory under the results folder.
 The 
\family typewriter
\size small
burst_sep
\family default
\size default
 parameter allows the specification of the time between bursts
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_ackseq:test_id=
\change_inserted 1685850735 1494296939
 
\change_deleted 1685850735 1489538755
 
\change_inserted 1685850735 1502330363
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502330366
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502330368
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542061
.
\change_unchanged
/results,
\change_deleted 1685850735 1489538758
 
\change_unchanged
burst_sep=1.0
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_dash_goodput – Extract goodput for DASH
\change_inserted 193492759 1517789854
-like
\change_unchanged
 experiments
\change_inserted 193492759 1517789859
 based on httperf
\change_unchanged

\end_layout

\begin_layout Standard
This task extracts goodput for DASH-like clients
\change_inserted 193492759 1517790283
, based on data from the httperf log files (*_httperf_dash.log.gz) generated
 by the start_httperf_dash traffic generator
\change_unchanged
.
 
\change_inserted 193492759 1517790107
(Note: The use of the start_httperf_dash traffic generator is deprecated
 for TEACUP v1.1 in favor of launching real DASH clients using start_dash_streami
ng_dashjs.)
\end_layout

\begin_layout Standard
Extracted data files are created for each DASH-like client and have a .dashgp
 extension.
 They contain the following comma-separated data columns with one line per
 data block downloaded: timestamp of request, size of requested and downloaded
 block in bytes, bit rate in megabit per second, response time in seconds,
 nominal cycle length in seconds, nominal rate in kilobits per second, and
 block number.
\end_layout

\begin_layout Standard
Besides the common parameters 
\change_deleted 1685850735 1489725146
the task
\change_inserted 1685850735 1489725146
this task
\change_unchanged
 has a 
\family typewriter
\size small
dash_log_list
\family default
\size default
 parameter.
 This parameter is an alternative to specifying a list of test IDs, and
 allows a user to specify a file name that contains a list of httperf log
 files for DASH-like clients which should be processed.
 The format of the log list file is one file name per line.
 The file paths do not need to be specified, as TEACUP will automatically
 find the files assuming they are in a sub directory below the fabfile.py
 directory.
 If the 
\family typewriter
\size small
test_id
\family default
\size default
 parameter is specified, the 
\family typewriter
\size small
dash_log_list
\family default
\size default
 parameter is ignored.
 
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489725147
the task
\change_inserted 1685850735 1502332470
this task to extract goodput from DASH-like clients for a certain dash log
 list, to the current working directory under the results folder
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_dash_goodput:
\change_deleted 1685850735 1489538763
 
\change_unchanged
dash_log_list=
\change_inserted 1685850735 1494296973
 
\change_unchanged
dash_logs.txt,out_dir=.
\change_inserted 1685850735 1489542065
.
\change_unchanged
/results
\change_deleted 1685850735 1489538766
/
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_incast – Extract response times for incast experiments (from httperf
 logs)
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_incast"

\end_inset


\end_layout

\begin_layout Standard
This task extracts response times for incast experiments.
 Extracted data files are created for each traffic flow and have an .rtimes
 extension (single responders) or an .rtimes.all extension (all responders
 merged).
 They contain the following space-separated columns with one line per timestamp:
 timestamp, burst number (starting from 1), response time in seconds (from
 httperf log file).
 
\end_layout

\begin_layout Standard
Besides the common parameters 
\change_deleted 1685850735 1489725149
the task
\change_inserted 1685850735 1489725149
this task
\change_unchanged
 has the 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 parameters (
\family typewriter
\size small
burst_sep
\family default
\size default
 is not needed here as the httperf log data is already separated in bursts)
 to enable plotting of the response times only for selected bursts.
\end_layout

\begin_layout Subsubsection
Filtering on flows
\end_layout

\begin_layout Standard
Note that for extract_incast flows are bidirectional, and the source of
 an incast flow is always the querier and the destination of an incast flow
 is always one of the responders.
 This needs to be taken into account when using 
\family typewriter
\size small
source_filter
\family default
\size default
.
 Also note that since there is no information about a querier's source port
 numbers in httperf log files, TEACUP will create fake source port numbers.
\end_layout

\begin_layout Subsubsection
Slowest response only
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725160
is
\change_deleted 1685850735 1489725159
e
\change_unchanged
 task has a parameter 
\family typewriter
\size small
slowest_only
\family default
\size default
 (default is `0').
 If 
\family typewriter
\size small
slowest_only
\family default
\size default
 is set to `1', 
\change_deleted 1685850735 1489725167
the task
\change_inserted 1685850735 1489725167
this task
\change_unchanged
 will also generate a file with the extension .rtimes.slowest that only contains
 the slowest response time over all flows for each burst.
 If 
\family typewriter
\size small
slowest_only
\family default
\size default
 is set to `2', 
\change_deleted 1685850735 1489725169
the task
\change_inserted 1685850735 1489725169
this task
\change_unchanged
 will also generate a file with the extension .rtimes.slowest that only contains
 the time between the first request sent and the time the last response
 was finished for each burst (default is `0').
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489725170
the task
\change_inserted 1685850735 1502332823
this task to extract response times from incast experiments httperf logs
 for a certain 
\change_deleted 193492759 1517686742
test_id
\change_inserted 193492759 1517686742
testID
\change_inserted 1685850735 1502332823
, to the current working directory under the results folder.
 The parameters 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 are specified to select the bursts to be plotted
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_incast:test_id=
\change_inserted 1685850735 1494297002
 
\change_deleted 1685850735 1489538771
 
\change_inserted 1685850735 1502332555
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502332559
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502332561
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542070
.
\change_unchanged
/results,
\change_deleted 1685850735 1489538775
 
\change_unchanged
sburst=2,eburst=0
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_incast_restimes – Extract response times for incast experiments
 (from tcpdump)
\end_layout

\begin_layout Standard
This task extracts response times for incast experiments.
 The difference between the extract_incast task (Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_incast"

\end_inset

) and this task is that the former extracts the response times from httperf
 logs while this task extracts the response times from tcpdump files.
 Extracted data files are created for each traffic flow and have an .restimes
 extension.
 They contain the following space-separated columns with one line per timestamp:
 timestamp the request was sent, burst number (starting from 1), <IP>.<port>
 of the querier, <IP>.<port> of the responder, and the response time in seconds
 (time between last packet of response and GET packet from tcpdump).
 
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725178
is
\change_deleted 1685850735 1489725178
e
\change_unchanged
 task has the common parameters.
 Furthermore, it has the parameter 
\family typewriter
\size small
query_host
\family default
\size default
, which must be used to specify the querier (set to name as used in TPCONF_hosts
)
\end_layout

\begin_layout Subsubsection
Filtering on flows
\end_layout

\begin_layout Standard
Note that for extract_incast_restimes flows are bidirectional, and the source
 of an incast flow is always the querier and the destination of an incast
 flow is always one of the responders.
 This needs to be taken into account when using 
\family typewriter
\size small
source_filter
\family default
\size default
.
\end_layout

\begin_layout Subsubsection
Slowest response only
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725184
is
\change_deleted 1685850735 1489725184
e
\change_unchanged
 task has a parameter 
\family typewriter
\size small
slowest_only
\family default
\size default
 (default is `0').
 If 
\family typewriter
\size small
slowest_only
\family default
\size default
 is set to `1', 
\change_deleted 1685850735 1489725229
the task
\change_inserted 1685850735 1489725229
this task
\change_unchanged
 will also generate a file with the extension .restimes.slowest that only
 contains the slowest response time over all flows for each burst.
 If 
\family typewriter
\size small
slowest_only
\family default
\size default
 is set to `2', 
\change_deleted 1685850735 1489725231
the task
\change_inserted 1685850735 1489725231
this task
\change_unchanged
 will also generate a file with the extension .restimes.slowest that only
 contains the time between the first request sent and the time the last
 response was finished for each burst (default is `0').
\change_inserted 1685850735 1502332835

\end_layout

\begin_layout Subsubsection

\change_inserted 1685850735 1502332835
Examples
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502333846
The following shows an example of how to use this task to extract response
 times from incast experiments tcpdump logs for a certain 
\change_deleted 193492759 1517686748
test_id
\change_inserted 193492759 1517686748
testID
\change_inserted 1685850735 1502333846
, to the current working directory under the results folder.
 The parameter 
\family typewriter
\size small
query_host
\family default
\size default
 is required to make sure the querying host according to the ran experiment
 is specified:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502332835
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502332835


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502333326

\family typewriter
\size footnotesize
> fab extract_incast_restimes:test_id= exp_20131206-102931_tcp_newreno_run_0,
 out_dir=../results,query_host=testhost1
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502332835

}
\end_layout

\end_inset


\change_unchanged

\end_layout

\begin_layout Subsection
extract_incast_iqtimes – Extract inter-query times (incast experiments)
\end_layout

\begin_layout Standard
This task extracts the times between requests sent by the querier for incast
 experiments.
 Extracted data files are created for each traffic flow and have an .iqtime.all
 extension (combined inter-query times) and .iqtime.<responder> where <responder>
 is the IP plus port number of a responder (per responder inter-query times).
 They contain the following space-separated columns with one line per timestamp:
 timestamp, IP of responder, port number of responder, time between request
 and first request in burst sent by querier, and time between request and
 previous request in same burst sent by querier.
 
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725242
is
\change_deleted 1685850735 1489725240
e
\change_unchanged
 task has the common parameters.
 It also has the 
\family typewriter
\size small
burst_sep
\family default
\size default
 parameter used to detect the bursts
\change_inserted 193492759 1517997034
 (section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:burst_separation"

\end_inset

)
\change_unchanged
; however, the semantic here is slightly different as 
\family typewriter
\size small
burst_sep
\family default
\size default
 
\emph on
must
\emph default
 be a number greater than 0 (default is 1.0) in order to separate the query
 bursts.
 The parameter 
\family typewriter
\size small
query_host
\family default
\size default
 must be used to specify the querier (set to name as used in TPCONF_hosts).
 
\end_layout

\begin_layout Subsubsection
Aggregate responders
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
by_responder
\family default
\size default
 is set to `1' by default
\change_inserted 1685850735 1488779916
,
\change_unchanged
 meaning per responder data files are created.
 If set to `0' one file with the times for all responders is created.
 
\end_layout

\begin_layout Subsubsection
Cumulative data
\end_layout

\begin_layout Standard
By default and if the parameter 
\family typewriter
\size small
cumulative 
\family default
\size default
is set to `0'
\change_inserted 1685850735 1488779982
,
\change_unchanged
 raw inter-query times are computed (as explained above).
 If the parameter 
\family typewriter
\size small
cumulative 
\family default
\size default
is set to `1' subsequent bursts are plotted in a cumulative fashion, i.e.
 the time of the first request in a burst is the time of the last request
 in the previous burst.
 Cumulative numbers make it easier to see long term trends, such as the
 inter-query times being consistently larger in one experiment compared
 to another experiment.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489725248
the task
\change_inserted 1685850735 1502333831
this task to extract the times between requests sent by the querier from
 incast experiments for a certain 
\change_deleted 193492759 1517686758
test_id
\change_inserted 193492759 1517686758
testID
\change_inserted 1685850735 1502333831
, to the current working directory under the results folder.
 The parameter 
\family typewriter
\size small
query_host
\family default
\size default
 is required to make sure the querying host according to the ran experiment
 is specified.
 The parameter 
\family typewriter
\size small
cumulative
\family default
\size default
 is used to plot bursts in a cumulative fashion
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_iqtimes:test_id=
\change_inserted 1685850735 1494297151
 
\change_deleted 1685850735 1489538788
 
\change_inserted 1685850735 1502333068
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502333072
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502333074
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542081
.
\change_unchanged
/results,
\change_deleted 1685850735 1489538792
 
\change_unchanged
query_host=testhost1,
\change_inserted 1685850735 1502333083
 
\change_unchanged
cumulative=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1489621460
extract_owd – Extract OWD information
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489621557
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_owd"

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489621460
The extracted data files for each data flow are given the .owd extension.
 They contain the following space-separated columns with one line per timestamp:
 timestamp of OWD and OWD estimated.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502333918
It utilises many of the common parameters specified previously under the
 extract_rtt,
\change_inserted 193492759 1517997192
 and the burst-separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:burst_separation"

\end_inset

.
 
\change_deleted 193492759 1517996904
 however a
\change_inserted 193492759 1517996904
A
\change_inserted 1685850735 1502333918
dditionally it 
\change_deleted 193492759 1517996909
has
\change_inserted 193492759 1517996913
provides
\change_inserted 1685850735 1502333918
 
\family typewriter
\size small
anchor_map
\family default
\size default
 as well as 
\family typewriter
\size small
owd_midpoint
\change_deleted 193492759 1517996923

\family default
\size default
.

\change_inserted 193492759 1517996920
 parameters.

\change_inserted 1685850735 1502333918
 The 
\family typewriter
\size small
anchor_map
\family default
\size default
 parameter, in the form <src_ip1>:<dst_ip1>;<src_ip2>:<dst_ip2>;...
 can be used to determine whether to log OWD packets of the source ip address
 when closer to the destination IP.
 For the
\family typewriter
\size small
 owd_midpoint
\family default
\size default
 parameter, this can be used determine whether the OWD is logged at the
 packets origin (`0'), or at the halfway between the origin and the destination
 (`1').
 
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489621460
There is also a 
\family typewriter
\size small
seek_window 
\family default
\size default
parameter for the matching of packets within the seek window size of the
 most recent match in the destination capture file.
\end_layout

\begin_layout Subsubsection

\change_inserted 1685850735 1489621460
Examples
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502335373
The following shows an example of how to use this task to extract the one-way
 delay for a certain 
\change_deleted 193492759 1517686764
test_id
\change_inserted 193492759 1517686764
testID
\change_inserted 1685850735 1502335373
, to the current working directory under the results folder:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489621460
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1489621460


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502334854

\family typewriter
\size footnotesize
> fab extract_owd:test_id= exp_20131206-102931_tcp_newreno_run_0, out_dir=../resul
ts
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1489621460

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
extract_pktloss – Extract packet loss information
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489621543
\begin_inset CommandInset label
LatexCommand label
name "subsec:extract_pktloss"

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 193492759 1517997173
This task has the common parameters, the burst-separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:burst_separation"

\end_inset

 and provides an optional 
\family typewriter
\size small
log_loss
\family default
\size default
 parameter.
 
\change_deleted 193492759 1517996169
This task can be
\change_inserted 193492759 1517996825
The task is
\change_inserted 1685850735 1489621353
 used to 
\change_inserted 193492759 1517996825
identify when packet losses occur versus time, or the cumulative count of
 packet losses versus time for 
\change_deleted 193492759 1517996130
determine how much packet loss was being experienced for the 
\change_inserted 1685850735 1489621353
specified traffic.
\change_deleted 1685850735 1488780796
only
\change_unchanged
 
\change_deleted 1685850735 1488780868
be used with emulated FPS game traffic generated with the start_fps_game
 function.
 
\change_unchanged
Extracted 
\change_inserted 193492759 1517996825
intermediate 
\change_unchanged
data files are created for each traffic flow and have a .loss
\change_inserted 193492759 1517996825
2
\change_unchanged
 extension.
\change_inserted 193492759 1517996825

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517996297
 
\change_inserted 193492759 1517996509
If 
\family typewriter
\size small
log_loss=1
\family default
\size default
, the intermediate file contains lines of 
\family typewriter
\size small
<timestamp> <loss_flag>
\family default
\size default
, where loss_flag=0 if the packet seen at the source was also seen at the
 destination, or loss_flag=1 if the packet seen at the source was lost.
\end_layout

\begin_layout Standard

\change_inserted 193492759 1517996479
If 
\family typewriter
\size small
log_loss=2
\family default
\size default
 (the default) the intermediate file contains lines of 
\family typewriter
\size small
<timestamp> <cumulative_loss_count>
\family default
\size default
, where cumulative_loss_count is the number of loss events experienced by
 a given flow at each specific point in time.
\change_unchanged

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517996379
They contain the following space-separated columns with one line per packet:
 timestamp, lost flag (0 if packet arrived, 1 if packet was lost).
 This
\change_deleted 1685850735 1489725256
e
\change_deleted 193492759 1517996157
 task has the common parameters
\change_deleted 1685850735 1489621425
.
\change_deleted 193492759 1517996379
, as well as the 
\family typewriter
\size small
log_loss
\family default
\size default
 parameter.
 This can be equal to 1 for the plotting of individual packet loss events,
 or being equal to 2, which enables the plotting of cumulative packet loss
 events (default).
 The extract data files in this case have the same timestamping per line,
 but the second field is a cumulative total of the packets lost, as opposed
 to just and indication of a packet loss.
\change_unchanged

\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use 
\change_deleted 1685850735 1489725261
the task
\change_inserted 1685850735 1502335654
this task to extract packet loss for a certain 
\change_deleted 193492759 1517686768
test_id
\change_inserted 193492759 1517686768
testID
\change_inserted 1685850735 1502335654
, to the current working directory under 
\change_deleted 193492759 1517996606
the
\change_inserted 193492759 1517996610
a 
\begin_inset Quotes eld
\end_inset

../
\change_deleted 193492759 1517996610
 
\change_inserted 1685850735 1502335654
results
\change_inserted 193492759 1517996614

\begin_inset Quotes erd
\end_inset


\change_inserted 1685850735 1502335654
 folder.
 
\change_deleted 193492759 1517996545
The parameter 
\family typewriter
\size small
log_loss
\family default
\size default
 being a value of 2
\change_inserted 193492759 1517996547
Setting 
\family typewriter
\size small
log_loss=2
\change_inserted 1685850735 1502335654

\family default
\size default
 means a
\change_inserted 193492759 1517996572
n intermediate file of
\change_inserted 1685850735 1502335654
 cumulative 
\change_deleted 193492759 1517996575
plot
\change_inserted 193492759 1517996582
loss count versus time
\change_inserted 1685850735 1502335654
 will 
\change_deleted 193492759 1517996551
occur
\change_inserted 193492759 1517996552
be created
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab extract_pktloss:test_id=
\change_inserted 1685850735 1494297199
 
\change_deleted 1685850735 1489538797
 
\change_inserted 1685850735 1502335429
exp_
\change_unchanged
20141003-111821_
\change_inserted 1685850735 1502335504
tcp_newreno
\change_deleted 1685850735 1502335492
game_traffic_aqm_pfifo
\change_inserted 1685850735 1502335434
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494297202
 
\change_deleted 1685850735 1489538801
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542087
.
\change_unchanged
/results
\change_inserted 1685850735 1502335667
,log_loss=2
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\change_inserted 1685850735 1489464332

\end_layout

\begin_layout Section
Data Analysis
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Data_analysis"

\end_inset


\end_layout

\begin_layout Standard
Now we describe TEACUP's analyse tasks that allow to plot various types
 of graphs.
 First, we give an overview of the existing analysis tasks.
 Then we discuss parameters common to most tasks as well as common environment
 variables that are used by the plotting code.
 Next, we discuss the
\change_inserted 1685850735 1489725281
se
\change_unchanged
 tasks in detail.
 Finally, we discuss ways to customise the plotting beyond using the existing
 tasks.
\end_layout

\begin_layout Subsection
Analysis tasks overview
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:analysis_functions"

\end_inset


\end_layout

\begin_layout Standard
Currently basic analysis tasks exist for:
\end_layout

\begin_layout Enumerate
Plotting the throughput including all header bytes based on tcpdump data
 (analyse_throughput);
\end_layout

\begin_layout Enumerate
Plotting the Round Trip Time (RTT) using SPP 
\begin_inset CommandInset citation
LatexCommand cite
key "zander13minimally,sppweb"

\end_inset

 based on tcpdump data (analyse_rtt);
\end_layout

\begin_layout Enumerate
Plotting the TCP congestion window size (CWND) based on SIFTR and Web10G
 data (analyse_cwnd);
\end_layout

\begin_layout Enumerate
Plotting the TCP RTT estimate based on SIFTR and Web10G data (analyse_tcp_rtt).
 Th
\change_inserted 1685850735 1489725289
is
\change_deleted 1685850735 1489725289
e
\change_unchanged
 task can plot both, the smoothed estimate and an unsmoothed estimate (for
 SIFTR the unsmoothed estimate is the improved ERTT 
\begin_inset CommandInset citation
LatexCommand cite
key "CAIA-TR-100219A"

\end_inset

 estimate);
\end_layout

\begin_layout Enumerate
Plotting an arbitrary TCP statistic from SIFTR and Web10G data (analyse_tcp_stat
);
\change_inserted 1685850735 1488780704

\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1488780744
Plots RTT using SPP and estimated from SIFTR and Web10G data, as well as
 plotting the CWND and packet size data all at once (analyse_all);
\change_unchanged

\end_layout

\begin_layout Enumerate
Plotting cumulative bytes acknowledged or dupACKs over time from tcpdump
 data (analyse_ackseq);
\end_layout

\begin_layout Enumerate
Plotting the goodput for DASH-like streaming clients (analyse_dash_goodput);
\end_layout

\begin_layout Enumerate
Plotting the goodput for TCP flows based on acknowledged bytes (analyse_goodput)
;
\end_layout

\begin_layout Enumerate
Plotting the response times for incast experiments (analyse_incast);
\end_layout

\begin_layout Enumerate
Plotting the inter-query times for incast experiments (analyse_incast_iqtimes)
\change_inserted 1685850735 1488780552
;
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1489535246
Plotting the packet loss being experienced based off tcpdump data (analyse_pktlo
ss);
\change_deleted 1685850735 1488780552
.
\change_inserted 1685850735 1489535250

\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1489535743
Plotting the one way delay (OWD) being experienced based off tcpdump data
 (analyse_owd);
\end_layout

\begin_layout Standard

\change_deleted 1685850735 1489535503
A convenience function exists that plots graphs 1–4 listed above (analyse_all).
 
\change_unchanged

\end_layout

\begin_layout Standard
The above tasks usually plot a single statistic over time.
 However, there are t
\change_inserted 1685850735 1494566252
wo
\change_deleted 1685850735 1489535319
wo
\change_unchanged
 tasks that allow to compare the above statistics across different experimental
 settings:
\end_layout

\begin_layout Enumerate
Plotting boxplots, mean or median of a statistic for different combinations
 of experiment parameters (analyse_cmpexp);
\end_layout

\begin_layout Enumerate
Plotting 2D-density plots or ellipse plots of two statistics for different
 combinations of experiment parameters (analyse_2d_density)
\change_inserted 1685850735 1494566258
.
\change_deleted 1685850735 1489534947
.
\change_inserted 1685850735 1489534892

\end_layout

\begin_layout Subsection
Common task parameters
\end_layout

\begin_layout Standard
This section describes common task parameters.
 Many of them are supported by all tasks, but some of them are only supported
 by a subset of tasks, as noted in the task-specific sections.
 For precise information on task parameters refer to the TEACUP command
 reference 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2015caia_teacup_v1.0_reference"

\end_inset

.
 Task-specific parameters are described in the sections that describes the
 task.
\end_layout

\begin_layout Subsubsection
Specifying experiment(s) to analyse
\end_layout

\begin_layout Standard
Most analyse task have a 
\family typewriter
\size small
test_id
\family default
\size default
 parameter.
 The analysis can be run for a single experiment only by specifying a single
 test
\change_deleted 193492759 1517686862
 
\change_unchanged
ID.
 For example, the following command generates the RTT graph for the experiment
 
\change_inserted 1685850735 1502335740

\family typewriter
\size footnotesize
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502335831
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502335772
_run_0
\change_unchanged

\family default
\size default
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_rtt:test_id=
\change_inserted 1685850735 1494297228
 
\change_deleted 1685850735 1489538826
 
\change_inserted 1685850735 1502335715
exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502335835
_dash_2000
\change_unchanged
_tcp_newreno
\change_inserted 1685850735 1502335721
_run_0
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The 
\family typewriter
\size small
test_id
\family default
\size default
 parameter also accepts multiple test IDs 
\change_inserted 193492759 1517686890
(testIDs) 
\change_unchanged
separated by semicolons.
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
Since TEACUP v0.5.
 No trailing semicolon for only one test ID.
\end_layout

\end_inset

 If multiple IDs are specified, results from each test ID will be plotted
 on the same graph(s).
 For time series graphs, produced by analyse_rtt or analyse_throughput etc.,
 the resulting graphs' file name(s) will be the 
\emph on
first
\emph default
 test ID specified followed by the string "_comparison" to distinguish from
 graphs where only one experiment is plotted, created in the sub directory
 of the test ID specified first.
\end_layout

\begin_layout Standard
Instead of the 
\family typewriter
\size small
test_id
\family default
\size default
 parameter some tasks, such as analyse_cmpexp and analyse_2d_density, have
 a parameter that allows specifying a file that contains a list of 
\change_deleted 193492759 1517790371
experiment
\change_inserted 193492759 1517790371
test
\change_unchanged
 IDs.
 
\end_layout

\begin_layout Subsubsection
Data series selection
\end_layout

\begin_layout Standard
All analyse tasks, except analyse_dash_goodput, provide the 
\family typewriter
\size small
source_filter
\family default
\size default
 parameter that gives each extract and analysis function a rudimentary mechanism
 to identify the flows to be plotted.
 Note,
\family typewriter
\size small
 source_filter
\family default
\size default
 only limits what is plotted.
 Intermediate data files are always extracted for all flows in an experiment.
 However, the list of files passed by the extract task to the analysis task
 will only contain files for the selected flows.
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-series-selection"

\end_inset

 describes how to use th
\change_inserted 1685850735 1502336487
is
\change_deleted 1685850735 1502336487
e
\change_unchanged
 parameter.
\end_layout

\begin_layout Subsubsection
Re-using previously extracted data
\end_layout

\begin_layout Standard
All analysis functions above have a parameter 
\family typewriter
\size footnotesize
replot_only
\family default
\size default
.
 This parameter allows t
\change_inserted 1685850735 1494294401
he
\change_deleted 1685850735 1494294400
o
\change_unchanged
 
\change_deleted 1685850735 1494294415
replot
\change_inserted 1685850735 1494294415
re-plotting of
\change_unchanged
 the graphs without extracting the data again (e.g.
 from tcpdump, SIFTR or Web10G files).
 If 
\family typewriter
\size small
replot_only
\family default
\size default
 is set to `1' data is still extracted for experiments where data has not
 been extracted before, but for experiments with already extracted data
 the graph(s) are created based on the existing extracted data.
 For example, the following command recreates the graphs without extracting
 already extracted data again:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:replot_only=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Specifying the location of intermediate data files
\end_layout

\begin_layout Standard
By default all 
\change_deleted 193492759 1517911439
interim
\change_inserted 193492759 1517911443
intermediate
\change_unchanged
 data files are generated in a sub directory (
\change_deleted 193492759 1517790512
with
\change_inserted 193492759 1517790516
whose name
\change_deleted 193492759 1517790523
 the directory name being
\change_inserted 193492759 1517790523
 is
\change_unchanged
 the test ID prefix) inside the directory where fab is executed.
 To put the
\change_inserted 193492759 1517911526
se
\change_unchanged
 output files into a specific directory the 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 parameter can be specified (and it will be passed to the extract tasks(s)).
 If 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 is an absolute path, the output files will be put in the specified directory.
 If 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 is a relative path, it is treated as relative 
\emph on
to the location of the log files
\emph default
 when determining the directory for the output files.
 The directories are created automatically if they do not exist.
 The following is an example where the output files are put in sub-directories
 named `results' inside each test ID prefix sub directory with experiment
 data:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:out_dir=.
\change_inserted 1685850735 1489542120
.
\change_unchanged
/results
\change_deleted 1685850735 1489538837
/
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Assuming we executed the last command in a fabfile directory <fabfile_dir>
 with two sub directories, one for test ID prefix 
\family typewriter
\size small
20131206-102931_exp
\family default
\size default
 and one for test ID prefix 
\family typewriter
\size small
20131206-124510_exp
\family default
\size default
, the output files will be put in the directories:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily}"
inline false
status open

\begin_layout Plain Layout

<fabfile_dir>/
\change_inserted 1685850735 1502335970
exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502335966
_exp
\change_unchanged
/results/
\end_layout

\begin_layout Plain Layout

<fabfile_dir>/
\change_inserted 1685850735 1502335973
exp_
\change_unchanged
20131206-124510
\change_deleted 1685850735 1502335968
_exp
\change_unchanged
/results/
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Specifying the location of final graphs
\end_layout

\begin_layout Standard
By default, the final PDF files (graphs) will be created in 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
.
 This can be 
\change_deleted 193492759 1517911578
adjusted
\change_inserted 193492759 1517911583
overridden
\change_unchanged
 using the 
\family typewriter
\size footnotesize
pdf_dir
\family default
\size default
 parameter.
 
\change_deleted 193492759 1517911632
Like
\change_inserted 193492759 1517911633
As with
\change_unchanged
 
\family typewriter
\size footnotesize
out_dir
\change_deleted 193492759 1517911609

\family default
\size default
 
\change_inserted 193492759 1517911608
, 
\change_unchanged
the specified directory is either an absolute path or a relative path which
 is relative to the location of the experiment's log files.
 The directory is automatically created if it does not exist.
 The parameter can be used as follows:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_
\change_deleted 1685850735 1502341379
spp_
\change_unchanged
rtt:test_id= 
\change_inserted 1685850735 1502336014
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502336018
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502336023
_run_0
\change_unchanged
, out_dir=.
\change_inserted 1685850735 1494297270
.
\change_unchanged
/results,pdf_dir=.
\change_inserted 1685850735 1494297303
.
\change_unchanged
/pdfs
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Suppressing small or unchanging datasets
\end_layout

\begin_layout Standard
In many experiments we may have TCP flows where data only/mostly flows in
 one direction and TCP statistics in the other direction are basically constant.
 The 
\family typewriter
\size footnotesize
omit_const
\family default
\size default
 parameter can be used to suppress any completely constant series (i.e.
 all values are identical).
 It can be used as follows:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:omit_const=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Any flows that have only very few data points (less or equal than 
\family typewriter
\size footnotesize
min_values
\family default
\size default
) are excluded from the plot (by default 
\family typewriter
\size footnotesize
min_values
\family default
\size default
 = 3).
 The min_values parameter can be changed on the command line, for example
 the following command omits any flows with 20 data points or less from
 the plots:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:min_values=20
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Adjusting the y-axes
\end_layout

\begin_layout Standard
All analyse tasks have the parameters 
\family typewriter
\size footnotesize
ymin
\family default
\size default
 and 
\family typewriter
\size footnotesize
ymax
\family default
\size default
.
 These parameter can be used to set the y-axis limits to specific values,
 for example to produce multiple plots with the same scale (by default 
\family typewriter
\size footnotesize
ymin
\family default
\size default
 is 0 and 
\family typewriter
\size footnotesize
ymax
\family default
\size default
 is determined automatically).
 The parameters can be used as follows (here the y-axis range is set to
 100–200
\begin_inset space \thinspace{}
\end_inset

ms):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_
\change_deleted 1685850735 1502341395
spp_
\change_unchanged
rtt:test_id= 
\change_inserted 1685850735 1502336070
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502336078
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502336082
_run_0
\change_unchanged
, ymin=100,ymax=200
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Adjusting time (x-axes) scales
\end_layout

\begin_layout Standard
All tasks
\change_deleted 1685850735 1488781186
 tasks
\change_unchanged
 that plot data over time have the parameters 
\family typewriter
\size footnotesize
stime
\family default
\size default
 and 
\family typewriter
\size footnotesize
etime
\family default
\size default
 to control the x-axis limits of the plots (by default 
\family typewriter
\size footnotesize
stime
\family default
\size default
 is 0.0 and 
\family typewriter
\size footnotesize
etime
\family default
\size default
 is the duration of the experiment).
 Note that using these parameters allows t
\change_inserted 1685850735 1494294446
he
\change_deleted 1685850735 1494294445
o
\change_inserted 1685850735 1494294605
ability to
\change_unchanged
 zoom in, but the data outside the specified interval is not filtered out.
 The y-axis maximum is adjusted automatically to the maximum occurring in
 the specified x-axis interval, but the legend is not adjusted.
 To remove unwanted entries in the legend (e.g.
 flows not in the time window), one must use 
\family typewriter
\size small
source_filter
\family default
\size default
 to filter out the the unwanted flows (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-series-selection"

\end_inset

).
 The parameters can be used as follows (here the x-axis range is set to
 5–10 seconds):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_
\change_deleted 1685850735 1502341398
spp_
\change_unchanged
rtt:test_id= 
\change_inserted 1685850735 1502336136
exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502336128
_dash_2000
\change_unchanged
_tcp_newreno
\change_inserted 1685850735 1502336133
_run_0
\change_unchanged
, stime=5,etime=10
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
User-supplied legend names
\end_layout

\begin_layout Standard
By default the legend entries are simply the flow tuples (source IP, source
 port, destination IP, destination port).
 The parameter 
\family typewriter
\size footnotesize
lnames
\family default
\size default
 can be used to replace these with more informative names.
 One must specify the same number as names as there are data series
\change_inserted 1685850735 1502336630
 or source filters
\change_unchanged
.
 Names specified must be separated by semicolons.
 The parameter can be used as follows:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_
\change_deleted 1685850735 1502341401
spp_
\change_unchanged
rtt:test_id= 
\change_inserted 1685850735 1502336162
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502336156
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502336159
_run_0
\change_unchanged
, lnames='TCP Reno;TCP Cubic'
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Prefix for pdf file names
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
out_name
\family default
\size default
 parameter allows t
\change_inserted 1685850735 1488781287
he
\change_deleted 1685850735 1488781286
o
\change_unchanged
 chang
\change_inserted 1685850735 1488781290
ing
\change_deleted 1685850735 1488781289
e
\change_unchanged
 
\change_inserted 1685850735 1488781296
of 
\change_unchanged
the name 
\change_inserted 1685850735 1488781299
for
\change_deleted 1685850735 1488781299
of
\change_unchanged
 the PDF files produced.
 If 
\family typewriter
\size footnotesize
out_name
\family default
\size default
 is specified, the prefix for the PDF files is 
\family typewriter
\size footnotesize
out_name
\family default
\size default
 followed by the test ID (followed by "_comparison" for comparison graphs
 based on multiple test IDs).
 The parameter can be used as follows:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_
\change_deleted 1685850735 1502341403
spp_
\change_unchanged
rtt:test_id= 
\change_inserted 1685850735 1502336165
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502336168
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502336172
_run_0
\change_unchanged
, out_name='ExperimentA'
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Filtering SIFTR log lines
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:filtering_siftr_analysis"

\end_inset


\end_layout

\begin_layout Standard
The analyse_all, analyse_cwnd, analyse_tcp_rtt and analyse_tcp_stat tasks
 have a parameter 
\family typewriter
\size small
io_filter
\family default
\size default
 that allows specifying whether TCP statistics are plotted based on incoming
 (set value to `i') outgoing (set value to `o') or incoming and outgoing
 packets (set value to `io') for SIFTR log files.
 The default value is `o'.
 Currently, the parameter is only effective with SIFTR log files, it does
 nothing with web10g log files.
 
\end_layout

\begin_layout Standard
Note: this parameter only takes effect if 
\family typewriter
\size small
replot_only
\family default
\size default
 is set to `0' (i.e.
 you must re-extract intermediate data if you want to change io_filter)
\change_inserted 1685850735 1502337093
.
 The parameter can be used as follows:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502337093
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502337093


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341310

\family typewriter
\size footnotesize
> fab analyse_tcp_rtt:test_id= exp_20131206-102931_tcp_newreno_run_0, io_filter=
o
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502337093

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Correcting timestamps
\end_layout

\begin_layout Standard
All analyse tasks provide a 
\family typewriter
\size small
ts_correct
\family default
\size default
 parameter that can be used to correct timestamps in the measurement data
 (e.g.
 timestamps in tcpdump files) based on estimated clock offsets (see Section
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:clock-offset-analysis"

\end_inset

).
 This parameter is passed to the extract task(s) and Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:clock-offset-analysis"

\end_inset

 describes in more detail how it works.
\end_layout

\begin_layout Subsubsection
Burst-separation (incast 
\change_inserted 193492759 1517912171
and similar 
\change_unchanged
experiments)
\end_layout

\begin_layout Standard

\change_inserted 193492759 1517912054
A number of tasks
\change_deleted 193492759 1517912047
The tasks analyse_rtt, analyse_ackseq and analyse_incast
\change_unchanged
 can extract and plot data on a per-burst basis for 
\change_deleted 193492759 1517912061
incast 
\change_unchanged
experiments
\change_deleted 193492759 1517912064
,
\change_unchanged
 where we have bursts of TCP requests sent by a querier to 
\change_inserted 193492759 1517912069
one or more
\change_deleted 193492759 1517912072
multiple
\change_unchanged
 responders interspersed by idle times.
 The parameter 
\family typewriter
\size small
burst_sep
\family default
\size default
 
\change_deleted 193492759 1517912122
allows for the
\change_deleted 1685850735 1488781429
to
\change_deleted 193492759 1517912122
 specifying of
\change_inserted 193492759 1517912123
specifies
\change_inserted 1685850735 1488781439
 
\change_unchanged
the 
\change_inserted 193492759 1517912144
minimum 
\change_unchanged
time between 
\change_deleted 193492759 1517912129
bursts
\change_inserted 193492759 1517912129
 the end of one burst and the start of another
\change_unchanged
.
 Any idle time longer than 
\family typewriter
\size small
burst_sep
\family default
\size default
 signals the start of a new burst.
 If 
\family typewriter
\size small
burst_sep
\family default
\size default
 is set to 0, data will not be separated according to bursts.
 The parameters 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 can be used to select the bursts to be plotted (they start with an index
 of 1).
 Setting 
\family typewriter
\size small
eburst=0
\family default
\size default
 means to end with the last burst.

\change_inserted 1685850735 1502341182
 The parameters can be used as follows:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502341028
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341028


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341286

\family typewriter
\size footnotesize
> fab analyse_incast:test_id= exp_20131206-102931_tcp_newreno_run_0, burst_sep=1
,sburst=2,eburst=0
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341028

}
\end_layout

\end_inset


\change_unchanged

\end_layout

\begin_layout Subsubsection
Total throughput/goodput
\end_layout

\begin_layout Standard
The tasks analyse_throughput and analyse_goodput by default plot throughput
 and goodput for each direction of each traffic flow.
 The parameter 
\family typewriter
\size small
total_per_experiment
\family default
\size default
 can be used to plot the total throughput or goodput.
 Note that this parameter will cause the tasks to sum up all the traffic
 in both directions unless a 
\family typewriter
\size small
source_filter
\family default
\size default
 is specified.
 Usually, we want the total only in one direction, so a 
\family typewriter
\size small
source_filter
\family default
\size default
 should be specified that filters on a particular source or destination.

\change_inserted 1685850735 1502341261
 The parameter can be used as follows:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502341263
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341263


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341642

\family typewriter
\size footnotesize
> fab analyse_rtt:test_id= exp_20131206-102931_tcp_newreno_run_0, source_filter=
"S_172.16.10.2_81", total_per_experiment=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502341263

}
\end_layout

\end_inset


\change_deleted 1685850735 1502341261

\family default
\size default
 
\change_unchanged

\end_layout

\begin_layout Subsection
Common plotting environment variables
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:plot-env-vars"

\end_inset


\end_layout

\begin_layout Standard
Plotting behaviour can be further controlled by a number of shell environment
 variables.
 Here we explain the parameters that work for many analyse functions.
 Task-specific variables are described in the task sections.
 How to set these environment variables depends on your Unix shell.
\end_layout

\begin_layout Subsubsection
Space for the legend
\end_layout

\begin_layout Standard
The variable TC_YMAX_INC controls the space for the legend.
 It assumes the legend is plotted at the top, which is the default.
 The actual y-axis maximum for the plot is 
\begin_inset Formula $y_{\mathrm{max}}\left(1+\mathrm{TC\_YMAX\_INC}\right)$
\end_inset

, where 
\begin_inset Formula $y_{\mathrm{max}}$
\end_inset

 is the maximum based on the data (or the maximum specified by the user).
\end_layout

\begin_layout Subsubsection
Smoothing the throughput calculations
\end_layout

\begin_layout Standard
Throughput always needs to be computed over some time interval.
 The variables TC_AGGR_WIN_SIZE and TC_AGGR_INT_FACTOR allow you to specify
 the window size and interpolation for throughput plots (including comparison
 plots for throughput using the task described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:plot-metric-comparison"

\end_inset

).
 Interpolation is useful to `fill in the gaps' when a long window size is
 chosen to mitigate noise in the data.
\end_layout

\begin_layout Standard
TC_AGGR_WIN_SIZE is specified in seconds, with fractional values allowed.
 Setting TC_AGGR_INT_FACTOR to 1 means no interpolation, whereas setting
 it to an integer value 
\begin_inset Formula $n$
\end_inset

 greater than 1 means you will get 
\begin_inset Formula $n$
\end_inset

 times the number of data points (where 
\begin_inset Formula $n-1$
\end_inset

 points are interpolated points).
 Effectively the interpolation creates overlapping time windows, with the
 gaps between windows being TC_AGGR_WIN_SIZE/TC_AGGR_INT_FACTOR seconds.
 By default TC_AGGR_WIN_SIZE=1 and TC_AGGR_INT_FACTOR=4.
\change_inserted 193492759 1517912281

\end_layout

\begin_layout Standard

\change_inserted 193492759 1517913419

\series bold
Note:
\series default
 Be careful when analysing traffic having an on-off pattern with idle (off)
 periods larger than TC_AGGR_WIN_SIZE.
 Rather than produce a data point of 
\begin_inset Quotes eld
\end_inset

0 Kbps
\begin_inset Quotes erd
\end_inset

, analyse_throughput will 
\emph on
not
\emph default
 generate any data point at all when there is no packet within the sliding
 TC_AGGR_WIN_SIZE window of time.
 It can be visually misleading at first glance to see specific (high) throughput
 values plotted during the ON period, but no data points during the OFF
 periods.
 Such sparse traffic also skews the results high when using analyse_cmpexp
 to generate throughput boxplots.
\change_unchanged

\end_layout

\begin_layout Subsubsection
Point thinning
\end_layout

\begin_layout Standard
By default all plot functions will plot every point for each data series.
 If the data series
\change_deleted 1685850735 1488781624
'
\change_unchanged
 are very large, the resulting PDF files will be large and the figures will
 take a long time to display.
 To reduce the size of the plots and the time for opening them without loosing
 important information TEACUP implements 
\begin_inset Quotes eld
\end_inset

point thinning
\begin_inset Quotes erd
\end_inset

, which can be controlled with the variable TC_PTHIN_DIST or TC_PTHIN_DIST_FAC.
 
\end_layout

\begin_layout Standard
Using TC_PTHIN_DIST one can set the minimum (Euclidean) distance between
 plotted data points.
 Any data points within the minimum distance are not plotted.
 For example, TC_PTHIN_DIST=0.25 means the minimum (Euclidean) distance between
 two plotted points is 0.25 and any data points in-between are not plotted.
 By default TC_PTHIN_DIST=0, which means point thinning is disabled.
\end_layout

\begin_layout Standard
Using the absolute Euclidean distance is problematic if the scales of x-axis
 and y-axis differ significantly.
 Then, we are likely to have either too few points in one dimension or too
 many points in the other dimension.
 Also specifying an absolute distance means we may need to adjust the distance
 if we create zoomed-in graphs.
 
\end_layout

\begin_layout Standard
Since version 0.8 TEACUP also allows t
\change_inserted 1685850735 1494295689
he
\change_deleted 1685850735 1494295689
o
\change_unchanged
 specif
\change_inserted 1685850735 1494295694
ication of
\change_deleted 1685850735 1494295692
y
\change_unchanged
 the variable TC_PTHIN_DIST_FAC which controls the minimum distance of points
 in x-dimension and y-dimension separately, relative to the x-range and
 y-range plotted.
 A point is plotted if either the distance in x-dimension is larger or equal
 TC_PTHIN_DIST_FAC*<xrange> or the distance in y-dimension is larger or
 equal TC_PTHIN_DIST_FAC*<yrange>, where <xrange> and <yrange> are given
 by the data to plot and the settings applied by the user through specifying
 ymin, ymax, stime, and etime.
\end_layout

\begin_layout Subsubsection
Size of plotted points
\end_layout

\begin_layout Standard
The point size in graphs can be controlled with a variable TC_POINT_SIZE.
 Note that TC_POINT_SIZE does not specify an absolute point size, but it
 is a scaling factor that is multiplied with the actual default point size.
 Hence, if TC_POINT_SIZE is set to 1.0 the size of points will be the default
 size, if TC_POINT_SIZE is set to 0.5 the size of points will be half the
 default size and so on.
 By default TC_POINT_SIZE is 0.5.
\end_layout

\begin_layout Subsubsection
Filter out inactive flows in time interval
\end_layout

\begin_layout Standard
By default TEACUP does not filter out flows that were not active within
 the time interval specified by the user with 
\family typewriter
\size small
etime
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
.
 Legend entries for these flows are still plotted, although they can be
 
\change_deleted 1685850735 1488851153
supressed
\change_inserted 1685850735 1488851153
suppressed
\change_unchanged
 by using 
\family typewriter
\size small
source_filter
\family default
\size default
.
 If TC_FILTER_FLOWS is set to 1, TEACUP will filter out all flows for which
 there is no data in the time interval specified by the user.
 TC_FILTER_FLOWS only works for the tasks that plot time series, such as
 analyse_rtt, analyse_cwnd, analyse_throughput, with the exception that
 it does not work for analyse_dash_goodput.
\end_layout

\begin_layout Subsubsection
Sorting flows by start time
\end_layout

\begin_layout Standard
By default, for time series plots TEACUP sorts flows by the 5-tuple or in
 the order of specified source filters.
 If TC_SORT_FLOWS_BY_START_TIME is set to 1, the default order is ignored
 and flows are sorted in the order of their start times.
 Ordering flows by their start times can be useful in some situations, for
 example, if more than 12 flows are plotted as series of PDF files.
 The variable works for all time series plots (except analyse_dash_goodput).
 
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example where we plot the throughput with a modified
 aggregation time window and enabled point thinning (using the BASH shell):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> TC_AGGR_WIN_SIZE=2 TC_AGGR_INT_FACTOR=8 TC_PTHIN_DIST=0.25 fab analyse_throughp
ut:
\change_deleted 1685850735 1489538862
 
\change_inserted 1685850735 1502341766
 
\change_unchanged
test_id=
\change_inserted 1685850735 1502341733
exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502341729
_dash_2000
\change_unchanged
_tcp_newreno
\change_inserted 1685850735 1502341737
_run_0
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_throughput – Plot throughput over time
\end_layout

\begin_layout Standard
This task plots the total or per-flow throughput over time.
 Th
\change_inserted 1685850735 1489725587
is
\change_deleted 1685850735 1489725587
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the 
\family typewriter
\size small
total_per_experiment_parameter
\family default
\size default
.
\end_layout

\begin_layout Subsubsection
Calculating IP-layer or link-layer throughput
\end_layout

\begin_layout Standard
The analyse_all and analyse_throughput tasks have a 
\family typewriter
\size footnotesize
link_len
\family default
\size default
 parameter.
 If set to `0' (default) throughput is based on IP-layer packet length,
 if set to `1' throughput is based on link-layer frame length.
 Note that the bandwidth limits specified on the router are link-layer limits.
 
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following command generates a throughput graph:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_throughput:test_id=
\change_deleted 1685850735 1489538871
 
\change_inserted 1685850735 1502342299
 exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502342281
_dash_2000
\change_unchanged
_tcp_newreno
\change_inserted 1685850735 1502342287
_run_0
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following shows an example where we plot the throughput based on the
 length of link layer frames:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_throughput:test_id=
\change_deleted 1685850735 1489538881
 
\change_inserted 1685850735 1502342309
 exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502342316
_dash_2000
\change_unchanged
_tcp_newreno
\change_inserted 1685850735 1502342319
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494298900
 
\change_deleted 1685850735 1489538883
 
\change_unchanged
link_len=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_rtt – Plot RTT (SPP) over time
\end_layout

\begin_layout Standard
This task plots RTT estimated by SPP for each bidirectional flow over time.
 Th
\change_inserted 1685850735 1489725597
is
\change_deleted 1685850735 1489725596
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the burst separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
, 
\family typewriter
\size small
eburst 
\family default
\size default
and the 
\family typewriter
\size small
udp_map 
\family default
\size default
parameter (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_rtt"

\end_inset

).
\change_inserted 1685850735 1502342872

\end_layout

\begin_layout Subsubsection

\change_inserted 1685850735 1502342872
Examples
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502342952
The following command generates a SPP RTT graph were a udp_map was required
 due to udp traffic being present:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502342953
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502342953


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502342953

\family typewriter
\size footnotesize
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502343186

\family typewriter
\size footnotesize
> fab analyse_rtt:test_id= exp_20131206-102931_tcp_newreno_run_0, udp_map=
\begin_inset Quotes erd
\end_inset

192.168.0.10
\backslash
,5000: 192.168.0.11
\backslash
,5001
\begin_inset Quotes erd
\end_inset

,out_dir=../results
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502342953

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_cwnd – Plot TCP CWND over time
\end_layout

\begin_layout Standard
This task plots the TCP CWND from SIFTR or web10g logs for each direction
 of a TCP flow over time.
 Th
\change_inserted 1685850735 1489725601
is
\change_deleted 1685850735 1489725600
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the 
\family typewriter
\size small
io_filter 
\family default
\size default
parameter described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:filtering_siftr_analysis"

\end_inset

.
\change_inserted 1685850735 1502343225

\end_layout

\begin_layout Subsubsection

\change_inserted 1685850735 1502343225
Examples
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502411536
The following command generates a CWND graph for outbound packets according
 to the SIFTR logs:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502343225
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502343225


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1502343225

\family typewriter
\size footnotesize
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502343254

\family typewriter
\size footnotesize
> fab analyse_cwnd:test_id= exp_20131206-102931_tcp_newreno_run_0, out_dir=../resu
lts,io_filter=o
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502343225

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_tcp_rtt – Plot TCP RTT over time
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:analyse_tcp_rtt"

\end_inset


\end_layout

\begin_layout Standard
The analyse_tcp_rtt task plots a graph of TCP's estimate of the RTT (from
 SIFTR or web10g log files).
 Th
\change_inserted 1685850735 1489725605
is
\change_deleted 1685850735 1489725604
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the 
\family typewriter
\size small
io_filter 
\family default
\size default
parameter described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:filtering_siftr_analysis"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Smoothed or unsmoothed TCP RTT
\end_layout

\begin_layout Standard
By default the TCP RTT graphs generated are for the smoothed RTT estimates
 (and in case of SIFTR this is not the ERTT estimates).
 If the parameter 
\family typewriter
\size small
smoothed
\family default
\size default
 is set to `0', non-smoothed estimates are plotted (and in the case of SIFTR
 this is the ERTT estimates).
 Note, the 
\family typewriter
\size small
smoothed
\family default
\size default
 parameter can also be used with analyse_all, analyse_cmpexp and analyse_2d_dens
ity.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following command generates the TCP RTT graph for the non-smoothed estimates
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_tcp_rtt:test_id=
\change_inserted 1685850735 1494298923
 
\change_deleted 1685850735 1489538886
 
\change_inserted 1685850735 1502411662
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502411667
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502411673
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494298931
 
\change_deleted 1685850735 1489538888
 
\change_unchanged
smoothed=0
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_all – Combines basic analysis tasks
\end_layout

\begin_layout Standard
This task combines analyse_throughput, analyse_rtt, analyse_cwnd and analyse_tcp
_rtt and has the superset of all the parameters of these tasks.
 
\end_layout

\begin_layout Standard
The easiest way to generate the four basic graphs (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:analysis_functions"

\end_inset

) for all experiments is to run the following command in the directory containin
g the sub directories with experiment data:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
This command will generate results for all experiments listed in the file
 
\family typewriter
\size footnotesize
experiments_completed.txt
\family default
\size default
.
 However, the 
\family typewriter
\size small
test_id
\family default
\size default
 parameter can be used to only generate the plots for a specific experiment.
 Furthermore, we can pass a custom list of experiment IDs (see below).
\end_layout

\begin_layout Subsubsection
Modifying the list of test IDs to analyse
\end_layout

\begin_layout Standard
For analyse_all the parameter 
\family typewriter
\size footnotesize
exp_list
\family default
\size default
 allows t
\change_inserted 1685850735 1494296144
he
\change_deleted 1685850735 1494296144
o
\change_unchanged
 chang
\change_inserted 1685850735 1494296147
ing of
\change_deleted 1685850735 1494296146
e
\change_unchanged
 the file used as list of test IDs (by default 
\family typewriter
\size small
experiments_completed.txt
\family default
\size default
), which makes it possible to adjust the list of experiments we generate
 results for.
 The following shows an example:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:exp_list=myexp_list.txt, out_dir=".
\change_inserted 1685850735 1494298948
.
\change_unchanged
/results" 
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Resuming an interrupted analyse_all
\end_layout

\begin_layout Standard
If an analysis_all was interrupted (e.g.
 because a log file was corrupted) we can resume the analysis after the
 experiment with the corrupted files.
 First, one needs to look up the next test ID after the corrupted test ID
 in 
\family typewriter
\size footnotesize
experiments_completed.txt
\family default
\size default
.
 Then, one can resume at this test ID using the 
\family typewriter
\size footnotesize
resume_id
\family default
\size default
 parameter.
 For example, if for a test ID 
\change_inserted 1685850735 1502411865
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502411871
dash_2000_
\change_unchanged
tcp_newreno_run_0 we cannot do the analysis because of corrupted data files
 and the next test ID is 
\change_inserted 1685850735 1502411854
exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502411859
_dash_2000
\change_unchanged
_tcp_newreno_run
\change_inserted 1685850735 1502411918
_
\change_unchanged
1, we can continue the analysis with this command:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_all:resume_id= 
\change_inserted 1685850735 1502411838
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502411844
dash_2000_
\change_unchanged
tcp_newreno_run_1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_tcp_stat – Plot arbitrary TCP statistic over time
\end_layout

\begin_layout Standard
The analyse_tcp_stat function can be used to plot any TCP statistic from
 SIFTR or Web10G logs.
 Th
\change_inserted 1685850735 1489725610
is
\change_deleted 1685850735 1489725609
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the 
\family typewriter
\size small
io_filter 
\family default
\size default
parameter described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:filtering_siftr_analysis"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Selecting statistic
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
siftr_index
\family default
\size default
 defines the index of the column of the statistic to plot for SIFTR log
 files.
 The parameter 
\family typewriter
\size small
web10g_index
\family default
\size default
 defines the index of the column of the statistic to plot for Web10G log
 files.
 The start index for both parameters is 1, which selects the statistic in
 the first column.
 If one has only SIFTR or only Web10G log files the other index does not
 need to be specified.
 But for experiments with SIFTR 
\emph on
and
\emph default
 Web10G log files both indexes must be specified.
 By default both indexes are set to plot CWND.
 The lists of available statistics (including the column numbers) are in
 the SIFTR README 
\begin_inset CommandInset citation
LatexCommand cite
key "siftr-readme"

\end_inset

 and the Web10G documentation 
\begin_inset CommandInset citation
LatexCommand cite
key "web10g-stats"

\end_inset

.
\end_layout

\begin_layout Subsubsection
Adjusting y-axis label and scaler
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
ylabel
\family default
\size default
 can be used to set the y-axis label to a user-defined string.
 The parameter 
\family typewriter
\size small
yscaler
\family default
\size default
 can be used to scale the extracted data values by a user-defined factor.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
We can plot the number of kilo bytes in the send buffer at any given time
 with the command:
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
This command works with web10g version 2.0.9 logs.
 Use web10g_index=116 when parsing web10g version 2.0.7 logs.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_tcp_stat:test_id=
\change_inserted 1685850735 1494299043
 
\change_deleted 1685850735 1489538898
 
\change_inserted 1685850735 1502412019
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502412023
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502412029
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1494299047
.
\change_unchanged
/results,
\change_inserted 1685850735 1494299059
 
\change_deleted 1685850735 1489538902
 
\change_unchanged
siftr_index=22,
\change_inserted 1685850735 1502412039
 
\change_unchanged
web10g_index=120,
\change_deleted 1685850735 1489538904
 
\change_unchanged
ylabel="Snd buf (kbytes)",yscaler=0.001
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_ackseq – Plot acknowledged bytes or dupACKSs over time
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:analyse_ackseq"

\end_inset


\end_layout

\begin_layout Standard
This task plots the cumulative number of bytes acknowledged or the cumulative
 number of dupACKs for TCP flows.
 Th
\change_inserted 1685850735 1489725616
is
\change_deleted 1685850735 1489725616
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 
\end_layout

\begin_layout Standard
It also has the burst separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
, 
\family typewriter
\size small
eburst
\family default
\size default
.
 If 
\family typewriter
\size small
burst_sep
\family default
\size default
 is set to 0, data will not be separated according to bursts and the plot
 will show acknowledged bytes or dupACKs for the whole flow.
 If 
\family typewriter
\size small
burst_sep
\family default
\size default
 is set to 1, each burst between idle times will be plotted as separate
 data series and the acknowledged bytes or dupACKs are normalised to that
 they are zero at the start of each burst.
 The parameters 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 can be used to select the bursts to be plotted (assuming 
\family typewriter
\size small
burst_sep
\family default
\size default
 is not set to 0).
 Both start with an index of 1.
 Setting 
\family typewriter
\size small
eburst=0
\family default
\size default
 means to end with the last burst.
\end_layout

\begin_layout Standard
Note that since analyse_ackseq processes the acknowledgement number stream,
 
\family typewriter
\size small
source_filter
\family default
\size default
 needs to be specified in the opposite direction as for other tasks.
 For example, if we want to plot the throughput for a source 172.16.10.60 we
 set 
\family typewriter
\size footnotesize
source_filter=
\change_inserted 1685850735 1494301752

\size small

\begin_inset Quotes erd
\end_inset


\change_unchanged

\size footnotesize
S_172.16.10.60_*
\change_inserted 1685850735 1494301758

\size small

\begin_inset Quotes erd
\end_inset


\change_unchanged

\family default
\size default
, but to plot the acknowledged bytes for this source we have to use 
\family typewriter
\size footnotesize
source_filter=
\change_inserted 1685850735 1494301776

\size small

\begin_inset Quotes erd
\end_inset


\change_unchanged

\size footnotesize
D_172.16.10.60_*
\change_inserted 1685850735 1494301772

\size small

\begin_inset Quotes erd
\end_inset


\change_unchanged

\family default
\size default
.
\end_layout

\begin_layout Subsubsection
Choosing between bytes and dupACKs
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
dupacks
\family default
\size default
 allows t
\change_inserted 1685850735 1494295835
he ability to
\change_deleted 1685850735 1494295830
o
\change_unchanged
 choose whether acknowledged bytes (
\family typewriter
\size small
dupacks
\family default
\size default
=0, default) or dupACKs (
\family typewriter
\size small
dupacks
\family default
\size default
=1) are plotted.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example of how to use th
\change_inserted 1685850735 1489725628
is
\change_deleted 1685850735 1489725628
e
\change_unchanged
 task to plot per burst acknowledged bytes omitting the first burst (assuming
 the gaps between bursts are at least 1 second long):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_ackseq:test_id=
\change_inserted 1685850735 1494299090
 
\change_deleted 1685850735 1489538917
 
\change_inserted 1685850735 1502412197
exp_
\change_unchanged
20131206-102931_tcp_newreno
\change_inserted 1685850735 1502412201
_run_0
\change_unchanged
,
\change_inserted 1685850735 1502412210
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542165
.
\change_unchanged
/results,
\change_deleted 1685850735 1489538922
 
\change_unchanged
burst_sep=1.0,sburst=2,
\change_inserted 1685850735 1502412216
 
\change_unchanged
eburst=0
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection

\change_deleted 1685850735 1489536762
anlyse
\change_inserted 1685850735 1489536762
analyse
\change_unchanged
_dash_goodput – Plot DASH-like client goodput over time
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:plot-dash-goodput"

\end_inset


\end_layout

\begin_layout Standard
The analyse_dash_goodput task allows t
\change_inserted 1685850735 1488851794
he
\change_deleted 1685850735 1488851794
o
\change_unchanged
 plot
\change_inserted 1685850735 1488851798
ting of
\change_unchanged
 the goodput for DASH-like traffic over time.
 The plot is based on data from the httperf log files 
\change_inserted 193492759 1517790265
(*_httperf_dash.log.gz) 
\change_deleted 193492759 1517790233
of the DASH-like clients (named <test_id>_httperf_dash.log.gz).
\change_inserted 193492759 1517790260
generated by the start_httperf_dash traffic generator.
 (Note: The use of the start_httperf_dash traffic generator is deprecated
 for TEACUP v1.1 in favor of launching real DASH clients using start_dash_streami
ng_dashjs.)
\end_layout

\begin_layout Standard

\change_deleted 193492759 1517790202
 
\change_unchanged
Th
\change_inserted 1685850735 1489725634
is
\change_deleted 1685850735 1489725634
e
\change_unchanged
 task has the common parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 Note that 
\family typewriter
\size small
ts_correct
\family default
\size default
 has no effect for this task as the timestamps are not taken from log files,
 but are generated based on the nominal request times given by the configuration
 of the DASH-like client.
\end_layout

\begin_layout Subsubsection
Extracting data for specific experiments
\end_layout

\begin_layout Standard
By default th
\change_inserted 1685850735 1489725639
is
\change_deleted 1685850735 1489725639
e
\change_unchanged
 task extracts data from all client log files for all test IDs specified.
 However, if 
\family typewriter
\size small
dash_log_list
\family default
\size default
 is specified 
\change_deleted 1685850735 1489725652
the task
\change_inserted 1685850735 1489725652
this task
\change_unchanged
 extracts the data from the log files listed in a text file (the value of
 
\family typewriter
\size small
dash_log_list
\family default
\size default
 is the file name).
 This allows t
\change_inserted 1685850735 1488851860
he
\change_deleted 1685850735 1488851859
o
\change_unchanged
 explicit
\change_deleted 1685850735 1488851863
ly
\change_unchanged
 list
\change_inserted 1685850735 1488851876
ing of
\change_unchanged
 which dash client logs are used, and these files can also be from experiments
 with different test IDs.
 The format of the log list file is one file name per line.
 The paths do not need to be specified, as TEACUP will automatically find
 the files assuming they are in a sub directory below the fabfile.py directory.
\end_layout

\begin_layout Standard
Note that the number of legend names specified with 
\family typewriter
\size small
lnames
\family default
\size default
 must be equal to the number of files names specified in the log list file
 (if 
\family typewriter
\size small
dash_log_list
\family default
\size default
 is used) or equal to the number of log files with the specified test ID
 (if 
\family typewriter
\size small
dash_log_list
\family default
\size default
 is not used).
 
\end_layout

\begin_layout Subsubsection
Plot nominal goodput
\end_layout

\begin_layout Standard
By default analyse_dash_goodput will also plot the nominal goodput, i.e.
 goodput according to the DASH rate specified in the traffic generation
 configuration.
 The TC_NO_NOMINAL environment variable can be used to tell plot_dash_goodput
 to not plot this.
 If TC_NO_NOMINAL=1 the nominal goodput will not be plotted.
 Note that 
\change_deleted 1685850735 1489725661
the task
\change_inserted 1685850735 1489725661
this task
\change_unchanged
 can only plot a maximum of 11 data series in a single graph.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725667
is
\change_deleted 1685850735 1489725666
e
\change_unchanged
 task can be used as follows: 
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_dash_goodput:
\change_inserted 1685850735 1494299221
 
\change_deleted 1685850735 1489538934
 
\change_unchanged
dash_log_list=dash_logs.txt,
\change_inserted 1685850735 1502412706
 
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542170
.
\change_unchanged
/results
\change_deleted 1685850735 1489538938
/
\change_unchanged
,
\change_deleted 1685850735 1489538940
 
\change_unchanged
lnames="newreno;cdg;vegas"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_goodput – Plot TCP goodput over time
\end_layout

\begin_layout Standard
This task plots goodput for TCP flows
\change_inserted 1685850735 1488851972
,
\change_deleted 1685850735 1488851946
.
 This task plots the
\change_inserted 1685850735 1488851950
 as well as the
\change_unchanged
 total or per-flow goodput over time.
 Th
\change_inserted 1685850735 1489725709
is
\change_deleted 1685850735 1489725708
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the 
\family typewriter
\size small
total_per_experiment_parameter
\family default
\size default
.
\end_layout

\begin_layout Standard
Note that this task is work in progress.
 Currently, the goodput is computed based on the acknowledged bytes over
 time (extract_ackseq).
 This has the side effect that 
\family typewriter
\size small
source_filter
\family default
\size default
 needs to be specified in the opposite direction as for other tasks (see
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:analyse_ackseq"

\end_inset

).
 In the future it would be better to compute the goodput from the TCP sequence
 numbers directly.

\change_inserted 1685850735 1488852444
 
\begin_inset Note Note
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1488852475
This looks like it is still the case, from the analyse.py file.
\change_unchanged

\end_layout

\end_inset


\change_unchanged

\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following command generates a graph of total goodput for the source
 172.16.11.60:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_goodput:test_id=
\change_inserted 1685850735 1494299249
 
\change_deleted 1685850735 1489538946
 
\change_inserted 1685850735 1502412676
exp_
\change_unchanged
20131206-102931_
\change_deleted 1685850735 1502412681
dash_2000_
\change_unchanged
tcp_newreno
\change_inserted 1685850735 1502412685
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494299255
 
\change_deleted 1685850735 1489538948
 
\change_unchanged
source_filter=
\change_inserted 1685850735 1494301600

\begin_inset Quotes erd
\end_inset


\change_unchanged
D_172.16.11.60_*
\change_inserted 1685850735 1494301604

\begin_inset Quotes erd
\end_inset


\change_unchanged
,
\change_inserted 1685850735 1494299264
 
\change_deleted 1685850735 1489538950
 
\change_unchanged
total_per_experiment=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_incast – Plot response times over time (incast)
\end_layout

\begin_layout Standard
The task analyse_incast can be used to plot response times for incast experiment
s over time.
 It plots the response times as reported by httperf (httperf log files are
 present if incast traffic was generated).
 Th
\change_inserted 1685850735 1489725740
is
\change_deleted 1685850735 1489725740
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 
\end_layout

\begin_layout Standard
It also has the burst separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst
\family default
\size default
, and
\family typewriter
\size small
 eburst
\family default
\size default
 (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_rtt"

\end_inset

).
 These allow to select only a subset of the queries, aka bursts, to be plotted.
 
\family typewriter
\size small
sburst
\family default
\size default
 specified the first burst included in the plot (starting from index of
 1) and 
\family typewriter
\size small
eburst
\family default
\size default
 specifies the last burst included in the plot.
 By default, the plot will include the response time of all bursts.
 Note, that 
\family typewriter
\size small
sburst
\family default
\size default
 and 
\family typewriter
\size small
eburst
\family default
\size default
 are currently only supported for the default case of 
\family typewriter
\size small
tcpdump='0'
\family default
\size default
 (see below).
\end_layout

\begin_layout Subsubsection
Filtering on flows
\end_layout

\begin_layout Standard
Note that for analyse_incast flows are bidirectional, and the source of
 an incast flow is always the querier and the destination of an incast flow
 is always one of the responders.
 This needs to be taken into account when using 
\family typewriter
\size small
source_filter
\family default
\size default
.
 For example, to filter the response times for responder 172.16.11.61 one needs
 to specify 
\family typewriter
\size footnotesize
source_filter=
\change_inserted 1685850735 1494301802

\size small

\begin_inset Quotes erd
\end_inset


\change_unchanged

\size footnotesize
D_172.16.11.60_*
\change_inserted 1685850735 1494301809

\size small

\begin_inset Quotes erd
\end_inset


\change_unchanged

\family default
\size default
.
\end_layout

\begin_layout Subsubsection
Boxplots instead of lines
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725751
is
\change_deleted 1685850735 1489725750
e
\change_unchanged
 task has a 
\family typewriter
\size small
boxplot
\family default
\size default
 parameter.
 If this parameter is set to `1', instead of plotting one line for the response
 times of each flow, a boxplot is generated for each point in time that
 captures the distribution of response times over all flows (default is
 `0').
 
\end_layout

\begin_layout Subsubsection
Selecting data source
\end_layout

\begin_layout Standard
By default analyse_incast extracts the data from the httperf log files.
 Alternatively, if 
\family typewriter
\size small
tcpdump 
\family default
\size default
is set to `1' th
\change_inserted 1685850735 1489725759
is
\change_deleted 1685850735 1489725759
e
\change_unchanged
 task will extract the response times from the tcpdump files collected at
 the querier (time between seeing the GET and the last packet of the response).
 If 
\family typewriter
\size small
tcpdump 
\family default
\size default
is set to `1', the parameter 
\family typewriter
\size small
query_host 
\family default
\size default
must be set to the host name of the querier (as specified in the config
 file).
 
\end_layout

\begin_layout Subsubsection
Slowest response only
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725766
is
\change_deleted 1685850735 1489725764
e
\change_unchanged
 task has a parameter 
\family typewriter
\size small
slowest_only
\family default
\size default
 (default is `0').
 If 
\family typewriter
\size small
slowest_only
\family default
\size default
 is set to `1', instead of plotting separate data for each flow, 
\change_deleted 1685850735 1489725776
the task
\change_inserted 1685850735 1489725776
this task
\change_unchanged
 will only plot the slowest response time over all flows for each burst.
 If 
\family typewriter
\size small
slowest_only
\family default
\size default
 is set to `2', instead of plotting separate data for each flow, 
\change_deleted 1685850735 1489725778
the task
\change_inserted 1685850735 1489725778
this task
\change_unchanged
 will only plot the time between the first request sent and the time the
 last response was finished for each burst (default is `0').
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following shows an example where we plot the slowest response time for
 each burst based on the times in the httperf logs:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_incast:
\change_deleted 1685850735 1489538957
 
\change_unchanged
test_id=
\change_inserted 1685850735 1502412756
 exp_
\change_unchanged
20140704-181632_incast_tcp_newreno
\change_inserted 1685850735 1502412760
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494299367
 
\change_deleted 1685850735 1489538962
 ,
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542176
.
\change_unchanged
/results
\change_deleted 1685850735 1489538965
/
\change_unchanged
,
\change_deleted 1685850735 1489538966
 
\change_unchanged
slowest_only='1'
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following shows an example where we plot the response times based on
 tcpdump data (assuming testhost1 was the querier):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_incast:
\change_deleted 1685850735 1489538970
 
\change_unchanged
test_id=
\change_inserted 1685850735 1502412771
 exp_
\change_unchanged
20140704-181632_incast_tcp_newreno
\change_inserted 1685850735 1502412775
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494299363
 
\change_deleted 1685850735 1489538972
 ,
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542177
.
\change_unchanged
/results
\change_deleted 1685850735 1489538974
/
\change_unchanged
,
\change_deleted 1685850735 1489538975
 
\change_unchanged
tcpdump='1',
\change_inserted 1685850735 1494299390
 
\change_deleted 1685850735 1489538978
 
\change_unchanged
query_host=testhost1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_incast_iqtimes – Plot inter-query times (incast)
\end_layout

\begin_layout Standard
This task plots the times between requests sent by the querier (for checking
 whether requests were sent close together in time).
 Th
\change_inserted 1685850735 1489725786
is
\change_deleted 1685850735 1489725785
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the parameter 
\family typewriter
\size small
query_host
\family default
\size default
 that must be used to specify the querier (name as specified in TPCONF_hosts)
 and the parameter 
\family typewriter
\size small
burst_sep
\family default
\size default
 that must be used to specify the time between request bursts (by default
 this is set to 1 second).
\end_layout

\begin_layout Subsubsection
Definition of inter-query time
\end_layout

\begin_layout Standard
By default inter-query time is defined as the time difference between a
 request and the first request in the same burst of requests.
 This allows t
\change_inserted 1685850735 1494295867
he
\change_deleted 1685850735 1494295867
o
\change_unchanged
 view
\change_inserted 1685850735 1494295872
ing of
\change_unchanged
 how far query times are spread within each burst.
 To get a better idea of the timing jitter, the parameter 
\family typewriter
\size small
diff_to_burst_start
\family default
\size default
 can be set to `0', to compute the time differences between each request
 and the previous request within the same burst.
 
\end_layout

\begin_layout Subsubsection
No grouping by responders
\end_layout

\begin_layout Standard
By default response times are extracted and plotted separately (in different
 colours) for each responder.
 The parameter 
\family typewriter
\size small
by_responder
\family default
\size default
 can be set to `1' to extract only one file with all response times and
 plot the response time for all responders in the same colour.
\end_layout

\begin_layout Subsubsection
Cumulative response times
\end_layout

\begin_layout Standard
By default inter-query times are plotted against the time they occurred.
 Th
\change_inserted 1685850735 1489725793
is
\change_deleted 1685850735 1489725792
e
\change_unchanged
 task also supports a cumulative plot mode to be able to analyse whether
 inter-query times significantly differ between different responders or
 different experiments.
 Setting the parameter 
\family typewriter
\size small
cumulative 
\family default
\size default
to `1' means the inter-query times will be plotted in a cumulative fashion.
 Instead of each y-value being the inter-query time, each y-value will be
 either the current inter-query time plus the duration of all previous bursts
 (if 
\family typewriter
\size small
by_responder
\family default
\size default
=0) or the current inter-query time plus all previous inter-query times
 (if 
\family typewriter
\size small
by_responder
\family default
\size default
=1).
 Note that if 
\family typewriter
\size small
cumulative 
\family default
\size default
is set to `1', 
\family typewriter
\size small
diff_to_burst_start
\family default
\size default
 should be set to `1' (the default), otherwise the resulting graph is hard
 to interpret.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following command plots the inter-query times as computed in different
 colours for each host (assuming the querier was testhost1):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_incast_iqtimes:
\change_deleted 1685850735 1489538986
 
\change_unchanged
test_id=
\change_inserted 1685850735 1502413033
 exp_
\change_unchanged
20140704-181632_incast_tcp_newreno
\change_inserted 1685850735 1502413037
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494299420
 
\change_deleted 1685850735 1489538991
 ,
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542182
.
\change_unchanged
/results
\change_deleted 1685850735 1489538993
/
\change_unchanged
,
\change_deleted 1685850735 1489538994
 
\change_unchanged
query_host=testhost1,
\change_inserted 1685850735 1494299425
 
\change_deleted 1685850735 1489538996
 
\change_unchanged
cumulative=0
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following command plots the inter-query times in a cumulative fashion
 separately for each responder (again assuming the querier was testhost1):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_incast_iqtimes:
\change_deleted 1685850735 1489539000
 
\change_unchanged
test_id=
\change_inserted 1685850735 1502413041
 exp_
\change_unchanged
20140704-181632_incast_tcp_newreno
\change_inserted 1685850735 1502413045
_run_0
\change_unchanged
,
\change_inserted 1685850735 1494299421
 
\change_deleted 1685850735 1489539003
 ,
\change_unchanged
out_dir=.
\change_inserted 1685850735 1489542183
.
\change_unchanged
/results
\change_deleted 1685850735 1489539004
/
\change_unchanged
,
\change_deleted 1685850735 1489539005
 
\change_unchanged
query_host=testhost1,
\change_inserted 1685850735 1494299424
 
\change_deleted 1685850735 1489539006
 
\change_unchanged
cumulative=1,by_responder=1
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1489623238
analyse_owd – Plot OWD over time
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489725799
This task plots the OWD being experienced, for the specified traffic flows.
 This task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 It also has the burst separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst 
\family default
\size default
and
\family typewriter
\size small
 eburst
\family default
\size default
 (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_rtt"

\end_inset

).
 The extra parameters 
\family typewriter
\size small
anchor_map,owd_midpoint 
\family default
\size default
and 
\family typewriter
\size small
seek_window
\family default
\size default
 can also be used (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_owd"

\end_inset

).
\end_layout

\begin_layout Subsubsection

\change_inserted 1685850735 1489623238
Examples
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489623238
The following command plots the OWD being experienced for two flows originating
 from the same source:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489623238
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1489623238


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502413094

\family typewriter
\size footnotesize
> fab analyse_owd:test_id= exp_20141003-111821_tcp_newreno_run_0, out_dir=../resul
ts,source_filter= 
\begin_inset Quotes erd
\end_inset

S_172.16.10.2:10000;S_172.16.10.2:10001
\begin_inset Quotes erd
\end_inset


\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1489623238

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_pktloss – Plot packet loss 
\change_deleted 193492759 1517996071
rate
\change_inserted 193492759 1517996072
versus time
\change_unchanged

\end_layout

\begin_layout Standard
This task plots the packet loss rate 
\change_deleted 1685850735 1488852904
in
\change_deleted 193492759 1517995832
as a percentage, 
\change_unchanged
for 
\change_deleted 1685850735 1488852916
emulated FPS game
\change_inserted 1685850735 1488852920
the specified
\change_unchanged
 traffic flows
\change_inserted 193492759 1517995897
, either loss events versus time or cumulative loss count versus time
\change_unchanged
.
 Th
\change_inserted 1685850735 1489725806
is
\change_deleted 1685850735 1489725804
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
test_id
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 
\change_inserted 193492759 1517997266
It also has the burst separation parameters 
\family typewriter
\size small
burst_sep
\family default
\size default
, 
\family typewriter
\size small
sburst 
\family default
\size default
and
\family typewriter
\size small
 eburst
\family default
\size default
 (explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_rtt"

\end_inset

).
 
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1489623079
The 
\change_inserted 193492759 1517997262
additional 
\change_inserted 1685850735 1489623079
parameter 
\family typewriter
\size small
log_loss
\change_inserted 193492759 1517997262
=1
\change_inserted 1685850735 1489623079
 
\change_inserted 193492759 1517997262

\family default
\size default
requests a graph of loss events versus time, while 
\family typewriter
\size small
log_loss=2
\family default
\size default
 (the default) requests a graph of cumulative count of loss events versus
 time 
\change_deleted 193492759 1517995972
can also be used to plot either a cumulative or individual packet loss graph
 
\change_inserted 1685850735 1489623079
(explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_pktloss"

\end_inset

).
\change_deleted 193492759 1517996054

\end_layout

\begin_layout Standard

\change_deleted 193492759 1517996054
Packet loss is computed from the raw data by computing the percentage of
 lost packets for each time window.
 The environment variables TC_AGGR_WINDOW_SIZE and TC_AGGR_INT_FACTOR can
 be used to control the window size and oversampling.
\change_unchanged

\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard

\change_deleted 1685850735 1489623104
The following command plots the packet loss rate for two game traffic flows
 originating from the same source
\change_inserted 1685850735 1489623104
The following command plots the cumulative packet loss rate for a game traffic
 flow
\change_unchanged
:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_pktloss:
\change_deleted 1685850735 1489623186
 test_id=20141003-111821_game_traffic_aqm_pfifo, ,out_dir=./results/, source_filt
er=
\begin_inset Quotes erd
\end_inset

S_172.16.10.2:10000; S_172.16.10.2:10001
\begin_inset Quotes erd
\end_inset


\change_inserted 1685850735 1502413345
test_id= exp_20141003-111821_tcp_newreno_run_0, out_dir=../results,source_filter=
 
\begin_inset Quotes erd
\end_inset

S_172.16.10.2:10000
\begin_inset Quotes erd
\end_inset

,log_loss=2
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\change_inserted 1685850735 1489536281

\end_layout

\begin_layout Subsection
analyse_cmpexp – Plot metric depending on experiment variables 
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:plot-metric-comparison"

\end_inset


\end_layout

\begin_layout Standard
The task analyse_cmpexp allows t
\change_inserted 1685850735 1488855160
he
\change_deleted 1685850735 1488855160
o
\change_unchanged
 plot
\change_inserted 1685850735 1488855170
ting of
\change_unchanged
 the metrics `throughput', `spprtt', `tcprtt' (unsmoothed/ERTT), `cwnd',
 `tcpstat', `ackseq', `restime' and `iqtime' depending on the different
 experiment parameters for different selected flows.
 It can show the metric distribution as boxplots (default), or plot the
 mean or median.
 Th
\change_inserted 1685850735 1489725863
is
\change_deleted 1685850735 1489725862
e
\change_unchanged
 task has the standard parameters 
\family typewriter
\size small
etime
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
omit_const
\family default
\size default
,
\family typewriter
\size small
 out_dir
\family default
\size default
,
\family typewriter
\size small
 out_name
\family default
\size default
, 
\family typewriter
\size small
pdf_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
,
\family typewriter
\size small
 source_filter
\family default
\size default
,
\family typewriter
\size small
 stime
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, 
\family typewriter
\size small
ymin
\family default
\size default
, and
\family typewriter
\size small
 ymax
\family default
\size default
.
 However, a few of these parameters are handled slightly differently (explained
 below).
\end_layout

\begin_layout Subsubsection
Specifying test IDs
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725869
is
\change_deleted 1685850735 1489725868
e
\change_unchanged
 task has no 
\family typewriter
\size footnotesize
test_id
\family default
\size default
 parameter.
 The 
\family typewriter
\size footnotesize
exp_list
\family default
\size default
 parameter allows t
\change_inserted 1685850735 1488855388
he
\change_deleted 1685850735 1488855387
o
\change_unchanged
 specif
\change_inserted 1685850735 1488855391
ication
\change_deleted 1685850735 1488855390
y
\change_unchanged
 
\change_inserted 1685850735 1488855396
of 
\change_unchanged
a text file containing the list of experiments
\change_inserted 1685850735 1488855541
, the same
\change_unchanged
 as for analyse_all (one experiment
\change_inserted 193492759 1517687021
's
\change_unchanged
 
\change_inserted 193492759 1517687025
test
\change_unchanged
ID per line), making it possible to precisely select which combinations
 of parameters should be considered.
 For example, we can remove certain parameter values by removing all test
 IDs with these values from the list passed via 
\family typewriter
\size footnotesize
exp_list
\family default
\size default
.
 Note that all experiments to be compared must have the same 
\bar under
test ID prefix
\bar default
 and the same parameters varied.
\end_layout

\begin_layout Subsubsection
Specifying the test ID prefix
\end_layout

\begin_layout Standard
Prior to version 0.9 TEACUP identified which variables were used and what
 their names are in the log file names from the config.py file (TPCONF_vary_param
eters and TPCONF_parameter_list).
 This meant that at the time of running analyse_cmpexp, the TPCONF_vary_paramete
rs in config.py had to be the configuration used for the experiment(s) specified
 in 
\family typewriter
\size footnotesize
exp_list
\family default
\size default
.
\end_layout

\begin_layout Standard
Since version 0.9 TEACUP identifies which variables were used and what their
 names are from the experiment file names directly and does not need to
 access config.py.
 In order to reliabl
\change_inserted 1685850735 1488855694
y
\change_deleted 1685850735 1488855694
e
\change_unchanged
 detect the parameter names, the user must specify the test ID prefix format
 (as regular expression) using the parameter 
\family typewriter
\size footnotesize
test_id_prefix
\family default
\size default
.
 By default the parameter is set to `
\change_inserted 193492759 1517687150
exp_
\change_unchanged
[0-9]{8}
\backslash
-[0-9]{6}
\change_deleted 193492759 1517687154
_experiment
\change_unchanged
' (to match the default 
\change_inserted 193492759 1517687122

\family typewriter
exp_
\change_unchanged
YYYYMMDD_HHMMSS
\change_deleted 193492759 1517687132
_experiment
\change_unchanged

\family default
 format for test ID prefixes).
\end_layout

\begin_layout Subsubsection
Intermediate files and final graphs
\end_layout

\begin_layout Standard
Intermediate data must already exist from previous executions of extract
 or analyse tasks, or analyse_cmpexp will trigger extraction of the data
 itself using the appropriate extract task(s).
 This extraction process is controlled by the parameter 
\family typewriter
\size footnotesize
res_dir
\family default
\size default
.
 
\end_layout

\begin_layout Standard
If 
\family typewriter
\size footnotesize
res_dir
\family default
\size default
 is set and points to the existing intermediate files
\begin_inset Foot
status collapsed

\begin_layout Plain Layout
E.g.
 The location given by the 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 parameter to the previously run extract or analyse.
\end_layout

\end_inset

, analyse_cmpexp will search for and use the existing files.
 If files are missing analyse_cmpexp will abort.
 If 
\family typewriter
\size footnotesize
res_dir
\family default
\size default
 is an empty string or unspecified, analyse_cmpexp will run the necessary
 extract tasks and the extracted data will be placed in 
\family typewriter
\size footnotesize
out_dir 
\family default
\size default
(if set) or in the experiment directory (default).
 If you want analyse_cmpexp to explicitly (re-)run the data extraction,
 leave 
\family typewriter
\size footnotesize
res_dir
\family default
\size default
 unset and (optionally) set 
\family typewriter
\size footnotesize
out_dir
\family default
\size default
 with the desired destination for the extracted intermediate files.
\end_layout

\begin_layout Subsubsection
Controlling which data to plot
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
variables
\family default
\size default
 parameter can be a semicolon-separated list of variable names (names as
 used in the log file names) with associate values (separated by an equal
 sign).
 This provides a simple filter, as only experiments are considered where
 the variable(s) had the value(s) specified.
 Note that the equals (=) must be escaped with backslashes, otherwise Fabric
 will parse these.
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size footnotesize
source_filter
\family default
\size default
 works as explained in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-series-selection"

\end_inset

 and must be specified to control for which flows the metrics will be plotted.
\end_layout

\begin_layout Subsubsection
Plot type
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
metric
\family default
\size default
 parameter specifies the metric to plot: `throughput' (default), `spprtt',
 `tcprtt' (unsmoothed/ERTT), `cwnd', `tcpstat', `ackseq', `restime' and
 `iqtime'.
 The 
\family typewriter
\size footnotesize
ptype
\family default
\size default
 parameter specifies the plot type: `box' (default), `mean', or `median'.
 
\end_layout

\begin_layout Subsubsection
Plot scaling, legend and labeling
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
ymin
\family default
\size default
 and 
\family typewriter
\size footnotesize
ymax
\family default
\size default
 parameters allow to specify custom minimum and maximum values for the y-axis
 (as for the other analyse tasks).
 The 
\family typewriter
\size footnotesize
lnames
\family default
\size default
 parameter allows t
\change_inserted 1685850735 1494295894
he
\change_deleted 1685850735 1494295894
o
\change_unchanged
 specif
\change_inserted 1685850735 1494295897
ication
\change_deleted 1685850735 1494295896
y
\change_inserted 1685850735 1494295906
 of
\change_unchanged
 the legend names used as list of semicolon-separated strings (as for the
 other analyse tasks).
 Note, the number of legend strings must the same as the number of source
 filters.
 By default the legend names are the source filters specified.
 
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
stime
\family default
\size default
 and 
\family typewriter
\size footnotesize
etime
\family default
\size default
 parameters allow to plot data for selected time windows only.
 In contrast to the other tasks this is not zooming (as there is no time
 axis), but all the data series are actually filtered to only contain values
 from inside the time window prior to plotting the data.
\end_layout

\begin_layout Standard
Currently it is not possible to reorder the different parameters for plotting
 other than by generating a custom experiment ID list.
 The default order is the order specified in the config (which is the same
 as the order in the file names).
 By default the x-axis labels contains all variable parameters, even the
 ones that had only one value (and were de-facto constant).
 The Boolean parameter 
\family typewriter
\size footnotesize
omit_const_xlab_vars
\family default
\size default
 allows t
\change_inserted 1685850735 1494295939
he ability to
\change_deleted 1685850735 1494295937
o
\change_unchanged
 automatically exclude constant variables from the x-axis labels.
 If set to `1' any variables that always had the same value in all experiments
 do not appear in the x-axis labels.
\end_layout

\begin_layout Subsubsection
Grouping flows
\end_layout

\begin_layout Standard
By default analyse_cmpexp groups experiments by traffic flow, meaning each
 group in the plot is for one traffic flow, identified by a unique flow
 tuple (source IP, source port, destination IP, destination port), regardless
 of the series of experiments (test ID prefix) in which the traffic was
 produced.
 The Boolean parameter 
\family typewriter
\size footnotesize
group-by-experiment
\family default
\size default
 allows t
\change_inserted 1685850735 1494295964
he ability to
\change_deleted 1685850735 1494295962
o
\change_unchanged
 group by test ID prefix instead by setting 
\family typewriter
\size footnotesize
group-by-experiment=1
\family default
\size default
.
 With this each group in the plot relates to a particular series of experiments
 (identified by a test ID prefix) and the actual flow tuples can differ
 for different test ID prefixes.
 Of course in this case the number of (filtered) flows must be the same
 for all series of experiments and also the flows must be comparable across
 different series, i.e.
 the same type of test traffic was used in all series of experiments.
\end_layout

\begin_layout Subsubsection
Merging data
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size footnotesize
merge_data
\family default
\size default
 specifies whether to merge the extracted data over all flows/responders
 per experiment.
 By default (
\family typewriter
\size footnotesize
merge_data=0
\family default
\size default
) data for each flow/responder is plotted as separate box/median/mean.
 If 
\family typewriter
\size footnotesize
merge_data=1
\change_inserted 1685850735 1488863972
,
\change_unchanged

\family default
\size default
 only one box/median/mean will be plotted for each experiment.
 Note, TEACUP simply merges all types of data – the user must decide whether
 merging actually makes sense.
\end_layout

\begin_layout Subsubsection
Metric specific parameters
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725880
is
\change_deleted 1685850735 1489725879
e
\change_unchanged
 task has a number of metric specific parameters that are passed to the
 appropriate extract functions and/or select the data columns in the interim
 data files needed.
 
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size footnotesize
link_len
\family default
\size default
 defines whether to use IP layer packet length or link layer packet length
 for metric `throughput' (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_pktsizes"

\end_inset

).
 The parameter 
\family typewriter
\size footnotesize
smoothed
\family default
\size default
 defines the type of RTT for metric `tcprtt' (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:analyse_tcp_rtt"

\end_inset

).
 The parameter 
\family typewriter
\size footnotesize
stat_index 
\family default
\size default
defines the statistic to be extracted and plotted for metric `tcpstat' (see
 Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_tcp_stat"

\end_inset

).
 The parameter 
\family typewriter
\size footnotesize
dupacks 
\family default
\size default
defines whether to plot acknowledged bytes or dupACKs for metric `ackseq'
 (see Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:analyse_ackseq"

\end_inset

), and the parameter 
\family typewriter
\size footnotesize
cum_ackseq 
\family default
\size default
specifies whether to plot the cumulative values (
\family typewriter
\size footnotesize
cum_ackseq=1
\family default
\size default
) or averages per time window (
\family typewriter
\size footnotesize
cum_ackseq=0
\family default
\size default
).
 The parameters 
\family typewriter
\size footnotesize
sburst
\family default
\size default
 and 
\family typewriter
\size footnotesize
eburst
\family default
\size default
 can be used to select the bursts for metrics `ackseq' and `restime'.
 The parameter 
\family typewriter
\size small
slowest_only
\family default
\size default
 can be used to plot the slowest response time for each burst, or the time
 between the first request sent and the last response finished (see Section
 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:extract_incast"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Response time special modes
\end_layout

\begin_layout Standard
If metric is set to `restime', the parameter 
\family typewriter
\size footnotesize
res_time_mode
\family default
\size default
 controls special plot modes for response time plots.
 If 
\family typewriter
\size footnotesize
res_time_mode
\family default
\size default
 is set to 0 the plot is generated as normal.
 
\end_layout

\begin_layout Standard
If 
\family typewriter
\size footnotesize
res_time_mode
\family default
\size default
 is set to 1 in addition to the observed response times the nominal response
 time is plotted as points.
 This only works if the parameters `incSz' (block size), `down' (bandwidth),
 and `responders' (number of responders) are present in all the interim
 data file names.
\begin_inset Foot
status open

\begin_layout Plain Layout
We assume responder to querier traffic was considered the `downstream' direction
 during the actual TEACUP experiment
\end_layout

\end_inset

 The nominal response time is computed as: block_size * number_of_responders
 / (bandwidth / 8).
\end_layout

\begin_layout Standard
If 
\family typewriter
\size footnotesize
res_time_mode
\family default
\size default
 is set to 2 
\emph on
and
\emph default
 
\family typewriter
\size footnotesize
ptype
\family default
\size default
 is set to `median' or `mean', the ratio of observed median/mean response
 time and nominal response time is plotted.
 This only works if the nominal response time can be computed as described
 above.
\end_layout

\begin_layout Subsubsection
Environment variables
\end_layout

\begin_layout Standard
The plotting can be further controlled by task-specific environment variables.
 
\end_layout

\begin_layout Standard
The variable TC_OUTLIER_QUANT removes any points in the lowest TC_OUTLIER_QUANT
 and highest TC_OUTLIER_QUANT quantiles.
 For example, specifying TC_OUTLIER_QUANT=0.01 will remove all data points
 that fall in the <0.01 quantile and all data points that fall in the >0.99
 quantile.
 
\end_layout

\begin_layout Standard
Setting TC_NICER_XLABS=1 will modify the plotting of x-axis labels so that
 variable names are plotted once (on the left side) and only the variable
 values will be plotted at each tick.
 The environment variables TC_YMAX_INC, TC_AGGR_WIN_SIZE, and TC_AGGR_INT_FACTOR
 can also be used and work as explained in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:plot-env-vars"

\end_inset

.
\end_layout

\begin_layout Standard
The variable TC_DIFF=1 can be set to convert cumulative data into non-cumulative
 data.
 Effectively the data vector of non-cumulative values is generated by taking
 the differences of subsequent values of the original cumulative data vector.
\end_layout

\begin_layout Standard
The variable TC_NO_BARS=1 can be set to plot points instead of the default
 bars when 
\family typewriter
\size footnotesize
ptype
\family default
\size default
 is set to `median' or `mean'.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following command shows an example, where we plot TCP RTT as boxplots:
 
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_cmpexp:exp_list=
\change_deleted 1685850735 1489541718
 
\change_unchanged
myexp_list.txt,
\change_inserted 1685850735 1494299587
 
\change_unchanged
res_dir=".
\change_inserted 1685850735 1489542304
.
\change_unchanged
/results
\change_deleted 1685850735 1489541721
/
\change_unchanged
",
\change_inserted 1685850735 1494299740
 
\change_deleted 1685850735 1489541723
 
\change_unchanged
variables="run
\backslash
=0",
\change_deleted 1685850735 1489541725
 
\change_unchanged
source_filter=
\change_inserted 1685850735 1494299697
 
\change_deleted 1685850735 1489541726
 
\change_unchanged
"D_172.16.10.2_5001;D_172.16.10.3_5006",
\change_inserted 1685850735 1494299723
 
\change_deleted 1685850735 1489541729
 
\change_unchanged
metric=tcprtt,
\change_deleted 1685850735 1494299607
 
\change_unchanged
lnames="CDG;Newreno"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
analyse_2
\change_inserted 1685850735 1488864802
d
\change_unchanged
_density – Plot two metrics against each other depending on experiment variables
\end_layout

\begin_layout Standard
The analyse_2
\change_inserted 1685850735 1488864804
d
\change_unchanged
_density task can create 2-dimensional density plots or ellipse plots allowing
 to explore the relationship between two metrics depending on different
 experiment parameter combinations.
 It supports the same metrics as analyse_cmpexp: `throughput', `spprtt',
 `tcprtt' (unsmoothed/ERTT), `cwnd', `tcpstat', `ackseq', `restime' and
 `iqtime'.
 Th
\change_inserted 1685850735 1489725889
is
\change_deleted 1685850735 1489725889
e
\change_unchanged
 task has the standard parameters
\change_inserted 1685850735 1488864683
 
\family typewriter
\size small
etime
\family default
\size default
,
\change_unchanged
 
\family typewriter
\size small
out_dir
\family default
\size default
, 
\family typewriter
\size small
replot_only
\family default
\size default
, 
\family typewriter
\size small
source_filter
\family default
\size default
,
\change_inserted 1685850735 1488864704
 
\change_deleted 193492759 1517548087
stime
\change_inserted 193492759 1517548087

\family typewriter
\size small
stime
\change_inserted 1685850735 1488864704

\family default
\size default
,
\change_unchanged

\family typewriter
\size small
 ymin
\family default
\size default
, 
\family typewriter
\size small
ymax
\family default
\size default
, 
\family typewriter
\size small
lnames
\family default
\size default
, 
\family typewriter
\size small
out_name
\family default
\size default
, 
\family typewriter
\size small
min_values
\family default
\size default
, 
\family typewriter
\size small
ts_correct
\family default
\size default
, and 
\family typewriter
\size small
pdf_dir
\family default
\size default
.
 A few of these parameters are handled slightly differently (explained below).
\end_layout

\begin_layout Standard
Please note that this task is somewhat experimental and still under development.

\change_inserted 1685850735 1488864745
 
\begin_inset Note Note
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1488864754
Possibly still the case
\change_unchanged

\end_layout

\end_inset


\change_unchanged

\end_layout

\begin_layout Subsubsection
Specifying test IDs
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725894
is
\change_deleted 1685850735 1489725893
e
\change_unchanged
 task has no 
\family typewriter
\size footnotesize
test_id
\family default
\size default
 parameter.
 The 
\family typewriter
\size footnotesize
exp_list
\family default
\size default
 parameter allows t
\change_inserted 1685850735 1494296046
he
\change_deleted 1685850735 1494296046
o
\change_unchanged
 specif
\change_inserted 1685850735 1494296050
ication
\change_deleted 1685850735 1494296049
y
\change_inserted 1685850735 1494296055
 of
\change_unchanged
 a text file containing the list of experiments as for analyse_cmpexp.
 Also, as for analyse_cmpexp, the parameter 
\family typewriter
\size footnotesize
test_id_prefix
\family default
\size default
 must be specified in case the test ID prefix used is not the standard prefix.
\end_layout

\begin_layout Subsubsection
Intermediate files and final graphs
\end_layout

\begin_layout Standard
Intermediate data must already exist from previous executions of extract
 or analyse tasks, or analyse_2d_density will trigger extraction of the
 data itself using the appropriate extract task(s).
 This extraction process is controlled by the parameter 
\family typewriter
\size footnotesize
res_dir
\family default
\size default
 as described for analyse_cmpexp.
\end_layout

\begin_layout Subsubsection
Controlling which data to plot
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
variables
\family default
\size default
 parameter can be a semicolon-separated list of variable names (names as
 used in the log file names) with associate values (separated by an equal
 sign).
 This provide a simple filter, as only experiments are considered where
 the variable(s) had the value(s) specified.
 Note that the equals (=) must be escaped with backslashes, otherwise Fabric
 will parse these.
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size footnotesize
source_filter
\family default
\size default
 works as explained in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Data-series-selection"

\end_inset

 and must be specified to control for which flows the metrics will be plotted.
\end_layout

\begin_layout Subsubsection
Plot type
\end_layout

\begin_layout Standard
The 
\family typewriter
\size footnotesize
xmetric
\family default
\size default
 parameter specifies the metric for the x-axis and the 
\family typewriter
\size footnotesize
ymetric
\family default
\size default
 parameter specifies the metric for the y-axis.
 Both parameter values must be selected from the set of available metrics.
\end_layout

\begin_layout Subsubsection
Axis limits
\end_layout

\begin_layout Standard

\change_deleted 1685850735 1488865023
Instead of the usual parameters 
\family typewriter
\size small
stime
\family default
\size default
,
\family typewriter
\size small
 etime
\family default
\size default
,
\change_inserted 1685850735 1489536144
Initially
\change_unchanged
 analyse_2d_density 
\change_inserted 1685850735 1488865044
used 
\change_deleted 1685850735 1488865035
has 
\change_unchanged
the parameters 
\family typewriter
\size small
xmin
\family default
\size default
,
\family typewriter
\size small
 xmax
\family default
\size default
 for limiting the x-axis values.

\change_inserted 1685850735 1488865110
 Support 
\change_inserted 193492759 1517548055
now exists 
\change_inserted 1685850735 1488865110
for using
\change_unchanged
 
\change_inserted 1685850735 1488865253

\family typewriter
\size small
stime
\family default
\size default
 and 
\change_deleted 193492759 1517548045
etime
\change_inserted 193492759 1517548045

\family typewriter
\size small
etime
\change_inserted 1685850735 1488865253

\family default
\size default
 to do the same thing
\change_deleted 193492759 1517548059
 now exist
\change_inserted 1685850735 1488865253
.
 
\change_unchanged
Note that due to the internals of a different plotting function used (R
 ggplot2), the parameters 
\family typewriter
\size small
xmin
\family default
\size default
,
\family typewriter
\size small
 xmax
\family default
\size default
,
\family typewriter
\size small
 ymin
\family default
\size default
,
\family typewriter
\size small
 ymax 
\family default
\size default
do not only zoom-in on the data, they actually filter out any data points
 outside of the specified limits.
\end_layout

\begin_layout Subsubsection
Grouping
\end_layout

\begin_layout Standard
The parameter 
\family typewriter
\size small
group_by
\family default
\size default
 can be used to specify the different groups.
 Each group will be plotted in a different colour and will appear as a separate
 entry in the legend.
 The value must be set to the name of a parameter varied during the experiment
 (the name of the variable in the file names).
 By default 
\family typewriter
\size small
group_by
\family default
\size default
 is set to `aqm'.
\end_layout

\begin_layout Subsubsection
Merging data
\end_layout

\begin_layout Standard
The parameters 
\family typewriter
\size footnotesize
merge_xdata
\family default
\size default
 and 
\family typewriter
\size footnotesize
merge_ydata
\family default
\size default
 specify whether to merge the extracted data over all flows/responders per
 experiment for the x-axis and/or y-axis.
 If set to `0' data is extracted per flow/responder and for the plot a single
 flow needs to be selected with 
\family typewriter
\size footnotesize
source_filter
\family default
\size default
.
 If set to `1' 
\family typewriter
\size footnotesize
source_filter
\family default
\size default
 can be used to select multiple flows, i.e.
 by using a wildcard for the port number, and the data for all flows will
 be merged.
 Note that TEACUP simply merges all types of data, it is the user's responsibili
ty to decide whether it makes sense to merge the data.
\end_layout

\begin_layout Subsubsection
Metric specific parameters
\end_layout

\begin_layout Standard
Th
\change_inserted 1685850735 1489725899
is
\change_deleted 1685850735 1489725899
e
\change_unchanged
 task has a number of metric specific parameters that are passed to the
 extract functions and/or select the data columns in the interim data files
 needed.
 It has all the metric-specific parameters of analyse_cmpexp, except 
\family typewriter
\size footnotesize
stat_index
\family default
\size default
.
 Instead of 
\family typewriter
\size footnotesize
stat_index 
\family default
\size default
analyse_2d_density has the parameters 
\family typewriter
\size footnotesize
xstat_index
\family default
\size default
 and 
\family typewriter
\size footnotesize
ystat_index
\family default
\size default
 to specify the indexes for both axes.
 
\family typewriter
\size footnotesize
xstat_index
\family default
\size default
 must be set if 
\family typewriter
\size footnotesize
xmetric=tcpstat
\change_inserted 1685850735 1488865289

\family default
\size default
, 
\change_deleted 1685850735 1488865288
 
\change_unchanged
and 
\family typewriter
\size footnotesize
ystat_index
\family default
\size default
 must be set if 
\family typewriter
\size footnotesize
ymetric=tcpstat
\family default
\size default
.
\end_layout

\begin_layout Subsubsection
Environment variables
\end_layout

\begin_layout Standard
The plotting can be further controlled by task-specific environment variables.
 
\end_layout

\begin_layout Standard
The variable TC_OUTLIER_QUANT removes any points in the lowest TC_OUTLIER_QUANT
 and highest TC_OUTLIER_QUANT quantiles.
 For example, specifying TC_OUTLIER_QUANT=0.01 will remove all data points
 that fall in the <0.01 quantile and all data points that fall in the >0.99
 quantile.
\end_layout

\begin_layout Standard
The variable TC_ELLIPSE controls whether a 2D density plot or a ellipse
 plot will be created.
 By default 2D density plots are created (TC_ELLIPSE=0).
 To create ellipse plots instead set TC_ELLIPSE=1.
 For 2D density plots the PDF files have a `2d_density_plot.pdf' extension
 whereas for ellipse plots the PDF files have a `ellipse_plot.pdf' extension.
\end_layout

\begin_layout Standard
The variable TC_BINS can be used to set the number of bins for the 2D density
 estimation (only effective if TC_ELLIPSE=0).
 By default the number of bins is set to 4.
 The variable TC_ADD_RAND can be used to add randomness to the data (noise
 is drawn from a uniform distribution within the interval of (-0.5, 0.5)).
 By default no randomness is added.
 If 2D density should be plotted (TC_ELLIPSE=0) and the data consists of
 discrete values, the resulting graphs can look better with added randomness
 (TC_ADD_RAND=1).
\end_layout

\begin_layout Standard
The variable TC_MEDIAN can be set to 1 to plot the median for each group.
 By default 
\change_deleted 1685850735 1489725908
the task
\change_inserted 1685850735 1489725908
this task
\change_unchanged
 does not plot the median.
 The variable TC_NO_LEGEND can be set to 1 to suppress the legend, which
 by default is shown to the right of the graph.
\end_layout

\begin_layout Standard
By default only the estimations or ellipses are plotted.
 The variable TC_SCATTER can be set to 1 to superimpose a scatter plot of
 all points on the 2D density or ellipse plot.
\end_layout

\begin_layout Standard
The variable TC_DIFF=1 can be set to convert cumulative data into non-cumulative
 data.
 Effectively the data vector of non-cumulative values is generated by taking
 the differences of subsequent values of the original cumulative data vector.
\end_layout

\begin_layout Subsubsection
Examples
\end_layout

\begin_layout Standard
The following example command plots a 2D density plot for traffic going
 to a particular destination (172.16.11.68 port 5000) with throughput as metric
 on the x-axis and TCP RTT as metric on the y-axis, and three different
 groups based on the AQM method that was used (FIFO, Codel, PIE):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> TC_ADD_RAND=1 fab analyse_2d_density:
\change_deleted 1685850735 1489541747
 
\change_inserted 1685850735 1494299783
 
\change_unchanged
exp_list=
\change_deleted 1685850735 1489541749
 
\change_unchanged
myexp_list.txt,res_dir=".
\change_inserted 1685850735 1489542311
.
\change_unchanged
/results
\change_deleted 1685850735 1489541752
/
\change_unchanged
",
\change_inserted 1685850735 1494299790
 
\change_deleted 1685850735 1489541754
 
\change_unchanged
variables="run
\backslash
=0",source_filter=
\change_inserted 1685850735 1494299819
 
\change_deleted 1685850735 1489541757
 
\change_unchanged
"D_172.16.11.68_5000",xmetric=throughput, ymetric=tcprtt,link_len=1,
\change_deleted 1685850735 1489541762
 
\change_unchanged
group_by=
\begin_inset Quotes erd
\end_inset

aqm
\begin_inset Quotes erd
\end_inset

,
\change_inserted 1685850735 1494299829
 
\change_unchanged
lnames="fifo;codel;pie"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The following example command is the same as the previous, except that now
 we plot an ellipse plot instead of a 2D density plot:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> TC_ELLIPSE=1 TC_ADD_RAND=1 fab analyse_2d_density:
\change_deleted 1685850735 1489541779
 
\change_unchanged
exp_list=myexp_list.txt,
\change_inserted 1685850735 1494299897
 
\change_unchanged
res_dir=".
\change_inserted 1685850735 1489542313
.
\change_unchanged
/results
\change_deleted 1685850735 1489541782
/
\change_unchanged
",
\change_deleted 1685850735 1489541784
 
\change_unchanged
variables="run
\backslash
=0",
\change_inserted 1685850735 1494299905
 
\change_unchanged
source_filter=
\change_deleted 1685850735 1494299907
 
\change_unchanged
"D_172.16.11.68_5000",
\change_inserted 1685850735 1494299931
 
\change_unchanged
xmetric=throughput,
\change_deleted 1685850735 1489541789
 
\change_unchanged
ymetric=tcprtt,link_len=1,
\change_inserted 1685850735 1494299941
 
\change_deleted 1685850735 1489541792
 
\change_unchanged
group_by=
\begin_inset Quotes erd
\end_inset

aqm
\begin_inset Quotes erd
\end_inset

,lnames="fifo;codel;pie"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Limits on series/groups per graph
\end_layout

\begin_layout Standard
Currently the underlying plot function for all time series graphs, such
 as analyse_throughput, analyse_spp_rtt, analyse_cwnd, analyse_tcp_rtt,
 and analyse_tcp_stat, can only plot 12 different time series on a single
 graph.
 If the number of data series to plot is larger than 12, multiple graphs
 are generated with a _<graph_number> at the end of each file name to indicate
 the number of the graph in the series of graphs (graph number starting
 from 1).
 
\end_layout

\begin_layout Standard
The number of groups (corresponding to legend entries) that can be plotted
 in one graph with analyse_cmpexp and analyse_2d_density is limited to 12.
\change_inserted 1685850735 1494566323

\end_layout

\begin_layout Section

\change_inserted 1685850735 1502413917
Teaplot – browser-based tool for animating TEACUP experimental data
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494570252
By default, TEACUP uses its analysis functions to generate results obtained
 from its gathered experimental data, in the form of pdf documents.
 Teaplot adds the ability to use a web browser to animate
\change_deleted 193492759 1517547956
d
\change_inserted 1685850735 1494570252
 these experimental results (Note: This is experimental, so problems may
 exist).
 The processes involved with the usage of Teaplot are described below.
 For extra information such as how it was developed, and any installation
 requirements, please consult the other included Teaplot documentation as
 of TEACUP v1.1.
\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1494569820
Requirements
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494569261
\begin_inset CommandInset label
LatexCommand label
name "sect:usage-1"

\end_inset

 
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
The following assumptions are made when running a TEACUP Fabric task, and
 thus Teaplot:
\end_layout

\begin_layout Itemize

\change_inserted 1685850735 1494568133

\family typewriter
fab
\family default
 is being executed in a directory containing a link to or copy of TEACUP's
 
\family typewriter
fabfile.py
\family default
, and a relevant and properly configured 
\family typewriter
config.py
\family default
 
\end_layout

\begin_layout Itemize

\change_inserted 1685850735 1494568133
The file 
\family typewriter
config.py
\family default
 defines 
\family typewriter
TPCONF_script_path
\family default
, which points to the extracted TEACUP source tree (
\family typewriter
$TEACUP_DIR
\family default
) 
\end_layout

\begin_layout Itemize

\change_inserted 1685850735 1494569854
The Fabfile directory (
\family typewriter
$FABFILE_DIR
\family default
) is home to one or more experiment directories that contain actual raw
 experiment results files.
 
\end_layout

\begin_layout Itemize

\change_inserted 1685850735 1494570257
The required dependencies for Teaplot are installed (see separate Teaplot
 documentation).
\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1494568133
Task Arguments
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568640
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "table:args"

\end_inset

 shows the arguments that can be added to the Fabric task to customise the
 functionality of Teaplot.
 All arguments are optional, and are supplied to the Fabric task like so:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568641
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568641


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568780

\family typewriter
\size footnotesize
> fab animate:arg1="value1",arg2=
\begin_inset Quotes erd
\end_inset

value3
\begin_inset Quotes erd
\end_inset

,...
\change_unchanged

\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568641

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
Values should be enclosed by quote marks (i.e.
 
\family typewriter
"…"
\family default
) or apostrophes (i.e.
 
\family typewriter
'…'
\family default
).
 A value of 
\family typewriter

\begin_inset Quotes erd
\end_inset


\family default
 generally denotes a null, or blank, value.
 For the arguments 
\family typewriter
out_dir
\family default
 and 
\family typewriter
exp_dir
\family default
, a value of 
\family typewriter

\begin_inset Quotes erd
\end_inset


\family default
 indicates that Teaplot should use the current working directory as that
 directory.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133

\family typewriter
exp_list
\family default
 and 
\family typewriter
exp_list
\family default
 are interpreted as relative to the current working directory (the directory
 in which the Fabric task is executed).
 
\family typewriter
out_dir
\family default
 is relative to the experiment directories, as each one is processed by
 TEACUP.
 
\family typewriter
animate_dir
\family default
 is relative to the directory defined by 
\family typewriter
TPCONF_script_path
\family default
.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
Table 
\begin_inset CommandInset ref
LatexCommand ref
reference "table:defaults"

\end_inset

 shows the additional arguments for the Fabric task that relate to the defaults
 to use for the web client.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568958
For example, if the user wishes to have the server listen on IP address
 
\family typewriter
127.0.0.1
\family default
 on port 8000, the fabric task would be as follows:
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568825
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568825


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568923

\family typewriter
\size footnotesize
> fab animate:address="127.0.0.1:8000"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568825

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
\begin_inset Float table
placement t
wide false
sideways false
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
centering
\end_layout

\end_inset

 
\begin_inset Caption Standard

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133
Fabric task arguments for Teaplot
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "table:args"

\end_inset

 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
small 
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
begin{tabular}{l  l}	 	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
textbf{Argument} & 
\backslash
textbf{Description} 
\backslash

\backslash
 
\backslash
toprule 	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{address}      &  
\backslash
pbox{5.5cm}{IP address for the server.
 
\backslash

\backslash
 Default: 
\backslash
texttt{'127.0.0.1'}}  
\backslash

\backslash
 
\backslash
midrule  	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{port}          &  
\backslash
pbox{5.5cm}{Port number for the server.
  
\backslash

\backslash
 Default: 
\backslash
texttt{'8000'}}  
\backslash

\backslash
 
\backslash
midrule  	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{animate
\backslash
_dir} &    
\backslash
pbox{5.5cm}{Teaplot directory containing the Django WSGI application.
  
\backslash

\backslash
 Default: 
\backslash
texttt{animate}} 
\backslash

\backslash
 
\backslash
midrule  	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{out
\backslash
_dir}      &  
\backslash
pbox{5.5cm}{ Directory in which to generate TEACUP intermediate files.
  
\backslash

\backslash
 Default: 
\backslash
texttt{''}} 
\backslash

\backslash
 
\backslash
midrule  	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{processes}    &  
\backslash
pbox{5.5cm}{ Number of uWSGI processes to use.
  
\backslash

\backslash
 Default: 
\backslash
texttt{1}} 
\backslash

\backslash
 
\backslash
midrule  	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{threads}       &  
\backslash
pbox{5.5cm}{Number of uWSGI threads for each process.
  
\backslash

\backslash
 Default: 
\backslash
texttt{1}} 
\backslash

\backslash
 
\backslash
midrule  	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{exp
\backslash
_list}     &  
\backslash
pbox{5.5cm}{ Location of the experiments
\backslash
_completed.txt file generated by TEACUP.
  
\backslash

\backslash
 Default: 	
\backslash
texttt{'experiments
\backslash
_completed.txt'}}  
\backslash

\backslash
 
\backslash
bottomrule 
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
end{tabular}
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
\begin_inset Float table
placement t
wide false
sideways false
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
centering
\end_layout

\end_inset

 
\begin_inset Caption Standard

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133
Fabric task arguments for default client settings
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "table:defaults"

\end_inset

 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
small 	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
begin{tabular}{l  l}	 		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
textbf{Argument} & 
\backslash
textbf{Description} 
\backslash

\backslash
 
\backslash
toprule 		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{source
\backslash
_filter}&  
\backslash
pbox{5.5cm}{TEACUP source filters (semicolon-separated) to use as default
 in the web client.
  
\backslash

\backslash
 Default: 
\backslash
texttt{''}} 	
\backslash

\backslash
 
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{test
\backslash
_id}      &  
\backslash
pbox{5.5cm}{ TEACUP test IDs (semicolon-separated) to use as default in the
 web client.
  
\backslash

\backslash
 Default: 
\backslash
texttt{''}} 
\backslash

\backslash
 	
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{metric}        & 
\backslash
pbox{5.5cm}{Default TEACUP metrics (semicolon-separated).
 
\backslash

\backslash
 Default: 
\backslash
texttt{''}} 
\backslash

\backslash
 
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{graph
\backslash
_count} &  
\backslash
pbox{5.5cm}{Default number of graphs to display.
 
\backslash

\backslash
 Default: 
\backslash
texttt{'1'} } 
\backslash

\backslash
 
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{graph
\backslash
_names}  &  
\backslash
pbox{5.5cm}{ Names of the graphs displayed (semicolon-separated) by default.
  
\backslash

\backslash
 Default: 
\backslash
texttt{''}} 
\backslash

\backslash
 
\backslash
midrule  	
\backslash
texttt{lnames}        &  
\backslash
pbox{5.5cm}{Legend/Flow names to show on the graphs (semicolon-separated).
  
\backslash

\backslash
 Default: 
\backslash
texttt{''}} 
\backslash

\backslash
 
\backslash
midrule  	
\backslash
texttt{siftr}         & 
\backslash
pbox{5.5cm}{ Enable ('1') or disable ('0') SIFTR.
  
\backslash

\backslash
 Default: 
\backslash
texttt{'0'}} 
\backslash

\backslash
 
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{web10g}        & 
\backslash
pbox{5.5cm}{Enable ('1') or disable ('0') web10g.
  
\backslash

\backslash
 Default: 
\backslash
texttt{'0'}} 
\backslash

\backslash
 
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{etime}         & 
\backslash
pbox{5.5cm}{ Default end time in seconds for a new graph.
 
\backslash
texttt{'0'} infers no default end time.
  
\backslash

\backslash
 Default: 	
\backslash
texttt{'0'}} 
\backslash

\backslash
 
\backslash
midrule  		
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

	
\backslash
texttt{stime}         & 
\backslash
pbox{5.5cm}{ Default start time in seconds.
 
\backslash

\backslash
 Default: 
\backslash
texttt{'0'}} 
\backslash

\backslash
 
\backslash
bottomrule 	
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
end{tabular}
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133

\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1494568133
Launching the Client
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
In order to visualise TEACUP experiment data, the following steps should
 be carried out:
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Start the web server component using the method outlined in the previous
 section (ensuring that the IP address and port chosen are reachable by
 the client) 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Open the web browser on the client computer, and navigate to the IP address
 and port pair used by the server 
\begin_inset Newline newline
\end_inset

 e.g.
 
\family typewriter
http://127.0.0.1:8000
\family default
 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
If desired, increase the number of graphs to be shown on-screen by clicking
 the 
\begin_inset Quotes eld
\end_inset

Graph
\begin_inset Quotes erd
\end_inset

 button in the top navigation bar, and then modifying the 
\begin_inset Quotes eld
\end_inset

Number of graphs
\begin_inset Quotes erd
\end_inset

 control as desired.
 Alternatively, restart the server with the desired number as the value
 for the argument 
\family typewriter
graph_count
\family default
.
 The name of each graph can also be optionally set here, or using the argument
 
\family typewriter
graph_names
\family default
.
 
\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1494568133
Selecting Tests and Flows
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
The Teaplot client web UI should now be visible on-screen.
 First, open the metric selection dialogue by clicking 
\begin_inset Quotes eld
\end_inset

Metrics
\begin_inset Quotes erd
\end_inset

 in the navigation bar.
 By default the 
\begin_inset Quotes eld
\end_inset

Data Sources
\begin_inset Quotes erd
\end_inset

 tab should be selected, allowing the selection of one or more of the collapsibl
e test ID's prefix with its corresponding experiments located in each one
 (which the Teaplot server reports it has found in the 
\family typewriter
experiments_completed.txt
\family default
 file identified by 
\family typewriter
exp_list
\family default
).
 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Select the 
\begin_inset Quotes eld
\end_inset

Metrics
\begin_inset Quotes erd
\end_inset

 tab, and select one or more metrics for extraction and processing.
 If SIFTR or Web10G metrics are required, the server should be restarted
 with the additional argument 
\family typewriter
siftr='1'
\family default
 or 
\family typewriter
web10g='1'
\family default
.
 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Click the 
\begin_inset Quotes eld
\end_inset

Update Flows
\begin_inset Quotes erd
\end_inset

 button to send the requested parameters to the server.
 The server will then extract the metric data from the selected experiments.
 The metrics dialogue will close once this operation has successfully completed.
 If an error has occurred, refer to the file 
\family typewriter
teaplot.log
\family default
 inside 
\family typewriter
$FABFILE_DIR
\family default
 for more information.
 This process may take tens of seconds, especially if a specific metric
 and test ID combination has not previously been extracted.
 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Open the 
\begin_inset Quotes eld
\end_inset

Flow
\begin_inset Quotes erd
\end_inset

 dialogue by clicking the 
\begin_inset Quotes eld
\end_inset

Flow
\begin_inset Quotes erd
\end_inset

 button in the navigation bar.
 The metrics and accompanying flows 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
footnotemark[1]
\end_layout

\end_inset

 available for display will be shown here.
 The flows are grouped by collapsible metric boxes, with the corresponding
 experimental IDs selected previously as the Data Source, with the source
 filters available within each being alphabetically sorted.
 The flow start times displayed are calculated relative to the earliest
 flow start time in each group.
 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
footnotemark[2]
\end_layout

\end_inset

 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Select a number of flows to show on the graph using the check boxes.
 Once a flow is selected, it will be added to the 
\begin_inset Quotes eld
\end_inset

Y Axis Flow Mapping
\begin_inset Quotes erd
\end_inset

 table.
 From here, the graph on which to display the data can be selected.
 Furthermore, alternative axis configurations can be selected.
 
\emph on
However
\emph default
, as of version 0.2, selecting anything other than 
\begin_inset Quotes eld
\end_inset

Time
\begin_inset Quotes erd
\end_inset

 for the X Axis and 
\begin_inset Quotes eld
\end_inset

Nothing
\begin_inset Quotes erd
\end_inset

 for the Z Axis is considered experimental; different flow and metric configurat
ions may not work or be compatible.
 
\end_layout

\begin_layout Enumerate

\change_inserted 1685850735 1494568133
Once the desired flows have been selected, click the 
\begin_inset Quotes eld
\end_inset

Update View
\begin_inset Quotes erd
\end_inset

 button to send the request.
 This may take several seconds, as the server must process the data, normalise
 time stamps, and transfer the data for the client, where it is then plotted
 on the appropriate graph.
 The number of flows and total number of data points will heavily influence
 how long this process will take.
 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
footnotemark[3]
\end_layout

\end_inset

 
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494569558
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
footnotetext[1]{
\end_layout

\end_inset

A 
\begin_inset Quotes eld
\end_inset

flow
\begin_inset Quotes erd
\end_inset

 refers to a one-way data stream between an IP address and port pair, shown
 in the format 
\family typewriter
<source IP>_<source port>_<destination IP>_<destination port>
\family default
.
 
\begin_inset Newline newline
\end_inset

 e.g.: 
\family typewriter
172.16.10.3_28176_172.16.11.3_8000
\family default

\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

}
\end_layout

\end_inset

 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
footnotetext[2]{
\end_layout

\end_inset

A 
\begin_inset Quotes eld
\end_inset

group
\begin_inset Quotes erd
\end_inset

 refers to an experiment/test grouping as calculated by TEACUP; a single
 group contains a single test run.
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

}
\end_layout

\end_inset

 
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133


\backslash
footnotetext[3]{
\end_layout

\end_inset

The amount of data transferred between the client and server during this
 process is approximately 1MB per 100,000 data points.
 This could be greatly reduced (if required) through the use of transparent
 HTTP compression such as 
\family typewriter
gzip
\family default
, which could be introduced through the use of a reverse-proxy web-server
 application on the server host.
\begin_inset ERT
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1494568133

}
\end_layout

\end_inset

 
\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1494568133
Interactivity
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
\begin_inset CommandInset label
LatexCommand label
name "sect:interactivity"

\end_inset


\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
Once the 
\begin_inset Quotes eld
\end_inset

Update View
\begin_inset Quotes erd
\end_inset

 process is complete, the dialogue will close and the data will appear on
 the appropriate graphs.
 The X (time) axis limits will automatically adjust to include the entire
 data set; the X axis of each graph is identically scaled, with the same
 start and end times.
 The Y and Z (if selected) axes will automatically scale to include the
 highest value on each graph; these axis are not linked (i.e.
 each graph has its own independent scale).
 If 
\family typewriter
stime
\family default
 or 
\family typewriter
etime
\family default
 arguments were specified with the Fabric task, the graphs will automatically
 adjust the X axis to the designated values.
 If desired, the minimum and maximum values of each axis can be adjusted
 using the sliders in the 
\begin_inset Quotes eld
\end_inset

Control
\begin_inset Quotes erd
\end_inset

 panel.
 These values are represented as percentages of the maximum value on each
 axis.
 All graphs are linked and controlled by the same sliders.
 If no name is currently set for a graph, it will be updated with the metric
 it is currently displaying.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
Individual flows are represented by a single colour, irrespective of metric,
 in order to ease visual comparisons of the same flow on multiple graphs.
 If desired, names can be assigned to individual flows by clicking the flow
 name in the 
\begin_inset Quotes eld
\end_inset

Legend
\begin_inset Quotes erd
\end_inset

 panel, or by providing a semicolon-separated list of names via the 
\family typewriter
lnames
\family default
 argument when starting Teaplot.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
The graph view is controlled using the mouse.
 In 2D view (the default), panning can be achieved by clicking and holding
 the right mouse button, while zooming is achieved using the scroll wheel.
\end_layout

\begin_layout Subsection

\change_inserted 1685850735 1494568133
Button Functions
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
3D view can be toggled (for experimental 3D plots) using the 
\begin_inset Quotes eld
\end_inset

Toggle 3D View
\begin_inset Quotes erd
\end_inset

 button found in the top navigation bar.
 Clicking the 
\begin_inset Quotes eld
\end_inset

Reset View
\begin_inset Quotes erd
\end_inset

 will reset the position of the graph view to the default.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
Clicking 
\begin_inset Quotes eld
\end_inset

Toggle Grid
\begin_inset Quotes erd
\end_inset

 will show or hide the grey dividing lines shown on the graphs.
 The 
\begin_inset Quotes eld
\end_inset

Toggle Controls
\begin_inset Quotes erd
\end_inset

 can be used to show or hide the 
\begin_inset Quotes eld
\end_inset

Control
\begin_inset Quotes erd
\end_inset

 panel described in Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "sect:interactivity"

\end_inset

.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
There are three buttons that essentially act as the Animation functionality
 buttons.
 The 
\begin_inset Quotes eld
\end_inset

Start
\begin_inset Quotes erd
\end_inset

 button begins the graph animation, the duration of which can be controlled
 using the 
\begin_inset Quotes eld
\end_inset

Animation Time
\begin_inset Quotes erd
\end_inset

 slider found in the 
\begin_inset Quotes eld
\end_inset

Controls
\begin_inset Quotes erd
\end_inset

 panel.
 This animation produces a bar which moves left-to-right across all graphs
 simultaneously, 
\begin_inset Quotes eld
\end_inset

uncovering
\begin_inset Quotes erd
\end_inset

 data points as it moves.
 This can be used to visualise the interaction between metrics over time.
 Clicking the 
\begin_inset Quotes eld
\end_inset

Stop
\begin_inset Quotes erd
\end_inset

 button while the animation is running will pause it, which can then be
 resumed by clicking the "Start" button again.
 There is also a 'Reset" button, which can be used to reset the animation
 back to its default position regardless of the animation being paused or
 not.
\end_layout

\begin_layout Standard

\change_inserted 1685850735 1494568133
The 
\begin_inset Quotes eld
\end_inset

Export Command
\begin_inset Quotes erd
\end_inset

 button displays a dialogue containing a list of arguments which can be
 passed to the Fabric task the next time the server task is executed.
 These arguments represent the current state of the web client interface
 and current selections made by the user, so that the user can record these
 arguments and restart the server in more-or-less the same state, with the
 same metrics, for example, at a later time.
 
\change_deleted 1685850735 1494569394

\end_layout

\begin_layout Standard

\end_layout

\begin_layout Section
Customise Plotting
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:customising_plotting"

\end_inset


\end_layout

\begin_layout Standard
The previous section explained some environment variables that a user can
 use to customise the plotting.
 Internally, TEACUP also sets a variety of other environment variables and
 passes them to the plotting script.
 The plotting script reads these environment variables and generates the
 plot based on their values.
 For example, TEACUP sets a variable TC_YLAB with the value being the label
 string plotted on the y-axis.
 All existing environment variables are explained at the beginning of each
 default plot script and the parameters passed are also explained in the
 TEACUP code calling the script (analyse.py).
\end_layout

\begin_layout Standard
All analyse tasks have a parameter called 
\family typewriter
\size small
plot_params
\family default
\size default
 that can be used to override any of the environment variables.
 This allows the user to customise things for which there is no TEACUP task
 parameter, such as the y-axis label.
 For example, we can set environment variables to plot the throughput in
 Megabits per second instead of the default kilobits per second as follows
 (note that any '=' must be escaped, so they are not interpreted by Fabric):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> fab analyse_throughput:test_id= 
\change_inserted 1685850735 1502414807
exp_
\change_unchanged
20131206-102931
\change_deleted 1685850735 1502414811
_dash_2000
\change_unchanged
_tcp_newreno
\change_inserted 1685850735 1502414814
_run_0
\change_unchanged
, plot_params="TC_YLAB
\backslash
=
\backslash
"Throughput (mbps)
\backslash
" TC_YSCALER
\backslash
=0.000008" 
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Furthermore, all analyse tasks have a parameter called 
\family typewriter
\size small
plot_script
\family default
\size default
 that can be used to specify the script used for plotting.
 If this parameter is set, the specified script will be executed instead
 of the default script.
 The default plotting scripts are R scripts located in the teacup source
 directory, so by default 
\family typewriter
\size small
plot_script
\family default
\size default
 looks like this:
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily}"
inline false
status open

\begin_layout Plain Layout

R CMD BATCH --vanilla  
\end_layout

\begin_layout Plain Layout

    <TPCONF_script_path>/<R_script>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The simplest way of customising things is to create a modified R script
 (say <my_R_script>) based on the original plotting script (<R_script>).Then
 one can simply set 
\family typewriter
\size small
plot_script
\family default
\size default
 to:
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily}"
inline false
status open

\begin_layout Plain Layout

R CMD BATCH --vanilla 
\end_layout

\begin_layout Plain Layout

    <TPCONF_script_path>/<my_R_script>
\end_layout

\end_inset


\end_layout

\begin_layout Standard
However, one could also specify an entirely different script written in
 an entirely different scripting language.
\end_layout

\begin_layout Standard
The plot script gets its input from TEACUP via the environment variables.
 The plot script is called with a single command line argument, which is
 a file name for logging output from the script, e.g.
 log messages, warning, or errors.
 The output file is only created if TPCONF_debug_level is greater than 0
 (see 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

).
 The name of the log file is currently hard-coded and corresponds to the
 name of the default R script used for plotting.
\end_layout

\begin_layout Section
Utility Functions
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Utility"

\end_inset


\end_layout

\begin_layout Standard
This section describes some analysis and plotting related utility functions
 TEACUP provides.
 For example, TEACUP provides some functionality to combine multiple graphs
 into a single graph, so results can be compared more easily.
\end_layout

\begin_layout Subsection
Combining graphs
\end_layout

\begin_layout Standard
There are two simple shell scripts to combine different result graphs (different
 PDF files) on a single page for easy comparison.
\begin_inset Foot
status open

\begin_layout Plain Layout
These scripts require that the pdfjam package is installed (on FreeBSD this
 can be installed from the ports tree).
\end_layout

\end_inset

 The assumption is that the TCP congestion control algorithm is the innermost
 parameter varied (i.e.
 the last parameter in the file name).
 
\end_layout

\begin_layout Standard
The script 
\family typewriter
\size footnotesize
tcp_comparison.sh
\family default
\size default
 can be used to combine throughput, RTT, CWND or SPP RTT graphs for up to
 four different TCP congestion control algorithms on one page.
 For example, the following command creates four PDFs, each with four graphs
 for each TCP congestion control algorithm (assuming the test ID is 
\change_inserted 1685850735 1502414981
exp_
\change_unchanged
20131220-182929_del_<delay>_tcp_<tcp_algo>):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> tcp_comparison.sh
\change_inserted 1685850735 1502415052
 
\change_deleted 1685850735 1502415031
 
\change_inserted 1685850735 1502415098

\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502415034

\family typewriter
\size footnotesize
exp_
\change_unchanged
20131220-182929_del_10_tcp test
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The output files are:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily}"
inline false
status open

\begin_layout Plain Layout

test_cwnd_different_tcps.pdf 
\end_layout

\begin_layout Plain Layout

test_spprtt_different_tcps.pdf 
\end_layout

\begin_layout Plain Layout

test_tcprtt_different_tcps.pdf 
\end_layout

\begin_layout Plain Layout

test_throughput_different_tcps.pdf
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The second script 
\family typewriter
\size footnotesize
tcp_comparison_allinone.sh
\family default
\size default
 creates the same PDFs as above but in addition creates one single-page
 PDF with all throughput, RTT, CWND and SPP RTT graphs for up to four TCP
 congestion control algorithms (up to 16 graphs in total).
 It can be used as follows:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> tcp_comparison_allinone.sh 
\change_inserted 1685850735 1502415209
exp_
\change_unchanged
20131220-182929_del_10_tcp test
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The output files are:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\footnotesize\ttfamily}"
inline false
status open

\begin_layout Plain Layout

test_cwnd_different_tcps.pdf 
\end_layout

\begin_layout Plain Layout

test_spprtt_different_tcps.pdf 
\end_layout

\begin_layout Plain Layout

test_tcprtt_different_tcps.pdf 
\end_layout

\begin_layout Plain Layout

test_throughput_different_tcps.pdf
\end_layout

\begin_layout Plain Layout

test_different_tcps_allinone.pdf
\end_layout

\end_inset


\end_layout

\begin_layout Standard
The two scripts are not strictly limited to combining the results for different
 TCP congestion control algorithms.
 They can be used with any last parameter as long as there are no more than
 four values.
 However, part of the output file names is hard-coded.
\end_layout

\begin_layout Standard
To combine graphs with more flexibility one can use the script 
\family typewriter
\size footnotesize
combine_graphs.sh
\family default
\size default
, which is used by the scripts for TCP comparison.
 The script allows t
\change_inserted 1685850735 1494296070
he
\change_deleted 1685850735 1494296069
o
\change_unchanged
 combin
\change_inserted 1685850735 1494296074
ation of
\change_deleted 1685850735 1494296072
e
\change_unchanged
 an arbitrary number of graphs on
\change_deleted 1685850735 1494296090
e
\change_unchanged
 one page.
 For example, if we want to compare the CWND graphs for two different delay
 values and four different TCP congestion control algorithms we can do this
 with the following command: 
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size footnotesize
> combine_graphs.sh -c 4x2 -o test.pdf 
\end_layout

\begin_layout Plain Layout

\family typewriter
\size footnotesize
`find .
 -name 
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502415224

\family typewriter
\size footnotesize
exp_
\change_unchanged
20131220-182929_del_*_tcp_*cwnd*.pdf | sort`
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Here the 
\family typewriter
\size footnotesize
find
\family default
\size default
 command is used with wild-cards to select the PDF files to combine on one
 page and the 
\family typewriter
\size footnotesize
-c
\family default
\size default
 parameter is used to specify that the graphs are organised in a layout
 with 2 rows and 4 columns.
 Instead of using 
\family typewriter
\size small
find
\family default
\size default
 one can specify all file names explicitly.
 This allows for full control of the location of graphs on the single page,
 but is cumbersome if there are many graphs.
 Note that 
\family typewriter
\size footnotesize
combine_graphs.sh
\family default
\size default
 puts the graphs on the page row after row, i.e.
 for a 4x2 layout the first four graphs go in the first row, the second
 four graphs go in the second row, etc.
\end_layout

\begin_layout Section
Use Case – Analysing an Incast Experiment
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Examples"

\end_inset


\end_layout

\begin_layout Standard
In this use case we analyse the data from incast experiments carried out
 with TEACUP where one Linux querier sent quasi-simultaneous queries to
 multiple Linux responders in fixed five-second time intervals.
 Over successive experiments we have increased the number of responders
 from 4 to 12.
 Upstream/downstream bandwidth was 50
\begin_inset space \thinspace{}
\end_inset

Mpbs, emulated delay was 1
\begin_inset space \thinspace{}
\end_inset

ms, the buffer size of the bottleneck was 120 packets, and the size of the
 responses was 512
\begin_inset space \thinspace{}
\end_inset

kB.
 TCP was Linux Cubic and the AQM was varied.
\end_layout

\begin_layout Subsection
Analysing throughput and RTT
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "subsec:Incast-basic-analysis"

\end_inset


\end_layout

\begin_layout Standard
First, we use analyse_throughput to plot throughput.
 We filter so that only the flows from the responder are included as the
 flows from the querier are mainly ACKs after the initial query (using source_fi
lter).
 We reduce the point size in the plot with POINT_SIZE and tweak the window
 for throughput calculations with TC_AGGR_WIN_SIZE and TC_AGGR_INT_FACTOR
 (the default window settings are inappropriate for short sub-second traffic
 bursts).
 We use plot_params to change from the default kbps to Mbps.
 We only plot the first two bursts (by setting etime=6), since all bursts
 look relatively similar and we are interested to see more details for single
 bursts.
 We set link_len=1 to plot throughput including link-layer headers.
 The following shows the command:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_POINT_SIZE=0.25 TC_AGGR_WIN_SIZE=0.05 TC_AGGR_INT_FACTOR=10 fab
\change_inserted 1685850735 1494301016
 
\change_deleted 1685850735 1494301015
 
\change_unchanged
analyse_throughput:test_id=
\change_deleted 1685850735 1489541809
 
\change_inserted 1685850735 1502417246
 exp_
\change_unchanged
20150218-135735_
\change_deleted 1685850735 1502417398
experiment_
\change_unchanged
aqm_pfifo_responders_4,
\change_inserted 1685850735 1494301096
 
\change_deleted 1685850735 1489541813
 
\change_unchanged
out_dir=../result,link_len=1,source_filter= "S_172.16.11.61_80;
\change_deleted 1685850735 1489541819
 
\change_unchanged
S_172.16.1
\change_deleted 1685850735 1494301155
 
\change_unchanged
1.62_81;
\change_inserted 1685850735 1494301168
 
\change_unchanged
S_172.16.11.63_82;S_172.16.11.64_83",
\change_deleted 1685850735 1489541824
 
\change_unchanged
etime=6,
\change_inserted 1685850735 1494301176
 
\change_unchanged
plot_params='TC_YLAB
\backslash
="Throughput (mbps)" TC_YSCALER
\backslash
=0.000008'
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Next, we use analyse_rtt to plot the RTT.
 The parameters used are a subset of the above:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_POINT_SIZE=0.25 fab analyse_rtt:test_id=
\change_inserted 1685850735 1494301198
 
\change_deleted 1685850735 1489541838
 
\change_inserted 1685850735 1502417407
exp_
\change_unchanged
20150218-135735_
\change_deleted 1685850735 1502417403
experiment_
\change_unchanged
aqm_pfifo_responders_4,
\change_inserted 1685850735 1494301207
 
\change_deleted 1685850735 1489541841
 
\change_unchanged
out_dir=../results,source_filter="S_172.16.11.61_80;
\change_inserted 1685850735 1494301233
 
\change_deleted 1685850735 1489541854
 
\change_unchanged
S_172.16.11.62_81;S_172.16.11.63_82; S_172.16.11.64_83",etime=6
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Throughput-and-RTT"

\end_inset

 shows the throughput and RTT figures for the experiment with 4 responders.
 The throughput graph shows that the throughput varies depending on the
 responder.
 For example, in the first part of the first burst responders 1, 3 and 4
 have roughly 12–15
\begin_inset space \thinspace{}
\end_inset

mpbs whereas responder 2 has 7–10
\begin_inset space \thinspace{}
\end_inset

mbps, and only when the first three responders are finishing responder 2
 is catching up.
 The second burst is even more unequal with responders 1 and 3 getting a
 higher share of the bandwidth at the start, and responder 2 and 4 catching
 up later.
 The RTT estimated by SPP reaches up to 29
\begin_inset space \thinspace{}
\end_inset

ms with is the theoretical limit (1500 byte packet size multiplied with
 120 buffer slots divided by 50
\begin_inset space \thinspace{}
\end_inset

mbps).
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement t
wide true
sideways false
status open

\begin_layout Plain Layout
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/20150218-135735_experiment_tcp_cubic_del_1_aqm_pfifo_responders_4_down_50mbit_up_50mbit_incPer_5_incSz_512_bs_120_ecn_0_run_0_throughput_time_series.pdf
	scale 85
	BoundingBox 0bp 0bp 290bp 206bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Throughput
\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/20150218-135735_experiment_tcp_cubic_del_1_aqm_pfifo_responders_4_down_50mbit_up_50mbit_incPer_5_incSz_512_bs_120_ecn_0_run_0_spprtt_time_series.pdf
	scale 85
	BoundingBox 0bp 0bp 290bp 206bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
RTT
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Throughput-and-RTT"

\end_inset

Throughput and RTT statistics for experiment with 4 responders
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Analysing time between queries
\end_layout

\begin_layout Standard
For incast experiments the goal is that the querier in each round/burst
 sends out the queries as closely together in time as possible.
 We now investigate the time gaps between queries for the experiment with
 4 responders.
 We use the analyse_incast_iqtimes task to plot the times between a query
 sent to a responder and the first query sent in each burst separately for
 all responders (by setting by_responder=1 and cumulative=1).
 The querier must be specified with query_host, in this case it was host
 newtcp20.
 The following shows the command: 
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_POINT_SIZE=0.5 fab analyse_incast_iqtimes:test_id=
\change_inserted 1685850735 1494301260
 
\change_deleted 1685850735 1489541884
 
\change_inserted 1685850735 1502417616
exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417621
_experiment
\change_unchanged
_aqm_pfifo_responders_4,
\change_inserted 1685850735 1494301263
 
\change_deleted 1685850735 1489541886
 
\change_unchanged
out_dir=../results,query_host=newtcp20,
\change_inserted 1685850735 1494301271
 
\change_deleted 1685850735 1489541889
 
\change_unchanged
by_responder=1,cumulative=1 
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Incast-inter-query-times"

\end_inset

 shows the plot of inter-query times for the experiment with 4 responders.
 It shows that for the first 7 bursts the requests were sent very closely
 together within 2
\begin_inset space \thinspace{}
\end_inset

ms.
 However, from burst 8 
\change_deleted 1685850735 1488865728
onwards
\change_inserted 1685850735 1488865728
onward
\change_unchanged
, the requests were sent more and more spread out with the request to responder
 1 falling behind more and more.
 Still, even for the last burst all requests were sent within 9
\begin_inset space \thinspace{}
\end_inset

ms.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement tb
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/20150218-135735_experiment_tcp_cubic_del_1_aqm_pfifo_responders_4_down_50mbit_up_50mbit_incPer_5_incSz_512_bs_120_ecn_0_run_0_iqtimes_responders_time_series.pdf
	scale 85
	BoundingBox 0bp 0bp 290bp 206bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Incast-inter-query-times"

\end_inset

Incast inter-query times for experiment with 4 responders
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Analysing response times
\end_layout

\begin_layout Standard
Now let us have a look at the actual response times for the experiment with
 4 responders.
 To plot the response times over time for each responder separately, we
 use the analyse_incast task without any parameters (except that we use
 out_dir to put the interim data files and the PDF files in the desired
 directory):
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_POINT_SIZE=0.5 fab analyse_incast:test_id=
\change_inserted 1685850735 1494301299
 
\change_deleted 1685850735 1489541895
 
\change_inserted 1685850735 1502417629
exp_
\change_unchanged
20150218-135735_
\change_deleted 1685850735 1502417667
experiment_
\change_unchanged
aqm_pfifo_responders_4,
\change_inserted 1685850735 1494301304
 
\change_deleted 1685850735 1489541902
 
\change_unchanged
out_dir=../results
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Incast-response-times"

\end_inset

 shows the response times over time for the different responders for the
 experiment with 4 responders.
 Response time varies for the different responders but in general is between
 0.3 and 0.35 seconds for all bursts.
 For the first two bursts we can see that response times are exactly as
 expected from the throughput graphs, e.g.
 in burst one responder 2 has the highest response time since it has the
 lowest throughput initially.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement tb
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/20150218-135735_experiment_tcp_cubic_del_1_aqm_pfifo_responders_4_down_50mbit_up_50mbit_incPer_5_incSz_512_bs_120_ecn_0_run_0_restime_time_series.pdf
	scale 85
	BoundingBox 0bp 0bp 290bp 206bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Incast-response-times"

\end_inset

Incast response times for experiment with 4 responders
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Analysing acknowledged bytes and dupACKs
\end_layout

\begin_layout Standard
To plot the acknowledged bytes and dupACKs we use the analyse_ackseq task.
 We set burst_sep to 1 second and select only the first and second burst
 with sburst=1 and eburst=2.
 We select the ACK flows corresponding to the data flows from the four responder
s using source_filter.
 Since the ACK flows travel in the opposite direction as the data, our source
 filters from Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Incast-basic-analysis"

\end_inset

 (which filtered the data coming 
\emph on
from
\emph default
 the various responders) now become filters that filter the ACKs going 
\emph on
to
\emph default
 the various responders.
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\family typewriter
\size small

\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_POINT_SIZE=0.25 fab analyse_ackseq:test_id=
\change_deleted 1685850735 1489541917
 
\change_inserted 1685850735 1502417715
 exp_
\change_unchanged
20150218-135735_
\change_deleted 1685850735 1502417720
experiment_
\change_unchanged
aqm_pfifo_responders_4,
\change_inserted 1685850735 1494301335
 
\change_deleted 1685850735 1489541919
 
\change_unchanged
out_dir=../results,source_filter=
\change_inserted 1685850735 1494301338
 
\change_deleted 1685850735 1489541922
 
\change_unchanged
"D_172.16.11.61_80;D_172.16.11.62_81;
\change_inserted 1685850735 1494301339
 
\change_deleted 1685850735 1489541928
 
\change_unchanged
D_172.16.11.63_82;D_172.16.11.64_83",
\change_deleted 1685850735 1489541931
 
\change_unchanged
burst_sep=1,
\change_inserted 1685850735 1494301370
 
\change_unchanged
sburst=1,eburst=2
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Acknowledged-bytes"

\end_inset

 shows the acknowledged bytes per burst for each responder for the experiment
 with 4 responders.
 Again we can see that the download speed varies for the different responders
 with responder 2 being the slowest.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement tb
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/20150218-135735_experiment_tcp_cubic_del_1_aqm_pfifo_responders_4_down_50mbit_up_50mbit_incPer_5_incSz_512_bs_120_ecn_0_run_0_ackseqno_bursts_time_series.pdf
	scale 85
	BoundingBox 0bp 0bp 290bp 206bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Acknowledged-bytes"

\end_inset

Acknowledged bytes per burst and responder for experiment with 4 responders
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Response times versus number of responders
\end_layout

\begin_layout Standard
Finally, let us compare the response times for an increasing number of responder
s.
 To plot comparison graphs we use the analyse_cmpexp task.
 We create a file called explist.txt that contains the list of experiment
 IDs for all the experiments with different responders.
 The file has the following content:
\end_layout

\begin_layout Standard
\begin_inset listings
lstparams "basicstyle={\scriptsize\ttfamily}"
inline false
status open

\begin_layout Plain Layout

\change_inserted 1685850735 1502417733

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417760
_experiment
\change_unchanged
_aqm_pfifo_responders_4
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417737

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417765
_experiment
\change_unchanged
_aqm_pfifo_responders_5
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417739

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417770
_experiment
\change_unchanged
_aqm_pfifo_responders_6
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417741

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417774
_experiment
\change_unchanged
_aqm_pfifo_responders_7
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417743

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417778
_experiment
\change_unchanged
_aqm_pfifo_responders_8
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417746

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417782
_experiment
\change_unchanged
_aqm_pfifo_responders_9
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417748

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417786
_experiment
\change_unchanged
_aqm_pfifo_responders_10
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417750

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417789
_experiment
\change_unchanged
_aqm_pfifo_responders_11
\end_layout

\begin_layout Plain Layout

\change_inserted 1685850735 1502417754

exp_
\change_unchanged
20150218-135735
\change_deleted 1685850735 1502417794
_experiment
\change_unchanged
_aqm_pfifo_responders_12
\end_layout

\end_inset


\end_layout

\begin_layout Standard
First, let us have a look at the first four responders.
 We specify source_filter to select the first four responders.
 We set metric to response time (`restime') and the type of plot to boxplot
 (`box').
 The PDF file name prefix is set to 
\begin_inset Quotes eld
\end_inset

FIRST_FOUR
\begin_inset Quotes erd
\end_inset

 to get a file name we can identify later.
 
\end_layout

\begin_layout Standard
To make the x-axis look nicer we set TC_NICER_XLABS=1 and omit_const_xlab_vars=1.
 We decided to change the first default colour, as the default dark blue
 makes the median lines inside the boxes harder to read (and as excuse to
 introduce the plot_script parameter).
 We created a slightly modified version of the default plot script named
 
\family typewriter
\size footnotesize
my_plot_cmp_experiments.R
\family default
\size default
, in which the first colour is changed from the default dark blue to a lighter
 blue (by redefining the cols array defined in plot_func.R after the point
 where plot_func.R is included).
\begin_inset Foot
status open

\begin_layout Plain Layout
Note that 
\family typewriter
\size scriptsize
my_plot_cmp_experiments.R
\family default
\size default
 includes other R scripts, such as plot_func.R.
 The included scripts also need to be copied in the same directory as 
\family typewriter
\size scriptsize
my_plot_cmp_experiments.R 
\family default
\size default
even if they are not modified.
 Alternatively, one needs to modify the include paths to point to the original
 scripts from the TEACUP distribution.
\end_layout

\end_inset

 Then we instructed TEACUP to use the modified script for plotting with
 the plot_script parameter.
 
\end_layout

\begin_layout Standard
The command used for plotting is:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\family typewriter
\size small
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_NICER_XLABS=1 fab analyse_cmpexp:exp_list=
\change_deleted 1685850735 1489541939
 
\change_unchanged
explist.txt,
\change_inserted 1685850735 1494301425
 
\change_unchanged
out_dir=../results,
\change_deleted 1685850735 1489541942
 
\change_unchanged
source_filter="D_172.16.11.61_80;
\change_inserted 1685850735 1494301432
 
\change_unchanged
D_172.16.11.62_81;
\change_deleted 1685850735 1489541945
 
\change_unchanged
D_172.16.11.63_82;
\change_inserted 1685850735 1494301435
 
\change_unchanged
D_172.16.11.64_83",
\change_deleted 1685850735 1494301438
 
\change_unchanged
metric=restime,ptype=box,
\change_inserted 1685850735 1494301458
 
\change_unchanged
omit_const_xlab_vars=1,
\change_deleted 1685850735 1489541949
 
\change_unchanged
out_name="FIRST_FOUR",
\change_inserted 1685850735 1494301472
 
\change_unchanged
plot_script="R CMD BATCH --vanilla ./my_plot_cmp_experiments.R"
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Response-time-depending"

\end_inset

 shows the response time distribution as boxplots for the first four responders
 over all the experiments (the boxplots are the distributions of the response
 times over all burst in each experiment).
 We can see that response time is increasing with the total number of responders
 as expected, but depending on the experiment and responder there variations.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement tb
wide true
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/FIRST_FOUR_20150218-135735_experiment_restime_box_cmp_exp.pdf
	scale 85
	BoundingBox 0bp 0bp 335bp 206bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Response-time-depending"

\end_inset

Response time distributions for the first four responders depending on the
 number of responders
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Next, let us simply plot the response time distributions over all responders
 in each experiment.
 We specify source_filter to select all flows to the querier and instruct
 TEACUP to merge all flows in each experiment into one box instead of plotting
 a box for each flow (by setting merge_data=1).
 The other parameters used are the same as before.
\end_layout

\begin_layout Standard
The command used for plotting is:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
noindent 
\backslash
colorbox{lightgray}{
\end_layout

\end_inset


\end_layout

\begin_layout Standard

\family typewriter
\size small
\begin_inset Box Frameless
position "t"
hor_pos "c"
has_inner_box 1
inner_pos "t"
use_parbox 0
use_makebox 0
width "98col%"
special "none"
height "1in"
height_special "totalheight"
thickness "0.4pt"
separation "3pt"
shadowsize "4pt"
framecolor "black"
backgroundcolor "none"
status open

\begin_layout Plain Layout

\family typewriter
\size scriptsize
> TC_NICER_XLABS=1 fab analyse_cmpexp:exp_list=
\change_deleted 1685850735 1489541960
 
\change_unchanged
explist.txt,
\change_inserted 1685850735 1494301510
 
\change_unchanged
out_dir=../results,
\change_deleted 1685850735 1489541962
 
\change_unchanged
source_filter="S_172.16.10.60_*",
\change_inserted 1685850735 1494301533
 
\change_unchanged
merge_data=1,
\change_deleted 1685850735 1489541965
 
\change_unchanged
metric=restime,ptype=box,
\change_inserted 1685850735 1494301550
 
\change_unchanged
omit_const_xlab_vars=1,
\change_deleted 1685850735 1494301522
 
\change_unchanged
out_name="ALL",plot_script="R CMD BATCH --vanilla ./my_plot_cmp_experiments.R"
 
\end_layout

\end_inset


\begin_inset ERT
status open

\begin_layout Plain Layout

}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Figure 
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Response-time-depending-1"

\end_inset

 shows the response time distributions as boxplots, where each box shows
 the distribution of response times over all bursts of all responders in
 each experiment.
 The figures shows that response time is increasing with an increasing number
 of responders as expected.
 It also shows that the variance of the response times increases with an
 increasing number of responders.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement tb
wide true
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename graphs/ALL_20150218-135735_experiment_restime_box_cmp_exp.pdf
	scale 85
	BoundingBox 0bp 0bp 335bp 208bp
	clip

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
\begin_inset CommandInset label
LatexCommand label
name "fig:Response-time-depending-1"

\end_inset

Response time distributions for all responders depending on the number of
 responders
\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Conclusions and Future Work
\end_layout

\begin_layout Standard
\begin_inset CommandInset label
LatexCommand label
name "sec:Conclusions"

\end_inset


\end_layout

\begin_layout Standard
TEACUP is a Python-based software tool we developed to run automated TCP
 performance tests in a controlled testbed 
\begin_inset CommandInset citation
LatexCommand cite
key "zander2018_teacup_v1.1_system"

\end_inset

.
 In this report we described TEACUP's functionality to extract statistics
 and plot graphs based on data collected during the experiments.
\end_layout

\begin_layout Section*
Acknowledgements
\end_layout

\begin_layout Standard
TEACUP versions prior to 1.0 were developed as part of a project funded by
 Cisco Systems and titled "Study in TCP Congestion Control Performance In
 A Data Centre".
 This was a collaborative effort between Swinburne University of Technology's
 
\change_deleted 1685850735 1488934472
Center
\change_inserted 1685850735 1488934472
Centre
\change_unchanged
 for Advanced Internet 
\change_deleted 1685850735 1488934458
Archectures
\change_inserted 1685850735 1488934458
Architectures
\change_unchanged
 and Fred Baker of Cisco Systems.
 These may be found at 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://caia.swin.edu.au/tools/teacup/downloads.html
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
Starting with TEACUP v1.0, development will be community supported and publicly
 hosted at 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://sourceforge.net/projects/teacup/
\end_layout

\end_inset

.
\change_inserted 193492759 1517561476

\end_layout

\begin_layout Standard

\change_inserted 193492759 1517561509
Russell Collom contributed additional text in 2017 for version 1.1 of this
 document.
\change_unchanged

\end_layout

\begin_layout Section*
Copyright and License
\begin_inset CommandInset label
LatexCommand label
name "sec:Copying"

\end_inset


\end_layout

\begin_layout Standard
This document
\change_inserted 1685850735 1494304939
 is based on
\change_deleted 1685850735 1494304936
,
\change_unchanged
 
\begin_inset Quotes eld
\end_inset

TEACUP v1.0 – Data Analysis Functions
\begin_inset Quotes erd
\end_inset

 by Sebastian Zander and Grenville Armitage, is 
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
copyright
\end_layout

\end_inset


\begin_inset space ~
\end_inset

2015 – 2016 CAIA, Swinburne University of Technology.
 
\change_deleted 1685850735 1494305027
As of
\change_inserted 1685850735 1494305027
The original was released in
\change_unchanged
 June 2016 
\change_deleted 1685850735 1494305294
this document has been licensed 
\change_unchanged
under a Creative Commons Attribution-ShareAlike 4.0 International License
 (CC BY-SA 4.0, 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://creativecommons.org/licenses/by-sa/4.0
\end_layout

\end_inset

).
 Based on a work at 
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://caia.swin.edu.au/reports/150529B/CAIA-TR-150529B.pdf
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
balance
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset bibtex
LatexCommand bibtex
bibfiles "teacup-analysis"
options "IEEEtran"

\end_inset


\end_layout

\end_body
\end_document
